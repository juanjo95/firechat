var RR=Object.defineProperty,NR=Object.defineProperties,OR=Object.getOwnPropertyDescriptors,US=Object.getOwnPropertySymbols,PR=Object.prototype.hasOwnProperty,kR=Object.prototype.propertyIsEnumerable,BS=(Je,ye,O)=>ye in Je?RR(Je,ye,{enumerable:!0,configurable:!0,writable:!0,value:O}):Je[ye]=O,vt=(Je,ye)=>{for(var O in ye||(ye={}))PR.call(ye,O)&&BS(Je,O,ye[O]);if(US)for(var O of US(ye))kR.call(ye,O)&&BS(Je,O,ye[O]);return Je},fi=(Je,ye)=>NR(Je,OR(ye));(self.webpackChunkfirechat=self.webpackChunkfirechat||[]).push([[179],{6086:(Je,ye,O)=>{"use strict";function se(ne,ce,ge,we){return new(ge||(ge=Promise))(function(he,_t){function rn(It){try{wt(we.next(It))}catch(Dt){_t(Dt)}}function Bn(It){try{wt(we.throw(It))}catch(Dt){_t(Dt)}}function wt(It){It.done?he(It.value):function(he){return he instanceof ge?he:new ge(function(_t){_t(he)})}(It.value).then(rn,Bn)}wt((we=we.apply(ne,ce||[])).next())})}function ue(ne){return this instanceof ue?(this.v=ne,this):new ue(ne)}function Y(ne,ce,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,we=ge.apply(ne,ce||[]),he=[];return Oe={},_t("next"),_t("throw"),_t("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function _t(ln){we[ln]&&(Oe[ln]=function(dr){return new Promise(function(hr,Jt){he.push([ln,dr,hr,Jt])>1||rn(ln,dr)})})}function rn(ln,dr){try{!function(ln){ln.value instanceof ue?Promise.resolve(ln.value.v).then(wt,It):Dt(he[0][2],ln)}(we[ln](dr))}catch(hr){Dt(he[0][3],hr)}}function wt(ln){rn("next",ln)}function It(ln){rn("throw",ln)}function Dt(ln,dr){ln(dr),he.shift(),he.length&&rn(he[0][0],he[0][1])}}function Ie(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,ce=ne[Symbol.asyncIterator];return ce?ce.call(ne):(ne=function(ne){var ce="function"==typeof Symbol&&Symbol.iterator,ge=ce&&ne[ce],we=0;if(ge)return ge.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&we>=ne.length&&(ne=void 0),{value:ne&&ne[we++],done:!ne}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(ne),ge={},we("next"),we("throw"),we("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function we(he){ge[he]=ne[he]&&function(_t){return new Promise(function(rn,Bn){!function(he,_t,rn,Bn){Promise.resolve(Bn).then(function(wt){he({value:wt,done:rn})},_t)}(rn,Bn,(_t=ne[he](_t)).done,_t.value)})}}}O.d(ye,{mG:()=>se,qq:()=>ue,FC:()=>Y,KL:()=>Ie})},8118:(Je,ye,O)=>{"use strict";O.d(ye,{hO:()=>ke,xv:()=>le,Dh:()=>se,GT:()=>fe,cc:()=>Te,on:()=>j,pX:()=>ie});var g=O(3668),L=O(6543),R=O(6146);Je=O.hmd(Je);const re=["ngOnDestroy"],ie=(Y,ae,Ie,ve={})=>new Proxy(Y,{get:(Ge,xe)=>Ie.runOutsideAngular(()=>{var qe;if(Y[xe])return(null===(qe=null==ve?void 0:ve.spy)||void 0===qe?void 0:qe.get)&&ve.spy.get(xe,Y[xe]),Y[xe];if(re.indexOf(xe)>-1)return()=>{};const We=ae.toPromise().then(ct=>{const ne=ct&&ct[xe];return"function"==typeof ne?ne.bind(ct):ne&&ne.then?ne.then(ce=>Ie.run(()=>ce)):Ie.run(()=>ne)});return new Proxy(()=>{},{get:(ct,ne)=>We[ne],apply:(ct,ne,ce)=>We.then(ge=>{var we;const Oe=ge&&ge(...ce);return(null===(we=null==ve?void 0:ve.spy)||void 0===we?void 0:we.apply)&&ve.spy.apply(xe,ce,Oe),Oe})})})}),fe=(Y,ae)=>{ae.forEach(Ie=>{Object.getOwnPropertyNames(Ie.prototype||Ie).forEach(ve=>{Object.defineProperty(Y.prototype,ve,Object.getOwnPropertyDescriptor(Ie.prototype||Ie,ve))})})};class oe{constructor(ae){return ae}}const se=new g.OlP("angularfire2.app.options"),le=new g.OlP("angularfire2.app.name");function j(Y,ae,Ie){const Ge="object"==typeof Ie&&Ie||{};Ge.name=Ge.name||"string"==typeof Ie&&Ie||"[DEFAULT]";const qe=L.Z.apps.filter(We=>We&&We.name===Ge.name)[0]||ae.runOutsideAngular(()=>L.Z.initializeApp(Y,Ge));try{JSON.stringify(Y)!==JSON.stringify(qe.options)&&U("error",`${qe.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(We){}return new oe(qe)}const U=(Y,...ae)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Y](...ae)},ee={provide:oe,useFactory:j,deps:[se,g.R0b,[new g.FiY,le]]};let ke=(()=>{class Y{constructor(Ie){L.Z.registerVersion("angularfire",R.q4.full,"core"),L.Z.registerVersion("angularfire",R.q4.full,"app-compat"),L.Z.registerVersion("angular",g.q4F.full,Ie.toString())}static initializeApp(Ie,ve){return{ngModule:Y,providers:[{provide:se,useValue:Ie},{provide:le,useValue:ve}]}}}return Y.\u0275fac=function(Ie){return new(Ie||Y)(g.LFG(g.Lbi))},Y.\u0275mod=g.oAB({type:Y}),Y.\u0275inj=g.cJS({providers:[ee]}),Y})();function Te(Y,ae,Ie,ve,Ge){const[,xe,qe]=globalThis.\u0275AngularfireInstanceCache.find(We=>We[0]===Y)||[];if(xe)return function(Y,ae){try{return Y.toString()===ae.toString()}catch(Ie){return Y===ae}}(Ge,qe)||(ue("error",`${ae} was already initialized on the ${Ie} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),ue("warn",{is:Ge,was:qe})),xe;{const We=ve();return globalThis.\u0275AngularfireInstanceCache.push([Y,We,Ge]),We}}const Ue=!!Je.hot,ue=(Y,...ae)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Y](...ae)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6146:(Je,ye,O)=>{"use strict";O.d(ye,{q4:()=>va,iC:()=>Bs,HU:()=>Ia,vb:()=>vh,JM:()=>_h});var g=O(3668),L=O(7334),R=O(1921),re=O(2646),ie=O(9842),fe=O(7817),oe=O(4516),se=O(4958);const le="@firebase/installations",j="0.5.4",ee=`w:${j}`,ke="FIS_v2",ae=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ie(D){return D instanceof ie.ZR&&D.code.includes("request-failed")}function ve({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Ge(D){return{token:D.token,requestStatus:2,expiresIn:ge(D.expiresIn),creationTime:Date.now()}}function xe(D,C){return qe.apply(this,arguments)}function qe(){return(qe=(0,R.Z)(function*(D,C){const F=(yield C.json()).error;return ae.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function We({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function ct(D,{refreshToken:C}){const M=We(D);return M.append("Authorization",function(D){return`${ke} ${D}`}(C)),M}function ne(D){return ce.apply(this,arguments)}function ce(){return(ce=(0,R.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function ge(D){return Number(D.replace("s","000"))}function Oe(D,C){return he.apply(this,arguments)}function he(){return(he=(0,R.Z)(function*(D,{fid:C}){const M=ve(D),W={method:"POST",headers:We(D),body:JSON.stringify({fid:C,authVersion:ke,appId:D.appId,sdkVersion:ee})},Se=yield ne(()=>fetch(M,W));if(Se.ok){const nt=yield Se.json();return{fid:nt.fid||C,registrationStatus:2,refreshToken:nt.refreshToken,authToken:Ge(nt.authToken)}}throw yield xe("Create Installation",Se)})).apply(this,arguments)}function _t(D){return new Promise(C=>{setTimeout(C,D)})}const Bn=/^[cdef][\w-]{21}$/;function It(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function(D){return function(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Bn.test(M)?M:""}catch(D){return""}}function ln(D){return`${D.appName}!${D.appId}`}const dr=new Map;function hr(D,C){const M=ln(D);pn(M,C),function(D,C){const M=(!Wt&&"BroadcastChannel"in self&&(Wt=new BroadcastChannel("[Firebase] FID Change"),Wt.onmessage=D=>{pn(D.data.key,D.data.fid)}),Wt);M&&M.postMessage({key:D,fid:C}),0===dr.size&&Wt&&(Wt.close(),Wt=null)}(M,C)}function pn(D,C){const M=dr.get(D);if(M)for(const F of M)F(C)}let Wt=null;const gn="firebase-installations-store";let jn=null;function ii(){return jn||(jn=(0,se.openDb)("firebase-installations-database",1,D=>{0===D.oldVersion&&D.createObjectStore(gn)})),jn}function tt(D,C){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,R.Z)(function*(D,C){const M=ln(D),K=(yield ii()).transaction(gn,"readwrite"),W=K.objectStore(gn),Se=yield W.get(M);return yield W.put(C,M),yield K.complete,(!Se||Se.fid!==C.fid)&&hr(D,C.fid),C})).apply(this,arguments)}function nr(D){return $n.apply(this,arguments)}function $n(){return($n=(0,R.Z)(function*(D){const C=ln(D),F=(yield ii()).transaction(gn,"readwrite");yield F.objectStore(gn).delete(C),yield F.complete})).apply(this,arguments)}function ht(D,C){return dt.apply(this,arguments)}function dt(){return(dt=(0,R.Z)(function*(D,C){const M=ln(D),K=(yield ii()).transaction(gn,"readwrite"),W=K.objectStore(gn),Se=yield W.get(M),nt=C(Se);return void 0===nt?yield W.delete(M):yield W.put(nt,M),yield K.complete,nt&&(!Se||Se.fid!==nt.fid)&&hr(D,nt.fid),nt})).apply(this,arguments)}function xt(D){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,R.Z)(function*(D){let C;const M=yield ht(D,F=>{const K=Hn(F),W=Kt(D,K);return C=W.registrationPromise,W.installationEntry});return""===M.fid?{installationEntry:yield C}:{installationEntry:M,registrationPromise:C}})).apply(this,arguments)}function Hn(D){return Ht(D||{fid:It(),registrationStatus:0})}function Kt(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(ae.create("app-offline"))};const M={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function(D,C){return ut.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:oa(D)}:{installationEntry:C}}function ut(){return(ut=(0,R.Z)(function*(D,C){try{return tt(D,yield Oe(D,C))}catch(M){throw Ie(M)&&409===M.customData.serverCode?yield nr(D):yield tt(D,{fid:C.fid,registrationStatus:0}),M}})).apply(this,arguments)}function oa(D){return sn.apply(this,arguments)}function sn(){return(sn=(0,R.Z)(function*(D){let C=yield Zt(D);for(;1===C.registrationStatus;)yield _t(100),C=yield Zt(D);if(0===C.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield xt(D);return F||M}return C})).apply(this,arguments)}function Zt(D){return ht(D,C=>{if(!C)throw ae.create("installation-not-found");return Ht(C)})}function Ht(D){return function(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function bs(D,C){return B.apply(this,arguments)}function B(){return(B=(0,R.Z)(function*({appConfig:D,platformLoggerProvider:C},M){const F=V(D,M),K=ct(D,M),W=C.getImmediate({optional:!0});W&&K.append("x-firebase-client",W.getPlatformInfoString());const nt={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:ee}})},ze=yield ne(()=>fetch(F,nt));if(ze.ok)return Ge(yield ze.json());throw yield xe("Generate Auth Token",ze)})).apply(this,arguments)}function V(D,{fid:C}){return`${ve(D)}/${C}/authTokens:generate`}function H(D){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,R.Z)(function*(D,C=!1){let M;const F=yield ht(D.appConfig,W=>{if(!On(W))throw ae.create("not-registered");const Se=W.authToken;if(!C&&rr(Se))return W;if(1===Se.requestStatus)return M=X(D,C),W;{if(!navigator.onLine)throw ae.create("app-offline");const nt=q(W);return M=Xt(D,nt),nt}});return M?yield M:F.authToken})).apply(this,arguments)}function X(D,C){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,R.Z)(function*(D,C){let M=yield st(D.appConfig);for(;1===M.authToken.requestStatus;)yield _t(100),M=yield st(D.appConfig);const F=M.authToken;return 0===F.requestStatus?H(D,C):F})).apply(this,arguments)}function st(D){return ht(D,C=>{if(!On(C))throw ae.create("not-registered");return function(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Xt(D,C){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,R.Z)(function*(D,C){try{const M=yield bs(D,C),F=Object.assign(Object.assign({},C),{authToken:M});return yield tt(D.appConfig,F),M}catch(M){if(!Ie(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield tt(D.appConfig,F)}else yield nr(D.appConfig);throw M}})).apply(this,arguments)}function On(D){return void 0!==D&&2===D.registrationStatus}function rr(D){return 2===D.requestStatus&&!function(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function q(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function $e(){return($e=(0,R.Z)(function*(D){const C=D,{installationEntry:M,registrationPromise:F}=yield xt(C.appConfig);return F?F.catch(console.error):H(C).catch(console.error),M.fid})).apply(this,arguments)}function kt(){return(kt=(0,R.Z)(function*(D,C=!1){const M=D;return yield Tt(M.appConfig),(yield H(M,C)).token})).apply(this,arguments)}function Tt(D){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,R.Z)(function*(D){const{registrationPromise:C}=yield xt(D);C&&(yield C)})).apply(this,arguments)}function gi(D){return ae.create("missing-app-config-values",{valueName:D})}const Kn="installations";(0,re._registerComponent)(new fe.wA(Kn,D=>{const C=D.getProvider("app").getImmediate(),M=function(D){if(!D||!D.options)throw gi("App Configuration");if(!D.name)throw gi("App Name");const C=["projectId","apiKey","appId"];for(const M of C)if(!D.options[M])throw gi(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:M,platformLoggerProvider:(0,re._getProvider)(C,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,re._registerComponent)(new fe.wA("installations-internal",D=>{const C=D.getProvider("app").getImmediate(),M=(0,re._getProvider)(C,Kn).getImmediate();return{getId:()=>function(D){return $e.apply(this,arguments)}(M),getToken:K=>function(D){return kt.apply(this,arguments)}(M,K)}},"PRIVATE")),(0,re.registerVersion)(le,j),(0,re.registerVersion)(le,j,"esm2017");const Ct="@firebase/remote-config",an=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ac{constructor(C,M,F,K){this.client=C,this.storage=M,this.storageCache=F,this.logger=K}isCachedDataFresh(C,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,K=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${K}.`),K}fetch(C){var M=this;return(0,R.Z)(function*(){const[F,K]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(K&&M.isCachedDataFresh(C.cacheMaxAgeMillis,F))return K;C.eTag=K&&K.eTag;const W=yield M.client.fetch(C),Se=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===W.status&&Se.push(M.storage.setLastSuccessfulFetchResponse(W)),yield Promise.all(Se),W})()}}function Em(D=navigator){return D.languages&&D.languages[0]||D.language}class fr{constructor(C,M,F,K,W,Se){this.firebaseInstallations=C,this.sdkVersion=M,this.namespace=F,this.projectId=K,this.apiKey=W,this.appId=Se}fetch(C){var M=this;return(0,R.Z)(function*(){const[F,K]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,nt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},ze={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:K,app_id:M.appId,language_code:Em()},Ot={method:"POST",headers:nt,body:JSON.stringify(ze)},cn=fetch(Se,Ot),pr=new Promise((fo,hs)=>{C.signal.addEventListener(()=>{const fs=new Error("The operation was aborted.");fs.name="AbortError",hs(fs)})});let ci;try{yield Promise.race([cn,pr]),ci=yield cn}catch(fo){let hs="fetch-client-network";throw"AbortError"===fo.name&&(hs="fetch-timeout"),an.create(hs,{originalErrorMessage:fo.message})}let _n=ci.status;const gr=ci.headers.get("ETag")||void 0;let Ca,mr;if(200===ci.status){let fo;try{fo=yield ci.json()}catch(hs){throw an.create("fetch-client-parse",{originalErrorMessage:hs.message})}Ca=fo.entries,mr=fo.state}if("INSTANCE_STATE_UNSPECIFIED"===mr?_n=500:"NO_CHANGE"===mr?_n=304:("NO_TEMPLATE"===mr||"EMPTY_CONFIG"===mr)&&(Ca={}),304!==_n&&200!==_n)throw an.create("fetch-status",{httpStatus:_n});return{status:_n,eTag:gr,config:Ca}})()}}class nh{constructor(C,M){this.client=C,this.storage=M}fetch(C){var M=this;return(0,R.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:M,backoffCount:F}){var K=this;return(0,R.Z)(function*(){yield function(D,C){return new Promise((M,F)=>{const K=Math.max(C-Date.now(),0),W=setTimeout(M,K);D.addEventListener(()=>{clearTimeout(W),F(an.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,M);try{const W=yield K.client.fetch(C);return yield K.storage.deleteThrottleMetadata(),W}catch(W){if(!function(D){if(!(D instanceof ie.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(W))throw W;const Se={throttleEndTimeMillis:Date.now()+(0,ie.$s)(F),backoffCount:F+1};return yield K.storage.setThrottleMetadata(Se),K.attemptFetch(C,Se)}})()}}class Rc{constructor(C,M,F,K,W){this.app=C,this._client=M,this._storageCache=F,this._storage=K,this._logger=W,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Qu(D,C){const M=D.target.error||void 0;return an.create(C,{originalErrorMessage:M&&M.message})}const xs="app_namespace_store";class Oc{constructor(C,M,F,K=function(){return new Promise((D,C)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{C(Qu(F,"storage-open"))},M.onsuccess=F=>{D(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(xs,{keyPath:"compositeKey"})}}catch(M){C(an.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=C,this.appName=M,this.namespace=F,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var M=this;return(0,R.Z)(function*(){const F=yield M.openDbPromise;return new Promise((K,W)=>{const nt=F.transaction([xs],"readonly").objectStore(xs),ze=M.createCompositeKey(C);try{const Ot=nt.get(ze);Ot.onerror=cn=>{W(Qu(cn,"storage-get"))},Ot.onsuccess=cn=>{const pr=cn.target.result;K(pr?pr.value:void 0)}}catch(Ot){W(an.create("storage-get",{originalErrorMessage:Ot&&Ot.message}))}})})()}set(C,M){var F=this;return(0,R.Z)(function*(){const K=yield F.openDbPromise;return new Promise((W,Se)=>{const ze=K.transaction([xs],"readwrite").objectStore(xs),Ot=F.createCompositeKey(C);try{const cn=ze.put({compositeKey:Ot,value:M});cn.onerror=pr=>{Se(Qu(pr,"storage-set"))},cn.onsuccess=()=>{W()}}catch(cn){Se(an.create("storage-set",{originalErrorMessage:cn&&cn.message}))}})})()}delete(C){var M=this;return(0,R.Z)(function*(){const F=yield M.openDbPromise;return new Promise((K,W)=>{const nt=F.transaction([xs],"readwrite").objectStore(xs),ze=M.createCompositeKey(C);try{const Ot=nt.delete(ze);Ot.onerror=cn=>{W(Qu(cn,"storage-delete"))},Ot.onsuccess=()=>{K()}}catch(Ot){W(an.create("storage-delete",{originalErrorMessage:Ot&&Ot.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Jf{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,R.Z)(function*(){const M=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),K=C.storage.getActiveConfig(),W=yield M;W&&(C.lastFetchStatus=W);const Se=yield F;Se&&(C.lastSuccessfulFetchTimestampMillis=Se);const nt=yield K;nt&&(C.activeConfig=nt)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Xu(){return ua.apply(this,arguments)}function ua(){return(ua=(0,R.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(D){return!1}})).apply(this,arguments)}(0,re._registerComponent)(new fe.wA("remote-config",function(C,{instanceIdentifier:M}){const F=C.getProvider("app").getImmediate(),K=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw an.create("registration-window");if(!(0,ie.hl)())throw an.create("indexed-db-unavailable");const{projectId:W,apiKey:Se,appId:nt}=F.options;if(!W)throw an.create("registration-project-id");if(!Se)throw an.create("registration-api-key");if(!nt)throw an.create("registration-app-id");const ze=new Oc(nt,F.name,M=M||"firebase"),Ot=new Jf(ze),cn=new oe.Yd(Ct);cn.logLevel=oe.in.ERROR;const pr=new fr(K,re.SDK_VERSION,M,W,Se,nt),ci=new nh(pr,ze),_n=new Ac(ci,ze,Ot,cn),gr=new Rc(F,_n,Ot,ze,cn);return function(D){const C=(0,ie.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(gr),gr},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(Ct,"0.3.3"),(0,re.registerVersion)(Ct,"0.3.3","esm2017");const Xf="/firebase-messaging-sw.js",kc="/firebase-cloud-messaging-push-scope",Rs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Fi="google.c.a.c_id",Li="google.c.a.c_l",Fc="google.c.a.ts",rh="google.c.a.e";var Xs=(()=>{return(D=Xs||(Xs={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Xs;var D})();function _i(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function el(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),K=new Uint8Array(F.length);for(let W=0;W<F.length;++W)K[W]=F.charCodeAt(W);return K}const Ga="fcm_token_details_db",qa="fcm_token_object_Store";function ih(D){return za.apply(this,arguments)}function za(){return za=(0,R.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(W=>W.name).includes(Ga))return null;let C=null;return(yield(0,se.openDb)(Ga,5,function(){var F=(0,R.Z)(function*(K){var W;if(K.oldVersion<2||!K.objectStoreNames.contains(qa))return;const Se=K.transaction.objectStore(qa),nt=yield Se.index("fcmSenderId").get(D);if(yield Se.clear(),nt)if(2===K.oldVersion){const ze=nt;if(!ze.auth||!ze.p256dh||!ze.endpoint)return;C={token:ze.fcmToken,createTime:null!==(W=ze.createTime)&&void 0!==W?W:Date.now(),subscriptionOptions:{auth:ze.auth,p256dh:ze.p256dh,endpoint:ze.endpoint,swScope:ze.swScope,vapidKey:"string"==typeof ze.vapidKey?ze.vapidKey:_i(ze.vapidKey)}}}else if(3===K.oldVersion){const ze=nt;C={token:ze.fcmToken,createTime:ze.createTime,subscriptionOptions:{auth:_i(ze.auth),p256dh:_i(ze.p256dh),endpoint:ze.endpoint,swScope:ze.swScope,vapidKey:_i(ze.vapidKey)}}}else if(4===K.oldVersion){const ze=nt;C={token:ze.fcmToken,createTime:ze.createTime,subscriptionOptions:{auth:_i(ze.auth),p256dh:_i(ze.p256dh),endpoint:ze.endpoint,swScope:ze.swScope,vapidKey:_i(ze.vapidKey)}}}});return function(K){return F.apply(this,arguments)}}())).close(),yield(0,se.deleteDb)(Ga),yield(0,se.deleteDb)("fcm_vapid_details_db"),yield(0,se.deleteDb)("undefined"),tl(C)?C:null}),za.apply(this,arguments)}function tl(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const un="firebase-messaging-store";let eo=null;function Lc(){return eo||(eo=(0,se.openDb)("firebase-messaging-database",1,D=>{0===D.oldVersion&&D.createObjectStore(un)})),eo}function xn(D){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,R.Z)(function*(D){const C=Co(D),F=yield(yield Lc()).transaction(un).objectStore(un).get(C);if(F)return F;{const K=yield ih(D.appConfig.senderId);if(K)return yield vi(D,K),K}})).apply(this,arguments)}function vi(D,C){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,R.Z)(function*(D,C){const M=Co(D),K=(yield Lc()).transaction(un,"readwrite");return yield K.objectStore(un).put(C,M),yield K.complete,C})).apply(this,arguments)}function br(D){return nl.apply(this,arguments)}function nl(){return(nl=(0,R.Z)(function*(D){const C=Co(D),F=(yield Lc()).transaction(un,"readwrite");yield F.objectStore(un).delete(C),yield F.complete})).apply(this,arguments)}function Co({appConfig:D}){return D.appId}const Ut=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Wa(D,C){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,R.Z)(function*(D,C){const M=yield rl(D),F=no(C),K={method:"POST",headers:M,body:JSON.stringify(F)};let W;try{W=yield(yield fetch(ft(D.appConfig),K)).json()}catch(Se){throw Ut.create("token-subscribe-failed",{errorInfo:Se})}if(W.error)throw Ut.create("token-subscribe-failed",{errorInfo:W.error.message});if(!W.token)throw Ut.create("token-subscribe-no-token");return W.token})).apply(this,arguments)}function Ka(D,C){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,R.Z)(function*(D,C){const M=yield rl(D),F=no(C.subscriptionOptions),K={method:"PATCH",headers:M,body:JSON.stringify(F)};let W;try{W=yield(yield fetch(`${ft(D.appConfig)}/${C.token}`,K)).json()}catch(Se){throw Ut.create("token-update-failed",{errorInfo:Se})}if(W.error)throw Ut.create("token-update-failed",{errorInfo:W.error.message});if(!W.token)throw Ut.create("token-update-no-token");return W.token})).apply(this,arguments)}function To(D,C){return ir.apply(this,arguments)}function ir(){return(ir=(0,R.Z)(function*(D,C){const F={method:"DELETE",headers:yield rl(D)};try{const W=yield(yield fetch(`${ft(D.appConfig)}/${C}`,F)).json();if(W.error)throw Ut.create("token-unsubscribe-failed",{errorInfo:W.error.message})}catch(K){throw Ut.create("token-unsubscribe-failed",{errorInfo:K})}})).apply(this,arguments)}function ft({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function rl(D){return to.apply(this,arguments)}function to(){return(to=(0,R.Z)(function*({appConfig:D,installations:C}){const M=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function no({p256dh:D,auth:C,endpoint:M,vapidKey:F}){const K={web:{endpoint:M,auth:C,p256dh:D}};return F!==Rs&&(K.web.applicationPubKey=F),K}const il=6048e5;function Za(D){return sl.apply(this,arguments)}function sl(){return(sl=(0,R.Z)(function*(D){const C=yield ss(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:_i(C.getKey("auth")),p256dh:_i(C.getKey("p256dh"))},F=yield xn(D.firebaseDependencies);if(F){if(ca(F.subscriptionOptions,M))return Date.now()>=F.createTime+il?Lt(D,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield To(D.firebaseDependencies,F.token)}catch(K){console.warn(K)}return Rn(D.firebaseDependencies,M)}return Rn(D.firebaseDependencies,M)})).apply(this,arguments)}function Ya(D){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,R.Z)(function*(D){const C=yield xn(D.firebaseDependencies);C&&(yield To(D.firebaseDependencies,C.token),yield br(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Lt(D,C){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,R.Z)(function*(D,C){try{const M=yield Ka(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:M,createTime:Date.now()});return yield vi(D.firebaseDependencies,F),M}catch(M){throw yield Ya(D),M}})).apply(this,arguments)}function Rn(D,C){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,R.Z)(function*(D,C){const F={token:yield Wa(D,C),createTime:Date.now(),subscriptionOptions:C};return yield vi(D,F),F.token})).apply(this,arguments)}function ss(D,C){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,R.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:el(C)})})).apply(this,arguments)}function ca(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function Os(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcm_message_id};return function(D,C){if(!C.notification)return;D.notification={};const M=C.notification.title;M&&(D.notification.title=M);const F=C.notification.body;F&&(D.notification.body=F);const K=C.notification.image;K&&(D.notification.image=K)}(C,D),function(D,C){!C.data||(D.data=C.data)}(C,D),function(D,C){if(!C.fcmOptions)return;D.fcmOptions={};const M=C.fcmOptions.link;M&&(D.fcmOptions.link=M);const F=C.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(C,D),C}function So(D){return"object"==typeof D&&!!D&&Fi in D}function Xn(D,C){const M=[];for(let F=0;F<D.length;F++)M.push(D.charAt(F)),F<C.length&&M.push(C.charAt(F));return M.join("")}function ro(D){return Ut.create("missing-app-config-values",{valueName:D})}Xn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Xn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Mo{constructor(C,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function(D){if(!D||!D.options)throw ro("App Configuration Object");if(!D.name)throw ro("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const F of C)if(!M[F])throw ro(F);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:K,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ui(D){return xo.apply(this,arguments)}function xo(){return(xo=(0,R.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Xf,{scope:kc}),D.swRegistration.update().catch(()=>{})}catch(C){throw Ut.create("failed-service-worker-registration",{browserErrorMessage:C.message})}})).apply(this,arguments)}function Ja(D,C){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,R.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield ui(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Ut.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function oh(D,C){return io.apply(this,arguments)}function io(){return(io=(0,R.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=Rs)})).apply(this,arguments)}function No(){return(No=(0,R.Z)(function*(D,C){if(!navigator)throw Ut.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ut.create("permission-blocked");return yield oh(D,null==C?void 0:C.vapidKey),yield Ja(D,null==C?void 0:C.serviceWorkerRegistration),Za(D)})).apply(this,arguments)}function ol(D,C,M){return eu.apply(this,arguments)}function eu(){return(eu=(0,R.Z)(function*(D,C,M){const F=al(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[Fi],message_name:M[Li],message_time:M[Fc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function al(D){switch(D){case Xs.NOTIFICATION_CLICKED:return"notification_open";case Xs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ul(){return(ul=(0,R.Z)(function*(D,C){const M=C.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===Xs.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Os(M)):D.onMessageHandler.next(Os(M)));const F=M.data;So(F)&&"1"===F[rh]&&(yield ol(D,M.messageType,F))})).apply(this,arguments)}const ha="@firebase/messaging";function fa(){return bn.apply(this,arguments)}function bn(){return(bn=(0,R.Z)(function*(){return"undefined"!=typeof window&&(0,ie.hl)()&&(yield(0,ie.eu)())&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,re._registerComponent)(new fe.wA("messaging",D=>{const C=new Mo(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function(D,C){return ul.apply(this,arguments)}(C,M)),C},"PUBLIC")),(0,re._registerComponent)(new fe.wA("messaging-internal",D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function(D,C){return No.apply(this,arguments)}(C,F)}},"PRIVATE")),(0,re.registerVersion)(ha,"0.9.4"),(0,re.registerVersion)(ha,"0.9.4","esm2017");const Oo="analytics",Po="firebase_id",ah="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",iu="https://www.googletagmanager.com/gtag/js",Nn=new oe.Yd("@firebase/analytics");function pa(D){return Promise.all(D.map(C=>C.catch(M=>M)))}function uh(D,C){const M=document.createElement("script");M.src=`${iu}?l=${D}&id=${C}`,M.async=!0,document.head.appendChild(M)}function su(D,C,M,F,K,W){return as.apply(this,arguments)}function as(){return(as=(0,R.Z)(function*(D,C,M,F,K,W){const Se=F[K];try{if(Se)yield C[Se];else{const ze=(yield pa(M)).find(Ot=>Ot.measurementId===K);ze&&(yield C[ze.appId])}}catch(nt){Nn.error(nt)}D("config",K,W)})).apply(this,arguments)}function lh(D,C,M,F,K){return $c.apply(this,arguments)}function $c(){return($c=(0,R.Z)(function*(D,C,M,F,K){try{let W=[];if(K&&K.send_to){let Se=K.send_to;Array.isArray(Se)||(Se=[Se]);const nt=yield pa(M);for(const ze of Se){const Ot=nt.find(pr=>pr.measurementId===ze),cn=Ot&&C[Ot.appId];if(!cn){W=[];break}W.push(cn)}}0===W.length&&(W=Object.values(C)),yield Promise.all(W),D("event",F,K||{})}catch(W){Nn.error(W)}})).apply(this,arguments)}function In(){const D=window.document.getElementsByTagName("script");for(const C of Object.values(D))if(C.src&&C.src.includes(iu))return C;return null}const it=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ko=new class{constructor(C={},M=1e3){this.throttleMetadata=C,this.intervalMillis=M}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,M){this.throttleMetadata[C]=M}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function np(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function ga(D){return oo.apply(this,arguments)}function oo(){return(oo=(0,R.Z)(function*(D){var C;const{appId:M,apiKey:F}=D,K={method:"GET",headers:np(F)},W=ah.replace("{app-id}",M),Se=yield fetch(W,K);if(200!==Se.status&&304!==Se.status){let nt="";try{const ze=yield Se.json();(null===(C=ze.error)||void 0===C?void 0:C.message)&&(nt=ze.error.message)}catch(ze){}throw it.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:nt})}return Se.json()})).apply(this,arguments)}function wi(D){return ou.apply(this,arguments)}function ou(){return(ou=(0,R.Z)(function*(D,C=ko,M){const{appId:F,apiKey:K,measurementId:W}=D.options;if(!F)throw it.create("no-app-id");if(!K){if(W)return{measurementId:W,appId:F};throw it.create("no-api-key")}const Se=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},nt=new ks;return setTimeout((0,R.Z)(function*(){nt.abort()}),void 0!==M?M:6e4),ao({appId:F,apiKey:K,measurementId:W},Se,nt,C)})).apply(this,arguments)}function ao(D,C,M){return bt.apply(this,arguments)}function bt(){return(bt=(0,R.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:M},F,K=ko){const{appId:W,measurementId:Se}=D;try{yield ch(F,C)}catch(nt){if(Se)return Nn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${nt.message}]`),{appId:W,measurementId:Se};throw nt}try{const nt=yield ga(D);return K.deleteThrottleMetadata(W),nt}catch(nt){if(!dh(nt)){if(K.deleteThrottleMetadata(W),Se)return Nn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${nt.message}]`),{appId:W,measurementId:Se};throw nt}const ze=503===Number(nt.customData.httpStatus)?(0,ie.$s)(M,K.intervalMillis,30):(0,ie.$s)(M,K.intervalMillis),Ot={throttleEndTimeMillis:Date.now()+ze,backoffCount:M+1};return K.setThrottleMetadata(W,Ot),Nn.debug(`Calling attemptFetch again in ${ze} millis`),ao(D,Ot,F,K)}})).apply(this,arguments)}function ch(D,C){return new Promise((M,F)=>{const K=Math.max(C-Date.now(),0),W=setTimeout(M,K);D.addEventListener(()=>{clearTimeout(W),F(it.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function dh(D){if(!(D instanceof ie.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class ks{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}function Fo(){return er.apply(this,arguments)}function er(){return(er=(0,R.Z)(function*(){if(!(0,ie.hl)())return Nn.warn(it.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(D){return Nn.warn(it.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function lo(){return(lo=(0,R.Z)(function*(D,C,M,F,K,W,Se){var nt;const ze=wi(D);ze.then(_n=>{M[_n.measurementId]=_n.appId,D.options.measurementId&&_n.measurementId!==D.options.measurementId&&Nn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${_n.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_n=>Nn.error(_n)),C.push(ze);const Ot=Fo().then(_n=>{if(_n)return F.getId()}),[cn,pr]=yield Promise.all([ze,Ot]);In()||uh(W,cn.measurementId),K("js",new Date);const ci=null!==(nt=null==Se?void 0:Se.config)&&void 0!==nt?nt:{};return ci.origin="firebase",ci.update=!0,null!=pr&&(ci[Po]=pr),K("config",cn.measurementId,ci),cn.measurementId})).apply(this,arguments)}class hh{constructor(C){this.app=C}_delete(){return delete Ii[this.app.options.appId],Promise.resolve()}}let Ii={},pl=[];const ma={};let Lo,Di,us="dataLayer",Fs=!1;function Gt(D,C,M){!function(){const D=[];if((0,ie.ru)()&&D.push("This is a browser extension environment."),(0,ie.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,K)=>`(${K+1}) ${F}`).join(" "),M=it.create("invalid-analytics-context",{errorInfo:C});Nn.warn(M.message)}}();const F=D.options.appId;if(!F)throw it.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw it.create("no-api-key");Nn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ii[F])throw it.create("already-exists",{id:F});if(!Fs){!function(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(us);const{wrappedGtag:W,gtagCore:Se}=function(D,C,M,F,K){let W=function(...Se){window[F].push(arguments)};return window[K]&&"function"==typeof window[K]&&(W=window[K]),window[K]=function(D,C,M,F){function W(){return(W=(0,R.Z)(function*(Se,nt,ze){try{"event"===Se?yield lh(D,C,M,nt,ze):"config"===Se?yield su(D,C,M,F,nt,ze):D("set",nt)}catch(Ot){Nn.error(Ot)}})).apply(this,arguments)}return function(Se,nt,ze){return W.apply(this,arguments)}}(W,D,C,M),{gtagCore:W,wrappedGtag:window[K]}}(Ii,pl,ma,us,"gtag");Di=W,Lo=Se,Fs=!0}return Ii[F]=function(D,C,M,F,K,W,Se){return lo.apply(this,arguments)}(D,pl,ma,C,Lo,us,M),new hh(D)}function Vo(){return(Vo=(0,R.Z)(function*(D,C,M,F,K){if(K&&K.global)D("event",M,F);else{const W=yield C;D("event",M,Object.assign(Object.assign({},F),{send_to:W}))}})).apply(this,arguments)}function An(){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,R.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(D){return!1}})).apply(this,arguments)}const ph="@firebase/analytics";(0,re._registerComponent)(new fe.wA(Oo,(C,{options:M})=>Gt(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,re._registerComponent)(new fe.wA("analytics-internal",function(C){try{const M=C.getProvider(Oo).getImmediate();return{logEvent:(F,K,W)=>function(D,C,M,F){D=(0,ie.m9)(D),function(D,C,M,F,K){return Vo.apply(this,arguments)}(Di,Ii[D.app.options.appId],C,M,F).catch(K=>Nn.error(K))}(M,F,K,W)}}catch(M){throw it.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,re.registerVersion)(ph,"0.7.4"),(0,re.registerVersion)(ph,"0.7.4","esm2017");var Sn=O(5480),ya=O(6037);const ml=new class extends ya.v{}(class extends Sn.o{constructor(C,M){super(C,M),this.scheduler=C,this.work=M}schedule(C,M=0){return M>0?super.schedule(C,M):(this.delay=M,this.state=C,this.scheduler.flush(this),this)}execute(C,M){return M>0||this.closed?super.execute(C,M):this._execute(C,M)}requestAsyncId(C,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,M,F):C.flush(this)}});var Ti=O(906),yl=O(6801),_a=O(5649),Bo=O(8985);const va=new g.GfV("7.2.0"),_l="__angularfire_symbol__analyticsIsSupported",Ea="__angularfire_symbol__remoteConfigIsSupported",Sr="__angularfire_symbol__messagingIsSupported";function _h(D,C,M){if(C){if(1===C.length)return C[0];const W=C.filter(Se=>Se.app===M);if(1===W.length)return W[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[_l]||(globalThis[_l]=An().then(D=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=D)),globalThis[Sr]||(globalThis[Sr]=fa().then(D=>globalThis.__angularfire_symbol__messagingIsSupportedValue=D)),globalThis[Ea]||(globalThis[Ea]=Xu().then(D=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=D));const vh=(D,C)=>{const M=C?[C]:(0,L.C6)(),F=[];return M.forEach(K=>{K.container.getProvider(D).instances.forEach(Se=>{F.includes(Se)||F.push(Se)})}),F};function Mr(){}class wa{constructor(C,M=ml){this.zone=C,this.delegate=M}now(){return this.delegate.now()}schedule(C,M,F){const K=this.zone;return this.delegate.schedule(function(Se){K.runGuarded(()=>{C.apply(this,[Se])})},M,F)}}class zc{constructor(C){this.zone=C,this.task=null}call(C,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Mr,{},Mr,Mr)),M.pipe((0,yl.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ia=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new wa(Zone.current)),this.insideAngular=M.run(()=>new wa(Zone.current,Ti.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Us(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Bs(D){return Us(),function(D){return function(M){return(M=M.lift(new zc(D.ngZone))).pipe((0,_a.R)(D.outsideAngular),(0,Bo.Q)(D.insideAngular))}}(Us())(D)}},2755:(Je,ye,O)=>{"use strict";O.d(ye,{$:()=>oh,A:()=>wt,E:()=>Ms,G:()=>fr,I:()=>yi,K:()=>Qs,L:()=>xn,M:()=>br,N:()=>nl,P:()=>Eh,Q:()=>Co,R:()=>vh,T:()=>Vi,U:()=>Ns,V:()=>Ka,W:()=>rl,X:()=>Os,Y:()=>Uc,Z:()=>So,_:()=>Mo,a:()=>Lo,a0:()=>Xa,a1:()=>ol,a2:()=>al,a3:()=>ul,a4:()=>ll,a5:()=>cl,a6:()=>ep,a7:()=>bn,a8:()=>Ps,a9:()=>Im,aA:()=>po,aB:()=>Tm,aC:()=>wn,aG:()=>ls,aJ:()=>Ut,aa:()=>Dm,ab:()=>Oo,ae:()=>ah,af:()=>Nn,ag:()=>pa,aj:()=>sl,ak:()=>so,am:()=>ao,an:()=>er,ao:()=>Zu,ap:()=>jn,aq:()=>As,ar:()=>en,as:()=>Dn,at:()=>mp,au:()=>Jc,av:()=>Wt,aw:()=>Ne,ax:()=>tt,ay:()=>oi,az:()=>Zc,b:()=>us,c:()=>ze,d:()=>ci,e:()=>cn,f:()=>Ho,g:()=>lp,h:()=>ap,i:()=>Sn,j:()=>$i,k:()=>Fm,l:()=>Us,m:()=>xl,o:()=>_t,r:()=>xr,s:()=>zc,u:()=>Wc,z:()=>ln});var g=O(1921),L=O(9842),R=O(2646);function oe(_,d){var p={};for(var v in _)Object.prototype.hasOwnProperty.call(_,v)&&d.indexOf(v)<0&&(p[v]=_[v]);if(null!=_&&"function"==typeof Object.getOwnPropertySymbols){var T=0;for(v=Object.getOwnPropertySymbols(_);T<v.length;T++)d.indexOf(v[T])<0&&Object.prototype.propertyIsEnumerable.call(_,v[T])&&(p[v[T]]=_[v[T]])}return p}var we=O(4516),Oe=O(7817);const _t={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},wt={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ln=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},dr=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},hr=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xi=new we.Yd("@firebase/auth");function pn(_,...d){Xi.logLevel<=we.in.ERROR&&Xi.error(`Auth (${R.SDK_VERSION}): ${_}`,...d)}function Dn(_,...d){throw pi(_,...d)}function Wt(_,...d){return pi(_,...d)}function es(_,d,p){const v=Object.assign(Object.assign({},dr()),{[d]:p});return new L.LL("auth","Firebase",v).create(d,{appName:_.name})}function ri(_,d,p){if(!(d instanceof p))throw p.name!==d.constructor.name&&Dn(_,"argument-error"),es(_,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function pi(_,...d){if("string"!=typeof _){const p=d[0],v=[...d.slice(1)];return v[0]&&(v[0].appName=_.name),_._errorFactory.create(p,...v)}return hr.create(_,...d)}function Ne(_,d,...p){if(!_)throw pi(d,...p)}function gn(_){const d="INTERNAL ASSERTION FAILED: "+_;throw pn(d),new Error(d)}function jn(_,d){_||gn(d)}const ii=new Map;function tt(_){jn(_ instanceof Function,"Expected a class definition");let d=ii.get(_);return d?(jn(d instanceof _,"Instance stored in cache mismatched with class"),d):(d=new _,ii.set(_,d),d)}function $n(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function ht(){return"http:"===dt()||"https:"===dt()}function dt(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Hn{constructor(d,p){this.shortDelay=d,this.longDelay=p,jn(p>d,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ht()||(0,L.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Kt(_,d){jn(_.emulator,"Emulator should always be set here");const{url:p}=_.emulator;return d?`${p}${d.startsWith("/")?d.slice(1):d}`:p}class He{static initialize(d,p,v){this.fetchImpl=d,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void gn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void gn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void gn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ut={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},oa=new Hn(3e4,6e4);function sn(_,d){return _.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:_.tenantId}):d}function Zt(_,d,p,v){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,g.Z)(function*(_,d,p,v,T={}){return on(_,T,(0,g.Z)(function*(){let x={},z={};v&&("GET"===d?z=v:x={body:JSON.stringify(v)});const pe=(0,L.xO)(Object.assign({key:_.config.apiKey},z)).slice(1),Ze=yield _._getAdditionalHeaders();return Ze["Content-Type"]="application/json",_.languageCode&&(Ze["X-Firebase-Locale"]=_.languageCode),He.fetch()(H(_,_.config.apiHost,p,pe),Object.assign({method:d,headers:Ze,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function on(_,d,p){return bs.apply(this,arguments)}function bs(){return(bs=(0,g.Z)(function*(_,d,p){_._canInitEmulator=!1;const v=Object.assign(Object.assign({},ut),d);try{const T=new Ee(_),x=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const z=yield x.json();if("needConfirmation"in z)throw X(_,"account-exists-with-different-credential",z);if(x.ok&&!("errorMessage"in z))return z;{const pe=x.ok?z.errorMessage:z.error.message,[Ze,Fe]=pe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ze)throw X(_,"credential-already-in-use",z);if("EMAIL_EXISTS"===Ze)throw X(_,"email-already-in-use",z);const pt=v[Ze]||Ze.toLowerCase().replace(/[_\s]+/g,"-");if(Fe)throw es(_,pt,Fe);Dn(_,pt)}}catch(T){if(T instanceof L.ZR)throw T;Dn(_,"network-request-failed")}})).apply(this,arguments)}function B(_,d,p,v){return V.apply(this,arguments)}function V(){return(V=(0,g.Z)(function*(_,d,p,v,T={}){const x=yield Zt(_,d,p,v,T);return"mfaPendingCredential"in x&&Dn(_,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function H(_,d,p,v){const T=`${d}${p}?${v}`;return _.config.emulator?Kt(_.config,T):`${_.config.apiScheme}://${T}`}class Ee{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(Wt(this.auth,"timeout")),oa.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function X(_,d,p){const v={appName:_.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const T=Wt(_,d,v);return T.customData._tokenResponse=p,T}function st(){return(st=(0,g.Z)(function*(_,d){return Zt(_,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Xt(_,d){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,g.Z)(function*(_,d){return Zt(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function On(_,d){return rr.apply(this,arguments)}function rr(){return(rr=(0,g.Z)(function*(_,d){return Zt(_,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function J(_){if(_)try{const d=new Date(Number(_));if(!isNaN(d.getTime()))return d.toUTCString()}catch(d){}}function De(){return(De=(0,g.Z)(function*(_,d=!1){const p=(0,L.m9)(_),v=yield p.getIdToken(d),T=mt(v);Ne(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const x="object"==typeof T.firebase?T.firebase:void 0,z=null==x?void 0:x.sign_in_provider;return{claims:T,token:v,authTime:J($e(T.auth_time)),issuedAtTime:J($e(T.iat)),expirationTime:J($e(T.exp)),signInProvider:z||null,signInSecondFactor:(null==x?void 0:x.sign_in_second_factor)||null}})).apply(this,arguments)}function $e(_){return 1e3*Number(_)}function mt(_){const[d,p,v]=_.split(".");if(void 0===d||void 0===p||void 0===v)return pn("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,L.tV)(p);return T?JSON.parse(T):(pn("Failed to decode base64 JWT payload"),null)}catch(T){return pn("Caught error parsing JWT payload as JSON",T),null}}function Tt(_,d){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,g.Z)(function*(_,d,p=!1){if(p)return d;try{return yield d}catch(v){throw v instanceof L.ZR&&Ln(v)&&_.auth.currentUser===_&&(yield _.auth.signOut()),v}})).apply(this,arguments)}function Ln({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Mn{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var p;if(d){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(d=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(d);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),v)}iteration(){var d=this;return(0,g.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&d.schedule(!0))}d.schedule()})()}}class yt{constructor(d,p){this.createdAt=d,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=J(this.lastLoginAt),this.creationTime=J(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Cn(_){return je.apply(this,arguments)}function je(){return(je=(0,g.Z)(function*(_){var d;const p=_.auth,v=yield _.getIdToken(),T=yield Tt(_,On(p,{idToken:v}));Ne(null==T?void 0:T.users.length,p,"internal-error");const x=T.users[0];_._notifyReloadListener(x);const z=(null===(d=x.providerUserInfo)||void 0===d?void 0:d.length)?gi(x.providerUserInfo):[],pe=Kr(_.providerData,z),pt=!!_.isAnonymous&&!(_.email&&x.passwordHash||(null==pe?void 0:pe.length)),tn={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:pe,metadata:new yt(x.createdAt,x.lastLoginAt),isAnonymous:pt};Object.assign(_,tn)})).apply(this,arguments)}function mn(){return(mn=(0,g.Z)(function*(_){const d=(0,L.m9)(_);yield Cn(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Kr(_,d){return[..._.filter(v=>!d.some(T=>T.providerId===v.providerId)),...d]}function gi(_){return _.map(d=>{var{providerId:p}=d,v=oe(d,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function ts(){return(ts=(0,g.Z)(function*(_,d){const p=yield on(_,{},(0,g.Z)(function*(){const v=(0,L.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:T,apiKey:x}=_.config,z=H(_,T,"/v1/token",`key=${x}`),pe=yield _._getAdditionalHeaders();return pe["Content-Type"]="application/x-www-form-urlencoded",He.fetch()(z,{method:"POST",headers:pe,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class En{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){Ne(d.idToken,"internal-error"),Ne(void 0!==d.idToken,"internal-error"),Ne(void 0!==d.refreshToken,"internal-error");const p="expiresIn"in d&&void 0!==d.expiresIn?Number(d.expiresIn):function(_){const d=mt(_);return Ne(d,"internal-error"),Ne(void 0!==d.exp,"internal-error"),Ne(void 0!==d.iat,"internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,p)}getToken(d,p=!1){var v=this;return(0,g.Z)(function*(){return Ne(!v.accessToken||v.refreshToken,d,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(d,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,p){var v=this;return(0,g.Z)(function*(){const{accessToken:T,refreshToken:x,expiresIn:z}=yield function(_,d){return ts.apply(this,arguments)}(d,p);v.updateTokensAndExpiration(T,x,Number(z))})()}updateTokensAndExpiration(d,p,v){this.refreshToken=p||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(d,p){const{refreshToken:v,accessToken:T,expirationTime:x}=p,z=new En;return v&&(Ne("string"==typeof v,"internal-error",{appName:d}),z.refreshToken=v),T&&(Ne("string"==typeof T,"internal-error",{appName:d}),z.accessToken=T),x&&(Ne("number"==typeof x,"internal-error",{appName:d}),z.expirationTime=x),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new En,this.toJSON())}_performRefresh(){return gn("not implemented")}}function Vr(_,d){Ne("string"==typeof _||void 0===_,"internal-error",{appName:d})}class si{constructor(d){var{uid:p,auth:v,stsTokenManager:T}=d,x=oe(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Mn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.metadata=new yt(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(d){var p=this;return(0,g.Z)(function*(){const v=yield Tt(p,p.stsTokenManager.getToken(p.auth,d));return Ne(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(d){return function(_){return De.apply(this,arguments)}(this,d)}reload(){return function(_){return mn.apply(this,arguments)}(this)}_assign(d){this!==d&&(Ne(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(p=>Object.assign({},p)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new si(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,p=!1){var v=this;return(0,g.Z)(function*(){let T=!1;d.idToken&&d.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(d),T=!0),p&&(yield Cn(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var d=this;return(0,g.Z)(function*(){const p=yield d.getIdToken();return yield Tt(d,function(_,d){return st.apply(this,arguments)}(d.auth,{idToken:p})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,p){var v,T,x,z,pe,Ze,Fe,pt;const tn=null!==(v=p.displayName)&&void 0!==v?v:void 0,dn=null!==(T=p.email)&&void 0!==T?T:void 0,ei=null!==(x=p.phoneNumber)&&void 0!==x?x:void 0,Ai=null!==(z=p.photoURL)&&void 0!==z?z:void 0,zn=null!==(pe=p.tenantId)&&void 0!==pe?pe:void 0,fu=null!==(Ze=p._redirectEventId)&&void 0!==Ze?Ze:void 0,pu=null!==(Fe=p.createdAt)&&void 0!==Fe?Fe:void 0,td=null!==(pt=p.lastLoginAt)&&void 0!==pt?pt:void 0,{uid:yr,emailVerified:gu,isAnonymous:nd,providerData:Th,stsTokenManager:Ep}=p;Ne(yr&&Ep,d,"internal-error");const rd=En.fromJSON(this.name,Ep);Ne("string"==typeof yr,d,"internal-error"),Vr(tn,d.name),Vr(dn,d.name),Ne("boolean"==typeof gu,d,"internal-error"),Ne("boolean"==typeof nd,d,"internal-error"),Vr(ei,d.name),Vr(Ai,d.name),Vr(zn,d.name),Vr(fu,d.name),Vr(pu,d.name),Vr(td,d.name);const Ah=new si({uid:yr,auth:d,email:dn,emailVerified:gu,displayName:tn,isAnonymous:nd,photoURL:Ai,phoneNumber:ei,tenantId:zn,stsTokenManager:rd,createdAt:pu,lastLoginAt:td});return Th&&Array.isArray(Th)&&(Ah.providerData=Th.map(Sh=>Object.assign({},Sh))),fu&&(Ah._redirectEventId=fu),Ah}static _fromIdTokenResponse(d,p,v=!1){return(0,g.Z)(function*(){const T=new En;T.updateFromServerResponse(p);const x=new si({uid:p.localId,auth:d,stsTokenManager:T,isAnonymous:v});return yield Cn(x),x})()}}const Qs=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,v){var T=this;return(0,g.Z)(function*(){T.storage[p]=v})()}_get(p){var v=this;return(0,g.Z)(function*(){const T=v.storage[p];return void 0===T?null:T})()}_remove(p){var v=this;return(0,g.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return _.type="NONE",_})();function oi(_,d,p){return`firebase:${_}:${d}:${p}`}class ai{constructor(d,p,v){this.persistence=d,this.auth=p,this.userKey=v;const{config:T,name:x}=this.auth;this.fullUserKey=oi(this.userKey,T.apiKey,x),this.fullPersistenceKey=oi("persistence",T.apiKey,x),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,g.Z)(function*(){const p=yield d.persistence._get(d.fullUserKey);return p?si._fromJSON(d.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var p=this;return(0,g.Z)(function*(){if(p.persistence===d)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=d,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,p,v="authUser"){return(0,g.Z)(function*(){if(!p.length)return new ai(tt(Qs),d,v);const T=(yield Promise.all(p.map(function(){var Fe=(0,g.Z)(function*(pt){if(yield pt._isAvailable())return pt});return function(pt){return Fe.apply(this,arguments)}}()))).filter(Fe=>Fe);let x=T[0]||tt(Qs);const z=oi(v,d.config.apiKey,d.name);let pe=null;for(const Fe of p)try{const pt=yield Fe._get(z);if(pt){const tn=si._fromJSON(d,pt);Fe!==x&&(pe=tn),x=Fe;break}}catch(pt){}const Ze=T.filter(Fe=>Fe._shouldAllowMigration);return x._shouldAllowMigration&&Ze.length?(x=Ze[0],pe&&(yield x._set(z,pe.toJSON())),yield Promise.all(p.map(function(){var Fe=(0,g.Z)(function*(pt){if(pt!==x)try{yield pt._remove(z)}catch(tn){}});return function(pt){return Fe.apply(this,arguments)}}())),new ai(x,d,v)):new ai(x,d,v)})()}}function Ts(_){const d=_.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(Zr(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(an(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(bc(d))return"Blackberry";if(aa(d))return"Webos";if(Io(d))return"Safari";if((d.includes("chrome/")||Js(d))&&!d.includes("edge/"))return"Chrome";if(en(d))return"Android";{const v=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function an(_=(0,L.z$)()){return/firefox\//i.test(_)}function Io(_=(0,L.z$)()){const d=_.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Js(_=(0,L.z$)()){return/crios\//i.test(_)}function Zr(_=(0,L.z$)()){return/iemobile/i.test(_)}function en(_=(0,L.z$)()){return/android/i.test(_)}function bc(_=(0,L.z$)()){return/blackberry/i.test(_)}function aa(_=(0,L.z$)()){return/webos/i.test(_)}function As(_=(0,L.z$)()){return/iphone|ipad|ipod/i.test(_)}function Zu(_=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}function ns(_=(0,L.z$)()){return As(_)||en(_)||aa(_)||bc(_)||/windows phone/i.test(_)||Zr(_)}function Yu(_,d=[]){let p;switch(_){case"Browser":p=Ts((0,L.z$)());break;case"Worker":p=`${Ts((0,L.z$)())}-${_}`;break;default:p=_}const v=d.length?d.join(","):"FirebaseCore-web";return`${p}/JsCore/${R.SDK_VERSION}/${v}`}class rs{constructor(d,p){this.app=d,this.config=p,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tc(this),this.idTokenSubscription=new Tc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=p.sdkClientVersion}_initializeWithPersistence(d,p){var v=this;return p&&(this._popupRedirectResolver=tt(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var T,x;if(!v._deleted&&(v.persistenceManager=yield ai.create(v,d),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(z){}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(x=v.currentUser)||void 0===x?void 0:x.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,g.Z)(function*(){if(d._deleted)return;const p=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||p){if(d.currentUser&&p&&d.currentUser.uid===p.uid)return d._currentUser._assign(p),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(p)}})()}initializeCurrentUser(d){var p=this;return(0,g.Z)(function*(){var v;let T=yield p.assertedPersistence.getCurrentUser();if(d&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const x=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,z=null==T?void 0:T._redirectEventId,pe=yield p.tryRedirectSignIn(d);(!x||x===z)&&(null==pe?void 0:pe.user)&&(T=pe.user)}return T?T._redirectEventId?(Ne(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===T._redirectEventId?p.directlySetCurrentUser(T):p.reloadAndSetCurrentUserOrClear(T)):p.reloadAndSetCurrentUserOrClear(T):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(d){var p=this;return(0,g.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,d,!0)}catch(T){yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(d){var p=this;return(0,g.Z)(function*(){try{yield Cn(d)}catch(v){if("auth/network-request-failed"!==v.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var d=this;return(0,g.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var p=this;return(0,g.Z)(function*(){const v=d?(0,L.m9)(d):null;return v&&Ne(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(d){var p=this;return(0,g.Z)(function*(){if(!p._deleted)return d&&Ne(p.tenantId===d.tenantId,p,"tenant-id-mismatch"),p.queue((0,g.Z)(function*(){yield p.directlySetCurrentUser(d),p.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,g.Z)(function*(){return(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null)})()}setPersistence(d){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(tt(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new L.LL("auth","Firebase",d())}onAuthStateChanged(d,p,v){return this.registerStateListener(this.authStateSubscription,d,p,v)}onIdTokenChanged(d,p,v){return this.registerStateListener(this.idTokenSubscription,d,p,v)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,p){var v=this;return(0,g.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(p);return null===d?T.removeCurrentUser():T.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const v=d&&tt(d)||p._popupRedirectResolver;Ne(v,p,"argument-error"),p.redirectPersistenceManager=yield ai.create(p,[tt(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(d){var p=this;return(0,g.Z)(function*(){var v,T;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===d?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===d?p.redirectUser:null})()}_persistUserIfCurrent(d){var p=this;return(0,g.Z)(function*(){if(d===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,p,v,T){if(this._deleted)return()=>{};const x="function"==typeof p?p:p.next.bind(p),z=this._isInitialized?Promise.resolve():this._initializationPromise;return Ne(z,this,"internal-error"),z.then(()=>x(this.currentUser)),"function"==typeof p?d.addObserver(p,v,T):d.addObserver(p)}directlySetCurrentUser(d){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==d&&(p._currentUser._stopProactiveRefresh(),d&&p.isProactiveRefreshEnabled&&d._startProactiveRefresh()),p.currentUser=d,d?yield p.assertedPersistence.setCurrentUser(d):yield p.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Yu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,g.Z)(function*(){const p={"X-Client-Version":d.clientVersion};return d.app.options.appId&&(p["X-Firebase-gmpid"]=d.app.options.appId),p})()}}function wn(_){return(0,L.m9)(_)}class Tc{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,L.ne)(p=>this.observer=p)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ms(_,d,p){const v=wn(_);Ne(v._canInitEmulator,v,"emulator-config-failed"),Ne(/^https?:\/\//.test(d),v,"invalid-emulator-scheme");const T=!!(null==p?void 0:p.disableWarnings),x=Ha(d),{host:z,port:pe}=function(_){const d=Ha(_),p=/(\/\/)?([^?#/]+)/.exec(_.substr(d.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const x=T[1];return{host:x,port:Ac(v.substr(x.length+1))}}{const[x,z]=v.split(":");return{host:x,port:Ac(z)}}}(d);v.config.emulator={url:`${x}//${z}${null===pe?"":`:${pe}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:z,port:pe,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function(){function _(){const d=document.createElement("p"),p=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}function Ha(_){const d=_.indexOf(":");return d<0?"":_.substr(0,d+1)}function Ac(_){if(!_)return null;const d=Number(_);return isNaN(d)?null:d}class fr{constructor(d,p){this.providerId=d,this.signInMethod=p}toJSON(){return gn("not implemented")}_getIdTokenResponse(d){return gn("not implemented")}_linkToIdToken(d,p){return gn("not implemented")}_getReauthenticationResolver(d){return gn("not implemented")}}function Sc(_,d){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,g.Z)(function*(_,d){return Zt(_,"POST","/v1/accounts:resetPassword",sn(_,d))})).apply(this,arguments)}function nh(_,d){return xc.apply(this,arguments)}function xc(){return(xc=(0,g.Z)(function*(_,d){return Zt(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Yf(_,d){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,g.Z)(function*(_,d){return Zt(_,"POST","/v1/accounts:update",sn(_,d))})).apply(this,arguments)}function xs(){return(xs=(0,g.Z)(function*(_,d){return B(_,"POST","/v1/accounts:signInWithPassword",sn(_,d))})).apply(this,arguments)}function Ju(_,d){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,g.Z)(function*(_,d){return Zt(_,"POST","/v1/accounts:sendOobCode",sn(_,d))})).apply(this,arguments)}function Qf(_,d){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,g.Z)(function*(_,d){return Ju(_,d)})).apply(this,arguments)}function Jf(_,d){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,g.Z)(function*(_,d){return Ju(_,d)})).apply(this,arguments)}function wm(_,d){return Do.apply(this,arguments)}function Do(){return(Do=(0,g.Z)(function*(_,d){return Ju(_,d)})).apply(this,arguments)}function Xu(_,d){return ua.apply(this,arguments)}function ua(){return(ua=(0,g.Z)(function*(_,d){return Ju(_,d)})).apply(this,arguments)}function kc(){return(kc=(0,g.Z)(function*(_,d){return B(_,"POST","/v1/accounts:signInWithEmailLink",sn(_,d))})).apply(this,arguments)}function la(){return(la=(0,g.Z)(function*(_,d){return B(_,"POST","/v1/accounts:signInWithEmailLink",sn(_,d))})).apply(this,arguments)}class Fi extends fr{constructor(d,p,v,T=null){super("password",v),this._email=d,this._password=p,this._tenantId=T}static _fromEmailAndPassword(d,p){return new Fi(d,p,"password")}static _fromEmailAndCode(d,p,v=null){return new Fi(d,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(d){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function(_,d){return xs.apply(this,arguments)}(d,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function(_,d){return kc.apply(this,arguments)}(d,{email:p._email,oobCode:p._password});default:Dn(d,"internal-error")}})()}_linkToIdToken(d,p){var v=this;return(0,g.Z)(function*(){switch(v.signInMethod){case"password":return nh(d,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function(_,d){return la.apply(this,arguments)}(d,{idToken:p,email:v._email,oobCode:v._password});default:Dn(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Li(_,d){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,g.Z)(function*(_,d){return B(_,"POST","/v1/accounts:signInWithIdp",sn(_,d))})).apply(this,arguments)}class yi extends fr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const p=new yi(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(p.idToken=d.idToken),d.accessToken&&(p.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(p.nonce=d.nonce),d.pendingToken&&(p.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(p.accessToken=d.oauthToken,p.secret=d.oauthTokenSecret):Dn("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:v,signInMethod:T}=p,x=oe(p,["providerId","signInMethod"]);if(!v||!T)return null;const z=new yi(v,T);return z.idToken=x.idToken||void 0,z.accessToken=x.accessToken||void 0,z.secret=x.secret,z.nonce=x.nonce,z.pendingToken=x.pendingToken||null,z}_getIdTokenResponse(d){return Li(d,this.buildRequest())}_linkToIdToken(d,p){const v=this.buildRequest();return v.idToken=p,Li(d,v)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,Li(d,p)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),d.postBody=(0,L.xO)(p)}return d}}function Xs(_,d){return _i.apply(this,arguments)}function _i(){return(_i=(0,g.Z)(function*(_,d){return Zt(_,"POST","/v1/accounts:sendVerificationCode",sn(_,d))})).apply(this,arguments)}function Ga(){return(Ga=(0,g.Z)(function*(_,d){return B(_,"POST","/v1/accounts:signInWithPhoneNumber",sn(_,d))})).apply(this,arguments)}function qa(){return(qa=(0,g.Z)(function*(_,d){const p=yield B(_,"POST","/v1/accounts:signInWithPhoneNumber",sn(_,d));if(p.temporaryProof)throw X(_,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const ih={USER_NOT_FOUND:"user-not-found"};function tl(){return(tl=(0,g.Z)(function*(_,d){return B(_,"POST","/v1/accounts:signInWithPhoneNumber",sn(_,Object.assign(Object.assign({},d),{operation:"REAUTH"})),ih)})).apply(this,arguments)}class is extends fr{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,p){return new is({verificationId:d,verificationCode:p})}static _fromTokenResponse(d,p){return new is({phoneNumber:d,temporaryProof:p})}_getIdTokenResponse(d){return function(_,d){return Ga.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,p){return function(_,d){return qa.apply(this,arguments)}(d,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function(_,d){return tl.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:p,verificationId:v,verificationCode:T}=this.params;return d&&p?{temporaryProof:d,phoneNumber:p}:{sessionInfo:v,code:T}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:x}=d;return v||p||T||x?new is({verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:x}):null}}class eo{constructor(d){var p,v,T,x,z,pe;const Ze=(0,L.zd)((0,L.pd)(d)),Fe=null!==(p=Ze.apiKey)&&void 0!==p?p:null,pt=null!==(v=Ze.oobCode)&&void 0!==v?v:null,tn=function(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ze.mode)&&void 0!==T?T:null);Ne(Fe&&pt&&tn,"argument-error"),this.apiKey=Fe,this.operation=tn,this.code=pt,this.continueUrl=null!==(x=Ze.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(z=Ze.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(pe=Ze.tenantId)&&void 0!==pe?pe:null}static parseLink(d){const p=function(_){const d=(0,L.zd)((0,L.pd)(_)).link,p=d?(0,L.zd)((0,L.pd)(d)).deep_link_id:null,v=(0,L.zd)((0,L.pd)(_)).deep_link_id;return(v?(0,L.zd)((0,L.pd)(v)).link:null)||v||p||d||_}(d);try{return new eo(p)}catch(v){return null}}}let xn=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(p,v){return Fi._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const T=eo.parseLink(v);return Ne(T,"argument-error"),Fi._fromEmailAndCode(p,T.code,T.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Qr{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class vi extends Qr{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Vi extends vi{static credentialFromJSON(d){const p="string"==typeof d?JSON.parse(d):d;return Ne("providerId"in p&&"signInMethod"in p,"argument-error"),yi._fromParams(p)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return Ne(d.idToken||d.accessToken,"argument-error"),yi._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Vi.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Vi.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:x,nonce:z,providerId:pe}=d;if(!v&&!T&&!p&&!x||!pe)return null;try{return new Vi(pe)._credential({idToken:p,accessToken:v,nonce:z,pendingToken:x})}catch(Ze){return null}}}let br=(()=>{class _ extends vi{constructor(){super("facebook.com")}static credential(p){return yi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch(v){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),nl=(()=>{class _ extends vi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return yi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:T}=p;if(!v&&!T)return null;try{return _.credential(v,T)}catch(x){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Co=(()=>{class _ extends vi{constructor(){super("github.com")}static credential(p){return yi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch(v){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Ut extends fr{constructor(d,p){super(d,d),this.pendingToken=p}_getIdTokenResponse(d){return Li(d,this.buildRequest())}_linkToIdToken(d,p){const v=this.buildRequest();return v.idToken=p,Li(d,v)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,Li(d,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:v,signInMethod:T,pendingToken:x}=p;return v&&T&&x&&v===T?new Ut(v,x):null}static _create(d,p){return new Ut(d,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ns extends Qr{constructor(d){Ne(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Ns.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Ns.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const p=Ut.fromJSON(d);return Ne(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:p,providerId:v}=d;if(!p||!v)return null;try{return Ut._create(v,p)}catch(T){return null}}}let Ka=(()=>{class _ extends vi{constructor(){super("twitter.com")}static credential(p,v){return yi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=p;if(!v||!T)return null;try{return _.credential(v,T)}catch(x){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Ur(_,d){return To.apply(this,arguments)}function To(){return(To=(0,g.Z)(function*(_,d){return B(_,"POST","/v1/accounts:signUp",sn(_,d))})).apply(this,arguments)}class ir{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,p,v,T=!1){return(0,g.Z)(function*(){const x=yield si._fromIdTokenResponse(d,v,T),z=ft(v);return new ir({user:x,providerId:z,_tokenResponse:v,operationType:p})})()}static _forOperation(d,p,v){return(0,g.Z)(function*(){yield d._updateTokensIfNecessary(v,!0);const T=ft(v);return new ir({user:d,providerId:T,_tokenResponse:v,operationType:p})})()}}function ft(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function rl(_){return to.apply(this,arguments)}function to(){return(to=(0,g.Z)(function*(_){var d;const p=wn(_);if(yield p._initializationPromise,null===(d=p.currentUser)||void 0===d?void 0:d.isAnonymous)return new ir({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield Ur(p,{returnSecureToken:!0}),T=yield ir._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class no extends L.ZR{constructor(d,p,v,T){var x;super(p.code,p.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,no.prototype),this.customData={appName:d.name,tenantId:null!==(x=d.tenantId)&&void 0!==x?x:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(d,p,v,T){return new no(d,p,v,T)}}function il(_,d,p,v){return("reauthenticate"===d?p._getReauthenticationResolver(_):p._getIdTokenResponse(_)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?no._fromErrorAndOperation(_,x,d,v):x})}function Za(_){return new Set(_.map(({providerId:d})=>d).filter(d=>!!d))}function sl(_,d){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,g.Z)(function*(_,d){const p=(0,L.m9)(_);yield Ui(!0,p,d);const{providerUserInfo:v}=yield Xt(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[d]}),T=Za(v||[]);return p.providerData=p.providerData.filter(x=>T.has(x.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Ae(_,d){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,g.Z)(function*(_,d,p=!1){const v=yield Tt(_,d._linkToIdToken(_.auth,yield _.getIdToken()),p);return ir._forOperation(_,"link",v)})).apply(this,arguments)}function Ui(_,d,p){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,g.Z)(function*(_,d,p){yield Cn(d);const T=!1===_?"provider-already-linked":"no-such-provider";Ne(Za(d.providerData).has(p)===_,d.auth,T)})).apply(this,arguments)}function Qa(_,d){return ss.apply(this,arguments)}function ss(){return(ss=(0,g.Z)(function*(_,d,p=!1){const{auth:v}=_,T="reauthenticate";try{const x=yield Tt(_,il(v,T,d,_),p);Ne(x.idToken,v,"internal-error");const z=mt(x.idToken);Ne(z,v,"internal-error");const{sub:pe}=z;return Ne(_.uid===pe,v,"user-mismatch"),ir._forOperation(_,T,x)}catch(x){throw"auth/user-not-found"===(null==x?void 0:x.code)&&Dn(v,"user-mismatch"),x}})).apply(this,arguments)}function Tr(_,d){return ca.apply(this,arguments)}function ca(){return(ca=(0,g.Z)(function*(_,d,p=!1){const v="signIn",T=yield il(_,v,d),x=yield ir._fromIdTokenResponse(_,v,T);return p||(yield _._updateCurrentUser(x.user)),x})).apply(this,arguments)}function Os(_,d){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,g.Z)(function*(_,d){return Tr(wn(_),d)})).apply(this,arguments)}function Uc(_,d){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,g.Z)(function*(_,d){const p=(0,L.m9)(_);return yield Ui(!1,p,d.providerId),Ae(p,d)})).apply(this,arguments)}function So(_,d){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,g.Z)(function*(_,d){return Qa((0,L.m9)(_),d)})).apply(this,arguments)}function os(_,d){return ro.apply(this,arguments)}function ro(){return(ro=(0,g.Z)(function*(_,d){return B(_,"POST","/v1/accounts:signInWithCustomToken",sn(_,d))})).apply(this,arguments)}function Mo(_,d){return ui.apply(this,arguments)}function ui(){return(ui=(0,g.Z)(function*(_,d){const p=wn(_),v=yield os(p,{token:d,returnSecureToken:!0}),T=yield ir._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class xo{constructor(d,p){this.factorId=d,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(d,p){return"phoneInfo"in p?Ja._fromServerResponse(d,p):Dn(d,"internal-error")}}class Ja extends xo{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,p){return new Ja(p)}}function Ro(_,d,p){var v;Ne((null===(v=p.url)||void 0===v?void 0:v.length)>0,_,"invalid-continue-uri"),Ne(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),d.continueUrl=p.url,d.dynamicLinkDomain=p.dynamicLinkDomain,d.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(Ne(p.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),d.iOSBundleId=p.iOS.bundleId),p.android&&(Ne(p.android.packageName.length>0,_,"missing-android-pkg-name"),d.androidInstallApp=p.android.installApp,d.androidMinimumVersionCode=p.android.minimumVersion,d.androidPackageName=p.android.packageName)}function oh(_,d,p){return io.apply(this,arguments)}function io(){return(io=(0,g.Z)(function*(_,d,p){const v=(0,L.m9)(_),T={requestType:"PASSWORD_RESET",email:d};p&&Ro(v,T,p),yield Jf(v,T)})).apply(this,arguments)}function Xa(_,d,p){return No.apply(this,arguments)}function No(){return(No=(0,g.Z)(function*(_,d,p){yield Sc((0,L.m9)(_),{oobCode:d,newPassword:p})})).apply(this,arguments)}function ol(_,d){return eu.apply(this,arguments)}function eu(){return(eu=(0,g.Z)(function*(_,d){yield Yf((0,L.m9)(_),{oobCode:d})})).apply(this,arguments)}function al(_,d){return da.apply(this,arguments)}function da(){return(da=(0,g.Z)(function*(_,d){const p=(0,L.m9)(_),v=yield Sc(p,{oobCode:d}),T=v.requestType;switch(Ne(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ne(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ne(v.mfaInfo,p,"internal-error");default:Ne(v.email,p,"internal-error")}let x=null;return v.mfaInfo&&(x=xo._fromServerResponse(wn(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:x},operation:T}})).apply(this,arguments)}function ul(_,d){return ha.apply(this,arguments)}function ha(){return(ha=(0,g.Z)(function*(_,d){const{data:p}=yield al((0,L.m9)(_),d);return p.email})).apply(this,arguments)}function ll(_,d,p){return tu.apply(this,arguments)}function tu(){return(tu=(0,g.Z)(function*(_,d,p){const v=wn(_),T=yield Ur(v,{returnSecureToken:!0,email:d,password:p}),x=yield ir._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(x.user),x})).apply(this,arguments)}function cl(_,d,p){return Os((0,L.m9)(_),xn.credential(d,p))}function ep(_,d,p){return fa.apply(this,arguments)}function fa(){return(fa=(0,g.Z)(function*(_,d,p){const v=(0,L.m9)(_),T={requestType:"EMAIL_SIGNIN",email:d};Ne(p.handleCodeInApp,v,"argument-error"),p&&Ro(v,T,p),yield wm(v,T)})).apply(this,arguments)}function bn(_,d){const p=eo.parseLink(d);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}function Ps(_,d,p){return yn.apply(this,arguments)}function yn(){return(yn=(0,g.Z)(function*(_,d,p){const v=(0,L.m9)(_),T=xn.credentialWithLink(d,p||$n());return Ne(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Os(v,T)})).apply(this,arguments)}function dl(_,d){return hl.apply(this,arguments)}function hl(){return(hl=(0,g.Z)(function*(_,d){return Zt(_,"POST","/v1/accounts:createAuthUri",sn(_,d))})).apply(this,arguments)}function Im(_,d){return nu.apply(this,arguments)}function nu(){return(nu=(0,g.Z)(function*(_,d){const v={identifier:d,continueUri:ht()?$n():"http://localhost"},{signinMethods:T}=yield dl((0,L.m9)(_),v);return T||[]})).apply(this,arguments)}function Dm(_,d){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,g.Z)(function*(_,d){const p=(0,L.m9)(_),T={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};d&&Ro(p.auth,T,d);const{email:x}=yield Qf(p.auth,T);x!==_.email&&(yield _.reload())})).apply(this,arguments)}function Oo(_,d,p){return Po.apply(this,arguments)}function Po(){return(Po=(0,g.Z)(function*(_,d,p){const v=(0,L.m9)(_),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:d};p&&Ro(v.auth,x,p);const{email:z}=yield Xu(v.auth,x);z!==_.email&&(yield _.reload())})).apply(this,arguments)}function fl(_,d){return ru.apply(this,arguments)}function ru(){return(ru=(0,g.Z)(function*(_,d){return Zt(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function ah(_,d){return iu.apply(this,arguments)}function iu(){return(iu=(0,g.Z)(function*(_,{displayName:d,photoURL:p}){if(void 0===d&&void 0===p)return;const v=(0,L.m9)(_),x={idToken:yield v.getIdToken(),displayName:d,photoUrl:p,returnSecureToken:!0},z=yield Tt(v,fl(v.auth,x));v.displayName=z.displayName||null,v.photoURL=z.photoUrl||null;const pe=v.providerData.find(({providerId:Ze})=>"password"===Ze);pe&&(pe.displayName=v.displayName,pe.photoURL=v.photoURL),yield v._updateTokensIfNecessary(z)})).apply(this,arguments)}function Nn(_,d){return uh((0,L.m9)(_),d,null)}function pa(_,d){return uh((0,L.m9)(_),null,d)}function uh(_,d,p){return jc.apply(this,arguments)}function jc(){return(jc=(0,g.Z)(function*(_,d,p){const{auth:v}=_,x={idToken:yield _.getIdToken(),returnSecureToken:!0};d&&(x.email=d),p&&(x.password=p);const z=yield Tt(_,nh(v,x));yield _._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class as{constructor(d,p,v={}){this.isNewUser=d,this.providerId=p,this.profile=v}}class lh extends as{constructor(d,p,v,T){super(d,p,v),this.username=T}}class $c extends as{constructor(d,p){super(d,"facebook.com",p)}}class tp extends lh{constructor(d,p){super(d,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class Cm extends as{constructor(d,p){super(d,"google.com",p)}}class In extends lh{constructor(d,p,v){super(d,"twitter.com",p,v)}}function so(_){const{user:d,_tokenResponse:p}=_;return d.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function(_){var d,p;if(!_)return null;const{providerId:v}=_,T=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},x=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!v&&(null==_?void 0:_.idToken)){const z=null===(p=null===(d=mt(_.idToken))||void 0===d?void 0:d.firebase)||void 0===p?void 0:p.sign_in_provider;if(z)return new as(x,"anonymous"!==z&&"custom"!==z?z:null)}if(!v)return null;switch(v){case"facebook.com":return new $c(x,T);case"github.com":return new tp(x,T);case"google.com":return new Cm(x,T);case"twitter.com":return new In(x,T,_.screenName||null);case"custom":case"anonymous":return new as(x,null);default:return new as(x,v,T)}}(p)}class wi{constructor(d,p){this.type=d,this.credential=p}static _fromIdtoken(d){return new wi("enroll",d)}static _fromMfaPendingCredential(d){return new wi("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var p,v;if(null==d?void 0:d.multiFactorSession){if(null===(p=d.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return wi._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null===(v=d.multiFactorSession)||void 0===v?void 0:v.idToken)return wi._fromIdtoken(d.multiFactorSession.idToken)}return null}}class ou{constructor(d,p,v){this.session=d,this.hints=p,this.signInResolver=v}static _fromError(d,p){const v=wn(d),T=p.customData._serverResponse,x=(T.mfaInfo||[]).map(pe=>xo._fromServerResponse(v,pe));Ne(T.mfaPendingCredential,v,"internal-error");const z=wi._fromMfaPendingCredential(T.mfaPendingCredential);return new ou(z,x,function(){var pe=(0,g.Z)(function*(Ze){const Fe=yield Ze._process(v,z);delete T.mfaInfo,delete T.mfaPendingCredential;const pt=Object.assign(Object.assign({},T),{idToken:Fe.idToken,refreshToken:Fe.refreshToken});switch(p.operationType){case"signIn":const tn=yield ir._fromIdTokenResponse(v,p.operationType,pt);return yield v._updateCurrentUser(tn.user),tn;case"reauthenticate":return Ne(p.user,v,"internal-error"),ir._forOperation(p.user,p.operationType,pt);default:Dn(v,"internal-error")}});return function(Ze){return pe.apply(this,arguments)}}())}resolveSignIn(d){var p=this;return(0,g.Z)(function*(){return p.signInResolver(d)})()}}function ao(_,d){var p;const v=(0,L.m9)(_),T=d;return Ne(d.customData.operationType,v,"argument-error"),Ne(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),ou._fromError(v,T)}function bt(_,d){return Zt(_,"POST","/v2/accounts/mfaEnrollment:start",sn(_,d))}class ks{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>xo._fromServerResponse(d.auth,v)))})}static _fromUser(d){return new ks(d)}getSession(){var d=this;return(0,g.Z)(function*(){return wi._fromIdtoken(yield d.user.getIdToken())})()}enroll(d,p){var v=this;return(0,g.Z)(function*(){const T=d,x=yield v.getSession(),z=yield Tt(v.user,T._process(v.user.auth,x,p));return yield v.user._updateTokensIfNecessary(z),v.user.reload()})()}unenroll(d){var p=this;return(0,g.Z)(function*(){const v="string"==typeof d?d:d.uid,T=yield p.user.getIdToken(),x=yield Tt(p.user,function(_,d){return Zt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",sn(_,d))}(p.user.auth,{idToken:T,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:z})=>z!==v),yield p.user._updateTokensIfNecessary(x);try{yield p.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const Fo=new WeakMap;function er(_){const d=(0,L.m9)(_);return Fo.has(d)||Fo.set(d,ks._fromUser(d)),Fo.get(d)}const uo="__sak";class lo{constructor(d,p){this.storageRetriever=d,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(uo,"1"),this.storage.removeItem(uo),Promise.resolve(!0)):Promise.resolve(!1)}catch(d){return Promise.resolve(!1)}}_set(d,p){return this.storage.setItem(d,JSON.stringify(p)),Promise.resolve()}_get(d){const p=this.storage.getItem(d);return Promise.resolve(p?JSON.parse(p):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const us=(()=>{class _ extends lo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const _=(0,L.z$)();return Io(_)||As(_)}()&&function(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=ns(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),x=this.localCache[v];T!==x&&p(v,x,T)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((pe,Ze,Fe)=>{this.notifyListeners(pe,Fe)});const T=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const pe=this.storage.getItem(T);if(p.newValue!==pe)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!v)return}const x=()=>{const pe=this.storage.getItem(T);!v&&this.localCache[T]===pe||this.notifyListeners(T,pe)},z=this.storage.getItem(T);(0,L.w1)()&&10===document.documentMode&&z!==p.newValue&&p.newValue!==p.oldValue?setTimeout(x,10):x()}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const x of Array.from(T))x(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var T=()=>super._set,x=this;return(0,g.Z)(function*(){yield T().call(x,p,v),x.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,T=this;return(0,g.Z)(function*(){const x=yield v().call(T,p);return T.localCache[p]=JSON.stringify(x),x})()}_remove(p){var v=()=>super._remove,T=this;return(0,g.Z)(function*(){yield v().call(T,p),delete T.localCache[p]})()}}return _.type="LOCAL",_})(),Lo=(()=>{class _ extends lo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return _.type="SESSION",_})();let Fs=(()=>{class _{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(x=>x.isListeningto(p));if(v)return v;const T=new _(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,g.Z)(function*(){const T=p,{eventId:x,eventType:z,data:pe}=T.data,Ze=v.handlersMap[z];if(!(null==Ze?void 0:Ze.size))return;T.ports[0].postMessage({status:"ack",eventId:x,eventType:z});const Fe=Array.from(Ze).map(function(){var tn=(0,g.Z)(function*(dn){return dn(T.origin,pe)});return function(dn){return tn.apply(this,arguments)}}()),pt=yield function(_){return Promise.all(_.map(function(){var d=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return d.apply(this,arguments)}}()))}(Fe);T.ports[0].postMessage({status:"done",eventId:x,eventType:z,response:pt})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function ls(_="",d=10){let p="";for(let v=0;v<d;v++)p+=Math.floor(10*Math.random());return _+p}class gl{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,p,v=50){var T=this;return(0,g.Z)(function*(){const x="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let z,pe;return new Promise((Ze,Fe)=>{const pt=ls("",20);x.port1.start();const tn=setTimeout(()=>{Fe(new Error("unsupported_event"))},v);pe={messageChannel:x,onMessage(dn){const ei=dn;if(ei.data.eventId===pt)switch(ei.data.status){case"ack":clearTimeout(tn),z=setTimeout(()=>{Fe(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Ze(ei.data.response);break;default:clearTimeout(tn),clearTimeout(z),Fe(new Error("invalid_response"))}}},T.handlers.add(pe),x.port1.addEventListener("message",pe.onMessage),T.target.postMessage({eventType:d,eventId:pt,data:p},[x.port2])}).finally(()=>{pe&&T.removeMessageHandler(pe)})})()}}function Gt(){return window}function Vo(){return void 0!==Gt().WorkerGlobalScope&&"function"==typeof Gt().importScripts}function cs(){return(cs=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const Ci="firebaseLocalStorageDb",Jr="firebaseLocalStorage",Tn="fbase_key";class au{constructor(d){this.request=d}toPromise(){return new Promise((d,p)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Vs(_,d){return _.transaction([Jr],d?"readwrite":"readonly").objectStore(Jr)}function Uo(){const _=indexedDB.open(Ci,1);return new Promise((d,p)=>{_.addEventListener("error",()=>{p(_.error)}),_.addEventListener("upgradeneeded",()=>{const v=_.result;try{v.createObjectStore(Jr,{keyPath:Tn})}catch(T){p(T)}}),_.addEventListener("success",(0,g.Z)(function*(){const v=_.result;v.objectStoreNames.contains(Jr)?d(v):(v.close(),yield function(){const _=indexedDB.deleteDatabase(Ci);return new au(_).toPromise()}(),d(yield Uo()))}))})}function rp(_,d,p){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,g.Z)(function*(_,d,p){const v=Vs(_,!0).put({[Tn]:d,value:p});return new au(v).toPromise()})).apply(this,arguments)}function ho(){return(ho=(0,g.Z)(function*(_,d){const p=Vs(_,!1).get(d),v=yield new au(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Xr(_,d){const p=Vs(_,!0).delete(d);return new au(p).toPromise()}const Sn=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield Uo()),p.db})()}_withRetries(p){var v=this;return(0,g.Z)(function*(){let T=0;for(;;)try{const x=yield v._openDb();return yield p(x)}catch(x){if(T++>3)throw x;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return Vo()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=Fs._getInstance(Vo()?self:null),p.receiver._subscribe("keyChanged",function(){var v=(0,g.Z)(function*(T,x){return{keyProcessed:(yield p._poll()).includes(x.key)}});return function(T,x){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,g.Z)(function*(T,x){return["keyChanged"]});return function(T,x){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var v,T;if(p.activeServiceWorker=yield function(){return cs.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new gl(p.activeServiceWorker);const x=yield p.sender._send("ping",{},800);!x||(null===(v=x[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=x[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,g.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Uo();return yield rp(p,uo,"1"),yield Xr(p,uo),!0}catch(p){}return!1})()}_withPendingWrite(p){var v=this;return(0,g.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var T=this;return(0,g.Z)(function*(){return T._withPendingWrite((0,g.Z)(function*(){return yield T._withRetries(x=>rp(x,p,v)),T.localCache[p]=v,T.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,g.Z)(function*(){const T=yield v._withRetries(x=>function(_,d){return ho.apply(this,arguments)}(x,p));return v.localCache[p]=T,T})()}_remove(p){var v=this;return(0,g.Z)(function*(){return v._withPendingWrite((0,g.Z)(function*(){return yield v._withRetries(T=>Xr(T,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const v=yield p._withRetries(z=>{const pe=Vs(z,!1).getAll();return new au(pe).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const T=[],x=new Set;for(const{fbase_key:z,value:pe}of v)x.add(z),JSON.stringify(p.localCache[z])!==JSON.stringify(pe)&&(p.notifyListeners(z,pe),T.push(z));for(const z of Object.keys(p.localCache))p.localCache[z]&&!x.has(z)&&(p.notifyListeners(z,null),T.push(z));return T})()}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const x of Array.from(T))x(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function uu(_,d){return Zt(_,"POST","/v2/accounts/mfaSignIn:start",sn(_,d))}function ml(){return(ml=(0,g.Z)(function*(_){return(yield Zt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ti(_){return new Promise((d,p)=>{const v=document.createElement("script");v.setAttribute("src",_),v.onload=d,v.onerror=T=>{const x=Wt("internal-error");x.customData=T,p(x)},v.type="text/javascript",v.charset="UTF-8",function(){var _,d;return null!==(d=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==d?d:document}().appendChild(v)})}function yl(_){return`__${_}${Math.floor(1e6*Math.random())}`}const va=1e12;class Gc{constructor(d){this.auth=d,this.counter=va,this._widgets=new Map}render(d,p){const v=this.counter;return this._widgets.set(v,new _l(d,this.auth.name,p||{})),this.counter++,v}reset(d){var p;const v=d||va;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(d){var p;return(null===(p=this._widgets.get(d||va))||void 0===p?void 0:p.getResponse())||""}execute(d){var p=this;return(0,g.Z)(function*(){var v;return null===(v=p._widgets.get(d||va))||void 0===v||v.execute(),""})()}}class _l{constructor(d,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof d?document.getElementById(d):d;Ne(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(_){const d=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<50;v++)d.push(p.charAt(Math.floor(Math.random()*p.length)));return d.join("")}();const{callback:d,"expired-callback":p}=this.params;if(d)try{d(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ea=yl("rcb"),St=new Hn(3e4,6e4);class ji{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Gt().grecaptcha}load(d,p=""){return Ne((_=p).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_),d,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Gt().grecaptcha):new Promise((v,T)=>{const x=Gt().setTimeout(()=>{T(Wt(d,"network-request-failed"))},St.get());Gt()[Ea]=()=>{Gt().clearTimeout(x),delete Gt()[Ea];const pe=Gt().grecaptcha;if(!pe)return void T(Wt(d,"internal-error"));const Ze=pe.render;pe.render=(Fe,pt)=>{const tn=Ze(Fe,pt);return this.counter++,tn},this.hostLanguage=p,v(pe)},Ti(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Ea,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(x),T(Wt(d,"internal-error"))})});var _}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){return!!Gt().grecaptcha&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class yh{load(d){return(0,g.Z)(function*(){return new Gc(d)})()}clearedOneInstance(){}}const qc="recaptcha",_h={theme:"light",type:"image"};class vh{constructor(d,p=Object.assign({},_h),v){this.parameters=p,this.type=qc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wn(v),this.isInvisible="invisible"===this.parameters.size,Ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof d?document.getElementById(d):d;Ne(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new yh:new ji,this.validateStartingState()}verify(){var d=this;return(0,g.Z)(function*(){d.assertNotDestroyed();const p=yield d.render(),v=d.getAssertedRecaptcha();return v.getResponse(p)||new Promise(x=>{const z=pe=>{!pe||(d.tokenChangeListeners.delete(z),x(pe))};d.tokenChangeListeners.add(z),d.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){Ne(!this.parameters.sitekey,this.auth,"argument-error"),Ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof d)d(p);else if("string"==typeof d){const v=Gt()[d];"function"==typeof v&&v(p)}}}assertNotDestroyed(){Ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,g.Z)(function*(){if(yield d.init(),!d.widgetId){let p=d.container;if(!d.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}d.widgetId=d.getAssertedRecaptcha().render(p,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,g.Z)(function*(){Ne(ht()&&!Vo(),d.auth,"internal-error"),yield function(){let _=null;return new Promise(d=>{"complete"!==document.readyState?(_=()=>d(),window.addEventListener("load",_)):d()}).catch(d=>{throw _&&window.removeEventListener("load",_),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const p=yield function(_){return ml.apply(this,arguments)}(d.auth);Ne(p,d.auth,"internal-error"),d.parameters.sitekey=p})()}getAssertedRecaptcha(){return Ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class wa{constructor(d,p){this.verificationId=d,this.onConfirmation=p}confirm(d){const p=is._fromVerification(this.verificationId,d);return this.onConfirmation(p)}}function zc(_,d,p){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,g.Z)(function*(_,d,p){const v=wn(_),T=yield Da(v,d,(0,L.m9)(p));return new wa(T,x=>Os(v,x))})).apply(this,arguments)}function Us(_,d,p){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,g.Z)(function*(_,d,p){const v=(0,L.m9)(_);yield Ui(!1,v,"phone");const T=yield Da(v.auth,d,(0,L.m9)(p));return new wa(T,x=>Uc(v,x))})).apply(this,arguments)}function xr(_,d,p){return $o.apply(this,arguments)}function $o(){return($o=(0,g.Z)(function*(_,d,p){const v=(0,L.m9)(_),T=yield Da(v.auth,d,(0,L.m9)(p));return new wa(T,x=>So(v,x))})).apply(this,arguments)}function Da(_,d,p){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,g.Z)(function*(_,d,p){var v;const T=yield p.verify();try{let x;if(Ne("string"==typeof T,_,"argument-error"),Ne(p.type===qc,_,"argument-error"),x="string"==typeof d?{phoneNumber:d}:d,"session"in x){const z=x.session;if("phoneNumber"in x)return Ne("enroll"===z.type,_,"internal-error"),(yield bt(_,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{Ne("signin"===z.type,_,"internal-error");const pe=(null===(v=x.multiFactorHint)||void 0===v?void 0:v.uid)||x.multiFactorUid;return Ne(pe,_,"missing-multi-factor-info"),(yield uu(_,{mfaPendingCredential:z.credential,mfaEnrollmentId:pe,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield Xs(_,{phoneNumber:x.phoneNumber,recaptchaToken:T});return z}}finally{p._reset()}})).apply(this,arguments)}function Wc(_,d){return vl.apply(this,arguments)}function vl(){return(vl=(0,g.Z)(function*(_,d){yield Ae((0,L.m9)(_),d)})).apply(this,arguments)}let Eh=(()=>{class _{constructor(p){this.providerId=_.PROVIDER_ID,this.auth=wn(p)}verifyPhoneNumber(p,v){return Da(this.auth,p,(0,L.m9)(v))}static credential(p,v){return is._fromVerification(p,v)}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:T}=p;return v&&T?is._fromTokenResponse(v,T):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function D(_,d){return d?tt(d):(Ne(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class C extends fr{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Li(d,this._buildIdpRequest())}_linkToIdToken(d,p){return Li(d,this._buildIdpRequest(p))}_getReauthenticationResolver(d){return Li(d,this._buildIdpRequest())}_buildIdpRequest(d){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(p.idToken=d),p}}function M(_){return Tr(_.auth,new C(_),_.bypassAuthState)}function F(_){const{auth:d,user:p}=_;return Ne(p,d,"internal-error"),Qa(p,new C(_),_.bypassAuthState)}function K(_){return W.apply(this,arguments)}function W(){return(W=(0,g.Z)(function*(_){const{auth:d,user:p}=_;return Ne(p,d,"internal-error"),Ae(p,new C(_),_.bypassAuthState)})).apply(this,arguments)}class Se{constructor(d,p,v,T,x=!1){this.auth=d,this.resolver=v,this.user=T,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var d=this;return new Promise(function(){var p=(0,g.Z)(function*(v,T){d.pendingPromise={resolve:v,reject:T};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(x){d.reject(x)}});return function(v,T){return p.apply(this,arguments)}}())}onAuthEvent(d){var p=this;return(0,g.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:x,tenantId:z,error:pe,type:Ze}=d;if(pe)return void p.reject(pe);const Fe={auth:p.auth,requestUri:v,sessionId:T,tenantId:z||void 0,postBody:x||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ze)(Fe))}catch(pt){p.reject(pt)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return M;case"linkViaPopup":case"linkViaRedirect":return K;case"reauthViaPopup":case"reauthViaRedirect":return F;default:Dn(this.auth,"internal-error")}}resolve(d){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const nt=new Hn(2e3,1e4);function ze(_,d,p){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,g.Z)(function*(_,d,p){const v=wn(_);ri(_,d,Qr);const T=D(v,p);return new gr(v,"signInViaPopup",d,T).executeNotNull()})).apply(this,arguments)}function cn(_,d,p){return pr.apply(this,arguments)}function pr(){return(pr=(0,g.Z)(function*(_,d,p){const v=(0,L.m9)(_);ri(v.auth,d,Qr);const T=D(v.auth,p);return new gr(v.auth,"reauthViaPopup",d,T,v).executeNotNull()})).apply(this,arguments)}function ci(_,d,p){return _n.apply(this,arguments)}function _n(){return(_n=(0,g.Z)(function*(_,d,p){const v=(0,L.m9)(_);ri(v.auth,d,Qr);const T=D(v.auth,p);return new gr(v.auth,"linkViaPopup",d,T,v).executeNotNull()})).apply(this,arguments)}let gr=(()=>{class _ extends Se{constructor(p,v,T,x,z){super(p,v,x,z),this.provider=T,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const v=yield p.execute();return Ne(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,g.Z)(function*(){jn(1===p.filter.length,"Popup operations only handle one event");const v=ls();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(Wt(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(Wt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Wt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,nt.get())};p()}}return _.currentPopupAction=null,_})();const mr=new Map;class fo extends Se{constructor(d,p,v=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var d=()=>super.execute,p=this;return(0,g.Z)(function*(){let v=mr.get(p.auth._key());if(!v){try{const x=(yield function(_,d){return fs.apply(this,arguments)}(p.resolver,p.auth))?yield d().call(p):null;v=()=>Promise.resolve(x)}catch(T){v=()=>Promise.reject(T)}mr.set(p.auth._key(),v)}return p.bypassAuthState||mr.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(d){var p=()=>super.onAuthEvent,v=this;return(0,g.Z)(function*(){if("signInViaRedirect"===d.type)return p().call(v,d);if("unknown"!==d.type){if(d.eventId){const T=yield v.auth._redirectUserForId(d.eventId);if(T)return v.user=T,p().call(v,d);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function fs(){return(fs=(0,g.Z)(function*(_,d){const p=Ta(d),v=sp(_);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(p));return yield v._remove(p),T})).apply(this,arguments)}function ba(_,d){return El.apply(this,arguments)}function El(){return(El=(0,g.Z)(function*(_,d){return sp(_)._set(Ta(d),"true")})).apply(this,arguments)}function Tm(){mr.clear()}function sp(_){return tt(_._redirectPersistence)}function Ta(_){return oi("pendingRedirect",_.config.apiKey,_.name)}function Ho(_,d,p){return function(_,d,p){return op.apply(this,arguments)}(_,d,p)}function op(){return(op=(0,g.Z)(function*(_,d,p){const v=wn(_);ri(_,d,Qr);const T=D(v,p);return yield ba(T,v),T._openRedirect(v,d,"signInViaRedirect")})).apply(this,arguments)}function ap(_,d,p){return function(_,d,p){return up.apply(this,arguments)}(_,d,p)}function up(){return(up=(0,g.Z)(function*(_,d,p){const v=(0,L.m9)(_);ri(v.auth,d,Qr);const T=D(v.auth,p);yield ba(T,v.auth);const x=yield cp(v);return T._openRedirect(v.auth,d,"reauthViaRedirect",x)})).apply(this,arguments)}function lp(_,d,p){return function(_,d,p){return wl.apply(this,arguments)}(_,d,p)}function wl(){return(wl=(0,g.Z)(function*(_,d,p){const v=(0,L.m9)(_);ri(v.auth,d,Qr);const T=D(v.auth,p);yield Ui(!1,v,d.providerId),yield ba(T,v.auth);const x=yield cp(v);return T._openRedirect(v.auth,d,"linkViaRedirect",x)})).apply(this,arguments)}function $i(_,d){return js.apply(this,arguments)}function js(){return(js=(0,g.Z)(function*(_,d){return yield wn(_)._initializationPromise,po(_,d,!1)})).apply(this,arguments)}function po(_,d){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,g.Z)(function*(_,d,p=!1){const v=wn(_),T=D(v,d),z=yield new fo(v,T,p).execute();return z&&!p&&(delete z.user._redirectEventId,yield v._persistUserIfCurrent(z.user),yield v._setRedirectUser(null,d)),z})).apply(this,arguments)}function cp(_){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,g.Z)(function*(_){const d=ls(`${_.uid}:::`);return _._redirectEventId=d,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),d})).apply(this,arguments)}class Zc{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(d,v)&&(p=!0,this.sendToConsumer(d,v),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yc(_);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=d,p=!0)),p}sendToConsumer(d,p){var v;if(d.error&&!Yc(d)){const T=(null===(v=d.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(Wt(this.auth,T))}else p.onAuthEvent(d)}isEventForConsumer(d,p){const v=null===p.eventId||!!d.eventId&&d.eventId===p.eventId;return p.filter.includes(d.type)&&v}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(lu(d))}saveEventToCache(d){this.cachedEventUids.add(lu(d)),this.lastProcessedEventTime=Date.now()}}function lu(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(d=>d).join("-")}function Yc({type:_,error:d}){return"unknown"===_&&"auth/no-auth-event"===(null==d?void 0:d.code)}function Jc(_){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,g.Z)(function*(_,d={}){return Zt(_,"GET","/v1/projects",d)})).apply(this,arguments)}const Ih=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mm=/^https?/;function Dh(){return(Dh=(0,g.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:d}=yield Jc(_);for(const p of d)try{if(Go(p))return}catch(v){}Dn(_,"unauthorized-domain")})).apply(this,arguments)}function Go(_){const d=$n(),{protocol:p,hostname:v}=new URL(d);if(_.startsWith("chrome-extension://")){const z=new URL(_);return""===z.hostname&&""===v?"chrome-extension:"===p&&_.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===p&&z.hostname===v}if(!Mm.test(p))return!1;if(Ih.test(_))return v===_;const T=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const bl=new Hn(3e4,6e4);function Tl(){const _=Gt().___jsl;if(null==_?void 0:_.H)for(const d of Object.keys(_.H))if(_.H[d].r=_.H[d].r||[],_.H[d].L=_.H[d].L||[],_.H[d].r=[..._.H[d].L],_.CP)for(let p=0;p<_.CP.length;p++)_.CP[p]=null}let Al=null;function xm(_){return Al=Al||function(_){return new Promise((d,p)=>{var v,T,x;function z(){Tl(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Tl(),p(Wt(_,"network-request-failed"))},timeout:bl.get()})}if(null===(T=null===(v=Gt().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)d(gapi.iframes.getContext());else{if(!(null===(x=Gt().gapi)||void 0===x?void 0:x.load)){const pe=yl("iframefcb");return Gt()[pe]=()=>{gapi.load?z():p(Wt(_,"network-request-failed"))},Ti(`https://apis.google.com/js/api.js?onload=${pe}`).catch(Ze=>p(Ze))}z()}}).catch(d=>{throw Al=null,d})}(_),Al}const Rm=new Hn(5e3,15e3),Nm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Om=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pm(_){const d=_.config;Ne(d.authDomain,_,"auth-domain-config-required");const p=d.emulator?Kt(d,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,v={apiKey:d.apiKey,appName:_.name,v:R.SDK_VERSION},T=Om.get(_.config.apiHost);T&&(v.eid=T);const x=_._getFrameworks();return x.length&&(v.fw=x.join(",")),`${p}?${(0,L.xO)(v).slice(1)}`}function Sl(){return Sl=(0,g.Z)(function*(_){const d=yield xm(_),p=Gt().gapi;return Ne(p,_,"internal-error"),d.open({where:document.body,url:Pm(_),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nm,dontclear:!0},v=>new Promise(function(){var T=(0,g.Z)(function*(x,z){yield v.restyle({setHideOnLeave:!1});const pe=Wt(_,"network-request-failed"),Ze=Gt().setTimeout(()=>{z(pe)},Rm.get());function Fe(){Gt().clearTimeout(Ze),x(v)}v.ping(Fe).then(Fe,()=>{z(pe)})});return function(x,z){return T.apply(this,arguments)}}()))}),Sl.apply(this,arguments)}const km={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ch{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(d){}}}function mp(_,d,p,v,T,x){Ne(_.config.authDomain,_,"auth-domain-config-required"),Ne(_.config.apiKey,_,"invalid-api-key");const z={apiKey:_.config.apiKey,appName:_.name,authType:p,redirectUrl:v,v:R.SDK_VERSION,eventId:T};if(d instanceof Qr){d.setDefaultLanguage(_.languageCode),z.providerId=d.providerId||"",(0,L.xb)(d.getCustomParameters())||(z.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Ze,Fe]of Object.entries(x||{}))z[Ze]=Fe}if(d instanceof vi){const Ze=d.getScopes().filter(Fe=>""!==Fe);Ze.length>0&&(z.scopes=Ze.join(","))}_.tenantId&&(z.tid=_.tenantId);const pe=z;for(const Ze of Object.keys(pe))void 0===pe[Ze]&&delete pe[Ze];return`${function({config:_}){return _.emulator?Kt(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,L.xO)(pe).slice(1)}`}const Ml="webStorageSupport",Fm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lo,this._completeRedirectFn=po}_openPopup(d,p,v,T){var x=this;return(0,g.Z)(function*(){var z;jn(null===(z=x.eventManagers[d._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const pe=mp(d,p,v,$n(),T);return function(_,d,p,v=500,T=600){const x=Math.max((window.screen.availHeight-T)/2,0).toString(),z=Math.max((window.screen.availWidth-v)/2,0).toString();let pe="";const Ze=Object.assign(Object.assign({},km),{width:v.toString(),height:T.toString(),top:x,left:z}),Fe=(0,L.z$)().toLowerCase();p&&(pe=Js(Fe)?"_blank":p),an(Fe)&&(d=d||"http://localhost",Ze.scrollbars="yes");const pt=Object.entries(Ze).reduce((dn,[ei,Ai])=>`${dn}${ei}=${Ai},`,"");if(function(_=(0,L.z$)()){var d;return As(_)&&!!(null===(d=window.navigator)||void 0===d?void 0:d.standalone)}(Fe)&&"_self"!==pe)return function(_,d){const p=document.createElement("a");p.href=_,p.target=d;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(d||"",pe),new Ch(null);const tn=window.open(d||"",pe,pt);Ne(tn,_,"popup-blocked");try{tn.focus()}catch(dn){}return new Ch(tn)}(d,pe,ls())})()}_openRedirect(d,p,v,T){var x=this;return(0,g.Z)(function*(){return yield x._originValidation(d),_=mp(d,p,v,$n(),T),Gt().location.href=_,new Promise(()=>{});var _})()}_initialize(d){const p=d._key();if(this.eventManagers[p]){const{manager:T,promise:x}=this.eventManagers[p];return T?Promise.resolve(T):(jn(x,"If manager is not set, promise should be"),x)}const v=this.initAndGetManager(d);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(d){var p=this;return(0,g.Z)(function*(){const v=yield function(_){return Sl.apply(this,arguments)}(d),T=new Zc(d);return v.register("authEvent",x=>(Ne(null==x?void 0:x.authEvent,d,"invalid-auth-event"),{status:T.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[d._key()]={manager:T},p.iframes[d._key()]=v,T})()}_isIframeWebStorageSupported(d,p){this.iframes[d._key()].send(Ml,{type:Ml},T=>{var x;const z=null===(x=null==T?void 0:T[0])||void 0===x?void 0:x[Ml];void 0!==z&&p(!!z),Dn(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function(_){return Dh.apply(this,arguments)}(d)),this.originValidationPromises[p]}get _shouldInitProactively(){return ns()||Io()||As()}};class qo extends class{constructor(d){this.factorId=d}_process(d,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(d,p.credential,v);case"signin":return this._finalizeSignIn(d,p.credential);default:return gn("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new qo(d)}_finalizeEnroll(d,p,v){return function(_,d){return Zt(_,"POST","/v2/accounts/mfaEnrollment:finalize",sn(_,d))}(d,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,p){return function(_,d){return Zt(_,"POST","/v2/accounts/mfaSignIn:finalize",sn(_,d))}(d,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let xl=(()=>{class _{constructor(){}static assertion(p){return qo._fromCredential(p)}}return _.FACTOR_ID="phone",_})();var _,yp="@firebase/auth";class _p{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const p=this.auth.onIdTokenChanged(v=>{var T;d((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(d,p),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const p=this.internalListeners.get(d);!p||(this.internalListeners.delete(d),p(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}_="Browser",(0,R._registerComponent)(new Oe.wA("auth",(d,{options:p})=>{const v=d.getProvider("app").getImmediate(),{apiKey:T,authDomain:x}=v.options;return(z=>{Ne(T&&!T.includes(":"),"invalid-api-key",{appName:z.name}),Ne(!(null==x?void 0:x.includes(":")),"argument-error",{appName:z.name});const pe={apiKey:T,authDomain:x,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yu(_)},Ze=new rs(z,pe);return function(_,d){const p=(null==d?void 0:d.persistence)||[],v=(Array.isArray(p)?p:[p]).map(tt);(null==d?void 0:d.errorMap)&&_._updateErrorMap(d.errorMap),_._initializeWithPersistence(v,null==d?void 0:d.popupRedirectResolver)}(Ze,p),Ze})(v)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,p,v)=>{d.getProvider("auth-internal").initialize()})),(0,R._registerComponent)(new Oe.wA("auth-internal",d=>{const p=wn(d.getProvider("auth").getImmediate());return new _p(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,R.registerVersion)(yp,"0.19.4",void 0),(0,R.registerVersion)(yp,"0.19.4","esm2017")},9842:(Je,ye,O)=>{"use strict";O.d(ye,{BH:()=>ke,LL:()=>he,ZR:()=>Oe,zI:()=>ce,US:()=>fe,tV:()=>le,$s:()=>Zt,r3:()=>Jt,Sg:()=>Te,ne:()=>jn,vZ:()=>Wt,ZB:()=>U,pd:()=>Ne,m9:()=>bs,z$:()=>Ve,jU:()=>Y,ru:()=>ae,d:()=>ve,xb:()=>pn,w1:()=>Ge,hl:()=>ct,uI:()=>Ue,UG:()=>ue,b$:()=>Ie,G6:()=>We,Mn:()=>xe,xO:()=>ri,zd:()=>pi,eu:()=>ne});const re=function(B){const V=[];let H=0;for(let Ee=0;Ee<B.length;Ee++){let X=B.charCodeAt(Ee);X<128?V[H++]=X:X<2048?(V[H++]=X>>6|192,V[H++]=63&X|128):55296==(64512&X)&&Ee+1<B.length&&56320==(64512&B.charCodeAt(Ee+1))?(X=65536+((1023&X)<<10)+(1023&B.charCodeAt(++Ee)),V[H++]=X>>18|240,V[H++]=X>>12&63|128,V[H++]=X>>6&63|128,V[H++]=63&X|128):(V[H++]=X>>12|224,V[H++]=X>>6&63|128,V[H++]=63&X|128)}return V},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,V){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let X=0;X<B.length;X+=3){const Xe=B[X],st=X+1<B.length,Xt=st?B[X+1]:0,Gn=X+2<B.length,On=Gn?B[X+2]:0;let q=(15&Xt)<<2|On>>6,G=63&On;Gn||(G=64,st||(q=64)),Ee.push(H[Xe>>2],H[(3&Xe)<<4|Xt>>4],H[q],H[G])}return Ee.join("")},encodeString(B,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(B):this.encodeByteArray(re(B),V)},decodeString(B,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(B):function(B){const V=[];let H=0,Ee=0;for(;H<B.length;){const X=B[H++];if(X<128)V[Ee++]=String.fromCharCode(X);else if(X>191&&X<224){const Xe=B[H++];V[Ee++]=String.fromCharCode((31&X)<<6|63&Xe)}else if(X>239&&X<365){const Gn=((7&X)<<18|(63&B[H++])<<12|(63&B[H++])<<6|63&B[H++])-65536;V[Ee++]=String.fromCharCode(55296+(Gn>>10)),V[Ee++]=String.fromCharCode(56320+(1023&Gn))}else{const Xe=B[H++],st=B[H++];V[Ee++]=String.fromCharCode((15&X)<<12|(63&Xe)<<6|63&st)}}return V.join("")}(this.decodeStringToByteArray(B,V))},decodeStringToByteArray(B,V){this.init_();const H=V?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let X=0;X<B.length;){const Xe=H[B.charAt(X++)],Xt=X<B.length?H[B.charAt(X)]:0;++X;const On=X<B.length?H[B.charAt(X)]:64;++X;const J=X<B.length?H[B.charAt(X)]:64;if(++X,null==Xe||null==Xt||null==On||null==J)throw Error();Ee.push(Xe<<2|Xt>>4),64!==On&&(Ee.push(Xt<<4&240|On>>2),64!==J&&Ee.push(On<<6&192|J))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},se=function(B){return function(B){const V=re(B);return fe.encodeByteArray(V,!0)}(B).replace(/\./g,"")},le=function(B){try{return fe.decodeString(B,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function U(B,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return V}for(const H in V)!V.hasOwnProperty(H)||!ee(H)||(B[H]=U(B[H],V[H]));return B}function ee(B){return"__proto__"!==B}class ke{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,H)=>{this.resolve=V,this.reject=H})}wrapCallback(V){return(H,Ee)=>{H?this.reject(H):this.resolve(Ee),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(H):V(H,Ee))}}}function Te(B,V){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=V||"demo-project",X=B.iat||0,Xe=B.sub||B.user_id;if(!Xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const st=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:X,exp:X+3600,auth_time:X,sub:Xe,user_id:Xe,firebase:{sign_in_provider:"custom",identities:{}}},B);return[se(JSON.stringify({alg:"none",type:"JWT"})),se(JSON.stringify(st)),""].join(".")}function Ve(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function ue(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(B){return!1}}function Y(){return"object"==typeof self&&self.self===self}function ae(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function Ie(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ve(){return Ve().indexOf("Electron/")>=0}function Ge(){const B=Ve();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function xe(){return Ve().indexOf("MSAppHost/")>=0}function We(){return!ue()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ct(){return"object"==typeof indexedDB}function ne(){return new Promise((B,V)=>{try{let H=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",X=self.indexedDB.open(Ee);X.onsuccess=()=>{X.result.close(),H||self.indexedDB.deleteDatabase(Ee),B(!0)},X.onupgradeneeded=()=>{H=!1},X.onerror=()=>{var Xe;V((null===(Xe=X.error)||void 0===Xe?void 0:Xe.message)||"")}}catch(H){V(H)}})}function ce(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Oe extends Error{constructor(V,H,Ee){super(H),this.code=V,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,Oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,he.prototype.create)}}class he{constructor(V,H,Ee){this.service=V,this.serviceName=H,this.errors=Ee}create(V,...H){const Ee=H[0]||{},X=`${this.service}/${V}`,Xe=this.errors[V],st=Xe?function(B,V){return B.replace(rn,(H,Ee)=>{const X=V[Ee];return null!=X?String(X):`<${Ee}?>`})}(Xe,Ee):"Error";return new Oe(X,`${this.serviceName}: ${st} (${X}).`,Ee)}}const rn=/\{\$([^}]+)}/g;function Jt(B,V){return Object.prototype.hasOwnProperty.call(B,V)}function pn(B){for(const V in B)if(Object.prototype.hasOwnProperty.call(B,V))return!1;return!0}function Wt(B,V){if(B===V)return!0;const H=Object.keys(B),Ee=Object.keys(V);for(const X of H){if(!Ee.includes(X))return!1;const Xe=B[X],st=V[X];if(es(Xe)&&es(st)){if(!Wt(Xe,st))return!1}else if(Xe!==st)return!1}for(const X of Ee)if(!H.includes(X))return!1;return!0}function es(B){return null!==B&&"object"==typeof B}function ri(B){const V=[];for(const[H,Ee]of Object.entries(B))Array.isArray(Ee)?Ee.forEach(X=>{V.push(encodeURIComponent(H)+"="+encodeURIComponent(X))}):V.push(encodeURIComponent(H)+"="+encodeURIComponent(Ee));return V.length?"&"+V.join("&"):""}function pi(B){const V={};return B.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[X,Xe]=Ee.split("=");V[decodeURIComponent(X)]=decodeURIComponent(Xe)}}),V}function Ne(B){const V=B.indexOf("?");if(!V)return"";const H=B.indexOf("#",V);return B.substring(V,H>0?H:void 0)}function jn(B,V){const H=new ii(B,V);return H.subscribe.bind(H)}class ii{constructor(V,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{V(this)}).catch(Ee=>{this.error(Ee)})}next(V){this.forEachObserver(H=>{H.next(V)})}error(V){this.forEachObserver(H=>{H.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,H,Ee){let X;if(void 0===V&&void 0===H&&void 0===Ee)throw new Error("Missing Observer.");X=function(B,V){if("object"!=typeof B||null===B)return!1;for(const H of["next","error","complete"])if(H in B&&"function"==typeof B[H])return!0;return!1}(V)?V:{next:V,error:H,complete:Ee},void 0===X.next&&(X.next=nr),void 0===X.error&&(X.error=nr),void 0===X.complete&&(X.complete=nr);const Xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?X.error(this.finalError):X.complete()}catch(st){}}),this.observers.push(X),Xe}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,V)}sendOne(V,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{H(this.observers[V])}catch(Ee){"undefined"!=typeof console&&console.error&&console.error(Ee)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nr(){}function Zt(B,V=1e3,H=2){const Ee=V*Math.pow(H,B),X=Math.round(.5*Ee*(Math.random()-.5)*2);return Math.min(144e5,Ee+X)}function bs(B){return B&&B._delegate?B._delegate:B}},7334:(Je,ye,O)=>{"use strict";O.d(ye,{Mq:()=>g.getApp,C6:()=>g.getApps});var g=O(2646);(0,g.registerVersion)("firebase","9.6.1","app")},6543:(Je,ye,O)=>{"use strict";O.d(ye,{Z:()=>g.Z});var g=O(614);g.Z.registerVersion("firebase","9.6.1","app-compat")},7727:(Je,ye,O)=>{"use strict";O.r(ye);var g=O(1921),L=O(614),R=O(2755),re=O(9842),oe=(O(2646),O(4516),O(7817));function se(){return window}function U(){return(U=(0,g.Z)(function*(J,q,G){var De;const{BuildInfo:$e}=se();(0,R.ap)(q.sessionId,"AuthEvent did not contain a session ID");const mt=yield Y(q.sessionId),kt={};return(0,R.aq)()?kt.ibi=$e.packageName:(0,R.ar)()?kt.apn=$e.packageName:(0,R.as)(J,"operation-not-supported-in-this-environment"),$e.displayName&&(kt.appDisplayName=$e.displayName),kt.sessionId=mt,(0,R.at)(J,G,q.type,void 0,null!==(De=q.eventId)&&void 0!==De?De:void 0,kt)})).apply(this,arguments)}function ke(){return(ke=(0,g.Z)(function*(J){const{BuildInfo:q}=se(),G={};(0,R.aq)()?G.iosBundleId=q.packageName:(0,R.ar)()?G.androidPackageName=q.packageName:(0,R.as)(J,"operation-not-supported-in-this-environment"),yield(0,R.au)(J,G)})).apply(this,arguments)}function Ue(){return(Ue=(0,g.Z)(function*(J,q,G){const{cordova:De}=se();let $e=()=>{};try{yield new Promise((mt,kt)=>{let Tt=null;function Ft(){var yt;mt();const Cn=null===(yt=De.plugins.browsertab)||void 0===yt?void 0:yt.close;"function"==typeof Cn&&Cn(),"function"==typeof(null==G?void 0:G.close)&&G.close()}function Ln(){Tt||(Tt=window.setTimeout(()=>{kt((0,R.av)(J,"redirect-cancelled-by-user"))},2e3))}function Mn(){"visible"===(null==document?void 0:document.visibilityState)&&Ln()}q.addPassiveListener(Ft),document.addEventListener("resume",Ln,!1),(0,R.ar)()&&document.addEventListener("visibilitychange",Mn,!1),$e=()=>{q.removePassiveListener(Ft),document.removeEventListener("resume",Ln,!1),document.removeEventListener("visibilitychange",Mn,!1),Tt&&window.clearTimeout(Tt)}})}finally{$e()}})).apply(this,arguments)}function Y(J){return ae.apply(this,arguments)}function ae(){return(ae=(0,g.Z)(function*(J){const q=Ie(J),G=yield crypto.subtle.digest("SHA-256",q);return Array.from(new Uint8Array(G)).map($e=>$e.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ie(J){if((0,R.ap)(/[0-9a-zA-Z]+/.test(J),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(J);const q=new ArrayBuffer(J.length),G=new Uint8Array(q);for(let De=0;De<J.length;De++)G[De]=J.charCodeAt(De);return G}class Ge extends R.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(q=>{this.resolveInialized=q})}addPassiveListener(q){this.passiveListeners.add(q)}removePassiveListener(q){this.passiveListeners.delete(q)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(q){return this.resolveInialized(),this.passiveListeners.forEach(G=>G(q)),super.onEvent(q)}initialized(){var q=this;return(0,g.Z)(function*(){yield q.initPromise})()}}function We(J){return ct.apply(this,arguments)}function ct(){return(ct=(0,g.Z)(function*(J){const q=yield ge()._get(we(J));return q&&(yield ge()._remove(we(J))),q})).apply(this,arguments)}function ce(){const J=[],q="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let G=0;G<20;G++){const De=Math.floor(Math.random()*q.length);J.push(q.charAt(De))}return J.join("")}function ge(){return(0,R.ax)(R.b)}function we(J){return(0,R.ay)("authEvent",J.config.apiKey,J.name)}function _t(J){if(!(null==J?void 0:J.includes("?")))return{};const[q,...G]=J.split("?");return(0,re.zd)(G.join("?"))}function It(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,R.av)("no-auth-event")}}function Jt(){var J;return(null===(J=null==self?void 0:self.location)||void 0===J?void 0:J.protocol)||null}function pn(J=(0,re.z$)()){return!("file:"!==Jt()&&"ionic:"!==Jt()||!J.toLowerCase().match(/iphone|ipad|ipod|android/))}function pi(){try{const J=self.localStorage,q=R.aG();if(J)return J.setItem(q,"1"),J.removeItem(q),!function(J=(0,re.z$)()){return(0,re.w1)()&&11===(null==document?void 0:document.documentMode)||function(J=(0,re.z$)()){return/Edge\/\d+/.test(J)}(J)}()||(0,re.hl)()}catch(J){return Ne()&&(0,re.hl)()}return!1}function Ne(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function gn(){return("http:"===Jt()||"https:"===Jt()||(0,re.ru)()||pn())&&!((0,re.b$)()||(0,re.UG)())&&pi()&&!Ne()}function jn(){return pn()&&"undefined"!=typeof document}function tt(){return(tt=(0,g.Z)(function*(){return!!jn()&&new Promise(J=>{const q=setTimeout(()=>{J(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(q),J(!0)})})})).apply(this,arguments)}const Vt={LOCAL:"local",NONE:"none",SESSION:"session"},nr=R.aw,$n="persistence";function dt(J){return xt.apply(this,arguments)}function xt(){return(xt=(0,g.Z)(function*(J){yield J._initializationPromise;const q=Hn(),G=R.ay($n,J.config.apiKey,J.name);(null==q?void 0:q.sessionStorage)&&q.sessionStorage.setItem(G,J._getPersistence())})).apply(this,arguments)}function Hn(){return"undefined"!=typeof window?window:null}const Kt=R.aw;class He{constructor(){this.browserResolver=R.ax(R.k),this.cordovaResolver=R.ax(class{constructor(){this._redirectPersistence=R.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=R.aA}_initialize(q){var G=this;return(0,g.Z)(function*(){const De=q._key();let $e=G.eventManagers.get(De);return $e||($e=new Ge(q),G.eventManagers.set(De,$e),G.attachCallbackListeners(q,$e)),$e})()}_openPopup(q){(0,R.as)(q,"operation-not-supported-in-this-environment")}_openRedirect(q,G,De,$e){var mt=this;return(0,g.Z)(function*(){!function(J){var q,G,De,$e,mt,kt,Tt,Ft,Ln,Mn;const yt=se();(0,R.aw)("function"==typeof(null===(q=null==yt?void 0:yt.universalLinks)||void 0===q?void 0:q.subscribe),J,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,R.aw)(void 0!==(null===(G=null==yt?void 0:yt.BuildInfo)||void 0===G?void 0:G.packageName),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,R.aw)("function"==typeof(null===(mt=null===($e=null===(De=null==yt?void 0:yt.cordova)||void 0===De?void 0:De.plugins)||void 0===$e?void 0:$e.browsertab)||void 0===mt?void 0:mt.openUrl),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.aw)("function"==typeof(null===(Ft=null===(Tt=null===(kt=null==yt?void 0:yt.cordova)||void 0===kt?void 0:kt.plugins)||void 0===Tt?void 0:Tt.browsertab)||void 0===Ft?void 0:Ft.isAvailable),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.aw)("function"==typeof(null===(Mn=null===(Ln=null==yt?void 0:yt.cordova)||void 0===Ln?void 0:Ln.InAppBrowser)||void 0===Mn?void 0:Mn.open),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(q);const kt=yield mt._initialize(q);yield kt.initialized(),kt.resetRedirect(),(0,R.aB)(),yield mt._originValidation(q);const Tt=function(J,q,G=null){return{type:q,eventId:G,urlResponse:null,sessionId:ce(),postBody:null,tenantId:J.tenantId,error:(0,R.av)(J,"no-auth-event")}}(q,De,$e);yield function(J,q){return ge()._set(we(J),q)}(q,Tt);const Ft=yield function(J,q,G){return U.apply(this,arguments)}(q,Tt,G),Ln=yield function(J){const{cordova:q}=se();return new Promise(G=>{q.plugins.browsertab.isAvailable(De=>{let $e=null;De?q.plugins.browsertab.openUrl(J):$e=q.InAppBrowser.open(J,(0,R.ao)()?"_blank":"_system","location=yes"),G($e)})})}(Ft);return function(J,q,G){return Ue.apply(this,arguments)}(q,kt,Ln)})()}_isIframeWebStorageSupported(q,G){throw new Error("Method not implemented.")}_originValidation(q){const G=q._key();return this.originValidationPromises[G]||(this.originValidationPromises[G]=function(J){return ke.apply(this,arguments)}(q)),this.originValidationPromises[G]}attachCallbackListeners(q,G){const{universalLinks:De,handleOpenURL:$e,BuildInfo:mt}=se(),kt=setTimeout((0,g.Z)(function*(){yield We(q),G.onEvent(It())}),500),Tt=function(){var Mn=(0,g.Z)(function*(yt){clearTimeout(kt);const Cn=yield We(q);let je=null;Cn&&(null==yt?void 0:yt.url)&&(je=function(J,q){var G,De;const $e=function(J){const q=_t(J),G=q.link?decodeURIComponent(q.link):void 0,De=_t(G).link,$e=q.deep_link_id?decodeURIComponent(q.deep_link_id):void 0;return _t($e).link||$e||De||G||J}(q);if($e.includes("/__/auth/callback")){const mt=_t($e),kt=mt.firebaseError?function(J){try{return JSON.parse(J)}catch(q){return null}}(decodeURIComponent(mt.firebaseError)):null,Tt=null===(De=null===(G=null==kt?void 0:kt.code)||void 0===G?void 0:G.split("auth/"))||void 0===De?void 0:De[1],Ft=Tt?(0,R.av)(Tt):null;return Ft?{type:J.type,eventId:J.eventId,tenantId:J.tenantId,error:Ft,urlResponse:null,sessionId:null,postBody:null}:{type:J.type,eventId:J.eventId,tenantId:J.tenantId,sessionId:J.sessionId,urlResponse:$e,postBody:null}}return null}(Cn,yt.url)),G.onEvent(je||It())});return function(Cn){return Mn.apply(this,arguments)}}();void 0!==De&&"function"==typeof De.subscribe&&De.subscribe(null,Tt);const Ft=$e,Ln=`${mt.packageName.toLowerCase()}://`;se().handleOpenURL=function(){var Mn=(0,g.Z)(function*(yt){if(yt.toLowerCase().startsWith(Ln)&&Tt({url:yt}),"function"==typeof Ft)try{Ft(yt)}catch(Cn){console.error(Cn)}});return function(yt){return Mn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=R.a,this._completeRedirectFn=R.aA}_initialize(q){var G=this;return(0,g.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._initialize(q)})()}_openPopup(q,G,De,$e){var mt=this;return(0,g.Z)(function*(){return yield mt.selectUnderlyingResolver(),mt.assertedUnderlyingResolver._openPopup(q,G,De,$e)})()}_openRedirect(q,G,De,$e){var mt=this;return(0,g.Z)(function*(){return yield mt.selectUnderlyingResolver(),mt.assertedUnderlyingResolver._openRedirect(q,G,De,$e)})()}_isIframeWebStorageSupported(q,G){this.assertedUnderlyingResolver._isIframeWebStorageSupported(q,G)}_originValidation(q){return this.assertedUnderlyingResolver._originValidation(q)}get _shouldInitProactively(){return jn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Kt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var q=this;return(0,g.Z)(function*(){if(q.underlyingResolver)return;const G=yield function(){return tt.apply(this,arguments)}();q.underlyingResolver=G?q.cordovaResolver:q.browserResolver})()}}function ut(J){return J.unwrap()}function sn(J){return Ht(J)}function Ht(J){const{_tokenResponse:q}=J instanceof re.ZR?J.customData:J;if(!q)return null;if(!(J instanceof re.ZR)&&"temporaryProof"in q&&"phoneNumber"in q)return R.P.credentialFromResult(J);const G=q.providerId;if(!G||G===R.o.PASSWORD)return null;let De;switch(G){case R.o.GOOGLE:De=R.N;break;case R.o.FACEBOOK:De=R.M;break;case R.o.GITHUB:De=R.Q;break;case R.o.TWITTER:De=R.V;break;default:const{oauthIdToken:$e,oauthAccessToken:mt,oauthTokenSecret:kt,pendingToken:Tt,nonce:Ft}=q;return mt||kt||$e||Tt?Tt?G.startsWith("saml.")?R.aJ._create(G,Tt):R.I._fromParams({providerId:G,signInMethod:G,pendingToken:Tt,idToken:$e,accessToken:mt}):new R.T(G).credential({idToken:$e,accessToken:mt,rawNonce:Ft}):null}return J instanceof re.ZR?De.credentialFromError(J):De.credentialFromResult(J)}function on(J,q){return q.catch(G=>{throw G instanceof re.ZR&&function(J,q){var G;const De=null===(G=q.customData)||void 0===G?void 0:G._tokenResponse;if("auth/multi-factor-auth-required"===q.code)q.resolver=new V(J,R.am(J,q));else if(De){const $e=Ht(q),mt=q;$e&&(mt.credential=$e,mt.tenantId=De.tenantId||void 0,mt.email=De.email||void 0,mt.phoneNumber=De.phoneNumber||void 0)}}(J,G),G}).then(G=>{const $e=G.user;return{operationType:G.operationType,credential:sn(G),additionalUserInfo:R.ak(G),user:H.getOrCreate($e)}})}function bs(J,q){return B.apply(this,arguments)}function B(){return(B=(0,g.Z)(function*(J,q){const G=yield q;return{verificationId:G.verificationId,confirm:De=>on(J,G.confirm(De))}})).apply(this,arguments)}class V{constructor(q,G){this.resolver=G,this.auth=q.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(q){return on(ut(this.auth),this.resolver.resolveSignIn(q))}}class H{constructor(q){this._delegate=q,this.multiFactor=R.an(q)}static getOrCreate(q){return H.USER_MAP.has(q)||H.USER_MAP.set(q,new H(q)),H.USER_MAP.get(q)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(q){return this._delegate.getIdTokenResult(q)}getIdToken(q){return this._delegate.getIdToken(q)}linkAndRetrieveDataWithCredential(q){return this.linkWithCredential(q)}linkWithCredential(q){var G=this;return(0,g.Z)(function*(){return on(G.auth,R.Y(G._delegate,q))})()}linkWithPhoneNumber(q,G){var De=this;return(0,g.Z)(function*(){return bs(De.auth,R.l(De._delegate,q,G))})()}linkWithPopup(q){var G=this;return(0,g.Z)(function*(){return on(G.auth,R.d(G._delegate,q,He))})()}linkWithRedirect(q){var G=this;return(0,g.Z)(function*(){return yield dt(R.aC(G.auth)),R.g(G._delegate,q,He)})()}reauthenticateAndRetrieveDataWithCredential(q){return this.reauthenticateWithCredential(q)}reauthenticateWithCredential(q){var G=this;return(0,g.Z)(function*(){return on(G.auth,R.Z(G._delegate,q))})()}reauthenticateWithPhoneNumber(q,G){return bs(this.auth,R.r(this._delegate,q,G))}reauthenticateWithPopup(q){return on(this.auth,R.e(this._delegate,q,He))}reauthenticateWithRedirect(q){var G=this;return(0,g.Z)(function*(){return yield dt(R.aC(G.auth)),R.h(G._delegate,q,He)})()}sendEmailVerification(q){return R.aa(this._delegate,q)}unlink(q){var G=this;return(0,g.Z)(function*(){return yield R.aj(G._delegate,q),G})()}updateEmail(q){return R.af(this._delegate,q)}updatePassword(q){return R.ag(this._delegate,q)}updatePhoneNumber(q){return R.u(this._delegate,q)}updateProfile(q){return R.ae(this._delegate,q)}verifyBeforeUpdateEmail(q,G){return R.ab(this._delegate,q,G)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}H.USER_MAP=new WeakMap;const Ee=R.aw;let X=(()=>{class J{constructor(G,De){if(this.app=G,De.isInitialized())return this._delegate=De.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:$e}=G.options;Ee($e,"invalid-api-key",{appName:G.name});let mt=[R.K];if("undefined"!=typeof window){mt=function(J,q){const G=Hn();if(!(null==G?void 0:G.sessionStorage))return[];const De=R.ay($n,J,q);switch(G.sessionStorage.getItem(De)){case Vt.NONE:return[R.K];case Vt.LOCAL:return[R.i,R.a];case Vt.SESSION:return[R.a];default:return[]}}($e,G.name);for(const Tt of[R.i,R.b,R.a])mt.includes(Tt)||mt.push(Tt)}Ee($e,"invalid-api-key",{appName:G.name});const kt="undefined"!=typeof window?He:void 0;this._delegate=De.initialize({options:{persistence:mt,popupRedirectResolver:kt}}),this._delegate._updateErrorMap(R.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?H.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(G){this._delegate.languageCode=G}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(G){this._delegate.tenantId=G}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(G,De){R.E(this._delegate,G,De)}applyActionCode(G){return R.a1(this._delegate,G)}checkActionCode(G){return R.a2(this._delegate,G)}confirmPasswordReset(G,De){return R.a0(this._delegate,G,De)}createUserWithEmailAndPassword(G,De){var $e=this;return(0,g.Z)(function*(){return on($e._delegate,R.a4($e._delegate,G,De))})()}fetchProvidersForEmail(G){return this.fetchSignInMethodsForEmail(G)}fetchSignInMethodsForEmail(G){return R.a9(this._delegate,G)}isSignInWithEmailLink(G){return R.a7(this._delegate,G)}getRedirectResult(){var G=this;return(0,g.Z)(function*(){Ee(gn(),G._delegate,"operation-not-supported-in-this-environment");const De=yield R.j(G._delegate,He);return De?on(G._delegate,Promise.resolve(De)):{credential:null,user:null}})()}addFrameworkForLogging(G){!function(J,q){(0,R.aC)(J)._logFramework(q)}(this._delegate,G)}onAuthStateChanged(G,De,$e){const{next:mt,error:kt,complete:Tt}=Xe(G,De,$e);return this._delegate.onAuthStateChanged(mt,kt,Tt)}onIdTokenChanged(G,De,$e){const{next:mt,error:kt,complete:Tt}=Xe(G,De,$e);return this._delegate.onIdTokenChanged(mt,kt,Tt)}sendSignInLinkToEmail(G,De){return R.a6(this._delegate,G,De)}sendPasswordResetEmail(G,De){return R.$(this._delegate,G,De||void 0)}setPersistence(G){var De=this;return(0,g.Z)(function*(){let $e;switch(function(J,q){nr(Object.values(Vt).includes(q),J,"invalid-persistence-type"),(0,re.b$)()?nr(q!==Vt.SESSION,J,"unsupported-persistence-type"):(0,re.UG)()?nr(q===Vt.NONE,J,"unsupported-persistence-type"):Ne()?nr(q===Vt.NONE||q===Vt.LOCAL&&(0,re.hl)(),J,"unsupported-persistence-type"):nr(q===Vt.NONE||pi(),J,"unsupported-persistence-type")}(De._delegate,G),G){case Vt.SESSION:$e=R.a;break;case Vt.LOCAL:$e=(yield R.ax(R.i)._isAvailable())?R.i:R.b;break;case Vt.NONE:$e=R.K;break;default:return R.as("argument-error",{appName:De._delegate.name})}return De._delegate.setPersistence($e)})()}signInAndRetrieveDataWithCredential(G){return this.signInWithCredential(G)}signInAnonymously(){return on(this._delegate,R.W(this._delegate))}signInWithCredential(G){return on(this._delegate,R.X(this._delegate,G))}signInWithCustomToken(G){return on(this._delegate,R._(this._delegate,G))}signInWithEmailAndPassword(G,De){return on(this._delegate,R.a5(this._delegate,G,De))}signInWithEmailLink(G,De){return on(this._delegate,R.a8(this._delegate,G,De))}signInWithPhoneNumber(G,De){return bs(this._delegate,R.s(this._delegate,G,De))}signInWithPopup(G){var De=this;return(0,g.Z)(function*(){return Ee(gn(),De._delegate,"operation-not-supported-in-this-environment"),on(De._delegate,R.c(De._delegate,G,He))})()}signInWithRedirect(G){var De=this;return(0,g.Z)(function*(){return Ee(gn(),De._delegate,"operation-not-supported-in-this-environment"),yield dt(De._delegate),R.f(De._delegate,G,He)})()}updateCurrentUser(G){return this._delegate.updateCurrentUser(G)}verifyPasswordResetCode(G){return R.a3(this._delegate,G)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return J.Persistence=Vt,J})();function Xe(J,q,G){let De=J;"function"!=typeof J&&({next:De,error:q,complete:G}=J);const $e=De;return{next:kt=>$e(kt&&H.getOrCreate(kt)),error:q,complete:G}}class st{constructor(){this.providerId="phone",this._delegate=new R.P(ut(L.Z.auth()))}static credential(q,G){return R.P.credential(q,G)}verifyPhoneNumber(q,G){return this._delegate.verifyPhoneNumber(q,G)}unwrap(){return this._delegate}}st.PHONE_SIGN_IN_METHOD=R.P.PHONE_SIGN_IN_METHOD,st.PROVIDER_ID=R.P.PROVIDER_ID;const Xt=R.aw;var J;(J=L.Z).INTERNAL.registerComponent(new oe.wA("auth-compat",q=>{const G=q.getProvider("app-compat").getImmediate(),De=q.getProvider("auth");return new X(G,De)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:R.A.EMAIL_SIGNIN,PASSWORD_RESET:R.A.PASSWORD_RESET,RECOVER_EMAIL:R.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:R.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:R.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:R.A.VERIFY_EMAIL}},EmailAuthProvider:R.L,FacebookAuthProvider:R.M,GithubAuthProvider:R.Q,GoogleAuthProvider:R.N,OAuthProvider:R.T,SAMLAuthProvider:R.U,PhoneAuthProvider:st,PhoneMultiFactorGenerator:R.m,RecaptchaVerifier:class{constructor(q,G,De=L.Z.app()){var $e;Xt(null===($e=De.options)||void 0===$e?void 0:$e.apiKey,"invalid-api-key",{appName:De.name}),this._delegate=new R.R(q,G,De.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:R.V,Auth:X,AuthCredential:R.G,Error:re.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),J.registerVersion("@firebase/auth-compat","0.2.4")},4958:function(Je,ye){!function(O){"use strict";function g(ue){return Array.prototype.slice.call(ue)}function L(ue){return new Promise(function(Y,ae){ue.onsuccess=function(){Y(ue.result)},ue.onerror=function(){ae(ue.error)}})}function R(ue,Y,ae){var Ie,ve=new Promise(function(Ge,xe){L(Ie=ue[Y].apply(ue,ae)).then(Ge,xe)});return ve.request=Ie,ve}function re(ue,Y,ae){var Ie=R(ue,Y,ae);return Ie.then(function(ve){if(ve)return new j(ve,Ie.request)})}function ie(ue,Y,ae){ae.forEach(function(Ie){Object.defineProperty(ue.prototype,Ie,{get:function(){return this[Y][Ie]},set:function(ve){this[Y][Ie]=ve}})})}function fe(ue,Y,ae,Ie){Ie.forEach(function(ve){ve in ae.prototype&&(ue.prototype[ve]=function(){return R(this[Y],ve,arguments)})})}function oe(ue,Y,ae,Ie){Ie.forEach(function(ve){ve in ae.prototype&&(ue.prototype[ve]=function(){return this[Y][ve].apply(this[Y],arguments)})})}function se(ue,Y,ae,Ie){Ie.forEach(function(ve){ve in ae.prototype&&(ue.prototype[ve]=function(){return re(this[Y],ve,arguments)})})}function le(ue){this._index=ue}function j(ue,Y){this._cursor=ue,this._request=Y}function U(ue){this._store=ue}function ee(ue){this._tx=ue,this.complete=new Promise(function(Y,ae){ue.oncomplete=function(){Y()},ue.onerror=function(){ae(ue.error)},ue.onabort=function(){ae(ue.error)}})}function ke(ue,Y,ae){this._db=ue,this.oldVersion=Y,this.transaction=new ee(ae)}function Te(ue){this._db=ue}ie(le,"_index",["name","keyPath","multiEntry","unique"]),fe(le,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),se(le,"_index",IDBIndex,["openCursor","openKeyCursor"]),ie(j,"_cursor",["direction","key","primaryKey","value"]),fe(j,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(ue){ue in IDBCursor.prototype&&(j.prototype[ue]=function(){var Y=this,ae=arguments;return Promise.resolve().then(function(){return Y._cursor[ue].apply(Y._cursor,ae),L(Y._request).then(function(Ie){if(Ie)return new j(Ie,Y._request)})})})}),U.prototype.createIndex=function(){return new le(this._store.createIndex.apply(this._store,arguments))},U.prototype.index=function(){return new le(this._store.index.apply(this._store,arguments))},ie(U,"_store",["name","keyPath","indexNames","autoIncrement"]),fe(U,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),se(U,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),oe(U,"_store",IDBObjectStore,["deleteIndex"]),ee.prototype.objectStore=function(){return new U(this._tx.objectStore.apply(this._tx,arguments))},ie(ee,"_tx",["objectStoreNames","mode"]),oe(ee,"_tx",IDBTransaction,["abort"]),ke.prototype.createObjectStore=function(){return new U(this._db.createObjectStore.apply(this._db,arguments))},ie(ke,"_db",["name","version","objectStoreNames"]),oe(ke,"_db",IDBDatabase,["deleteObjectStore","close"]),Te.prototype.transaction=function(){return new ee(this._db.transaction.apply(this._db,arguments))},ie(Te,"_db",["name","version","objectStoreNames"]),oe(Te,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(ue){[U,le].forEach(function(Y){ue in Y.prototype&&(Y.prototype[ue.replace("open","iterate")]=function(){var ae=g(arguments),Ie=ae[ae.length-1],ve=this._store||this._index,Ge=ve[ue].apply(ve,ae.slice(0,-1));Ge.onsuccess=function(){Ie(Ge.result)}})})}),[le,U].forEach(function(ue){ue.prototype.getAll||(ue.prototype.getAll=function(Y,ae){var Ie=this,ve=[];return new Promise(function(Ge){Ie.iterateCursor(Y,function(xe){xe?(ve.push(xe.value),void 0===ae||ve.length!=ae?xe.continue():Ge(ve)):Ge(ve)})})})}),O.openDb=function(ue,Y,ae){var Ie=R(indexedDB,"open",[ue,Y]),ve=Ie.request;return ve&&(ve.onupgradeneeded=function(Ge){ae&&ae(new ke(ve.result,Ge.oldVersion,ve.transaction))}),Ie.then(function(Ge){return new Te(Ge)})},O.deleteDb=function(ue){return R(indexedDB,"deleteDatabase",[ue])},Object.defineProperty(O,"__esModule",{value:!0})}(ye)},9105:(Je,ye,O)=>{"use strict";O.d(ye,{y:()=>j});var g=O(1867),L=O(5414),R=O(746),re=O(7190);var oe=O(4288),se=O(2908),le=O(9160);let j=(()=>{class Te{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const ue=new Te;return ue.source=this,ue.operator=Ue,ue}subscribe(Ue,ue,Y){const ae=function(Te){return Te&&Te instanceof g.Lv||function(Te){return Te&&(0,se.m)(Te.next)&&(0,se.m)(Te.error)&&(0,se.m)(Te.complete)}(Te)&&(0,L.Nn)(Te)}(Ue)?Ue:new g.Hp(Ue,ue,Y);return(0,le.x)(()=>{const{operator:Ie,source:ve}=this;ae.add(Ie?Ie.call(ae,ve):ve?this._subscribe(ae):this._trySubscribe(ae))}),ae}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(ue){Ue.error(ue)}}forEach(Ue,ue){return new(ue=U(ue))((Y,ae)=>{let Ie;Ie=this.subscribe(ve=>{try{Ue(ve)}catch(Ge){ae(Ge),null==Ie||Ie.unsubscribe()}},ae,Y)})}_subscribe(Ue){var ue;return null===(ue=this.source)||void 0===ue?void 0:ue.subscribe(Ue)}[R.L](){return this}pipe(...Ue){return function(Te){return 0===Te.length?re.y:1===Te.length?Te[0]:function(Ue){return Te.reduce((ue,Y)=>Y(ue),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=U(Ue))((ue,Y)=>{let ae;this.subscribe(Ie=>ae=Ie,Ie=>Y(Ie),()=>ue(ae))})}}return Te.create=Ve=>new Te(Ve),Te})();function U(Te){var Ve;return null!==(Ve=null!=Te?Te:oe.v.Promise)&&void 0!==Ve?Ve:Promise}},7396:(Je,ye,O)=>{"use strict";O.d(ye,{x:()=>oe});var g=O(9105),L=O(5414);const re=(0,O(6171).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=O(7487),fe=O(9160);let oe=(()=>{class le extends g.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(U){const ee=new se(this,this);return ee.operator=U,ee}_throwIfClosed(){if(this.closed)throw new re}next(U){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const ee=this.observers.slice();for(const ke of ee)ke.next(U)}})}error(U){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=U;const{observers:ee}=this;for(;ee.length;)ee.shift().error(U)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:U}=this;for(;U.length;)U.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var U;return(null===(U=this.observers)||void 0===U?void 0:U.length)>0}_trySubscribe(U){return this._throwIfClosed(),super._trySubscribe(U)}_subscribe(U){return this._throwIfClosed(),this._checkFinalizedStatuses(U),this._innerSubscribe(U)}_innerSubscribe(U){const{hasError:ee,isStopped:ke,observers:Te}=this;return ee||ke?L.Lc:(Te.push(U),new L.w0(()=>(0,ie.P)(Te,U)))}_checkFinalizedStatuses(U){const{hasError:ee,thrownError:ke,isStopped:Te}=this;ee?U.error(ke):Te&&U.complete()}asObservable(){const U=new g.y;return U.source=this,U}}return le.create=(j,U)=>new se(j,U),le})();class se extends oe{constructor(j,U){super(),this.destination=j,this.source=U}next(j){var U,ee;null===(ee=null===(U=this.destination)||void 0===U?void 0:U.next)||void 0===ee||ee.call(U,j)}error(j){var U,ee;null===(ee=null===(U=this.destination)||void 0===U?void 0:U.error)||void 0===ee||ee.call(U,j)}complete(){var j,U;null===(U=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===U||U.call(j)}_subscribe(j){var U,ee;return null!==(ee=null===(U=this.source)||void 0===U?void 0:U.subscribe(j))&&void 0!==ee?ee:L.Lc}}},1867:(Je,ye,O)=>{"use strict";O.d(ye,{Hp:()=>ke,Lv:()=>ee});var g=O(2908),L=O(5414),R=O(4288),re=O(7050);function ie(){}const fe=le("C",void 0,void 0);function le(Y,ae,Ie){return{kind:Y,value:ae,error:Ie}}var j=O(6494),U=O(9160);class ee extends L.w0{constructor(ae){super(),this.isStopped=!1,ae?(this.destination=ae,(0,L.Nn)(ae)&&ae.add(this)):this.destination=ue}static create(ae,Ie,ve){return new ke(ae,Ie,ve)}next(ae){this.isStopped?Ue(le("N",ae,void 0),this):this._next(ae)}error(ae){this.isStopped?Ue(le("E",void 0,ae),this):(this.isStopped=!0,this._error(ae))}complete(){this.isStopped?Ue(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ae){this.destination.next(ae)}_error(ae){try{this.destination.error(ae)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class ke extends ee{constructor(ae,Ie,ve){let Ge;if(super(),(0,g.m)(ae))Ge=ae;else if(ae){let xe;({next:Ge,error:Ie,complete:ve}=ae),this&&R.v.useDeprecatedNextContext?(xe=Object.create(ae),xe.unsubscribe=()=>this.unsubscribe()):xe=ae,Ge=null==Ge?void 0:Ge.bind(xe),Ie=null==Ie?void 0:Ie.bind(xe),ve=null==ve?void 0:ve.bind(xe)}this.destination={next:Ge?Te(Ge):ie,error:Te(null!=Ie?Ie:Ve),complete:ve?Te(ve):ie}}}function Te(Y,ae){return(...Ie)=>{try{Y(...Ie)}catch(ve){R.v.useDeprecatedSynchronousErrorHandling?(0,U.O)(ve):(0,re.h)(ve)}}}function Ve(Y){throw Y}function Ue(Y,ae){const{onStoppedNotification:Ie}=R.v;Ie&&j.z.setTimeout(()=>Ie(Y,ae))}const ue={closed:!0,next:ie,error:Ve,complete:ie}},5414:(Je,ye,O)=>{"use strict";O.d(ye,{Lc:()=>fe,w0:()=>ie,Nn:()=>oe});var g=O(2908);const R=(0,O(6171).d)(le=>function(U){le(this),this.message=U?`${U.length} errors occurred during unsubscription:\n${U.map((ee,ke)=>`${ke+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=U});var re=O(7487);class ie{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:U}=this;if(U)if(this._parentage=null,Array.isArray(U))for(const Te of U)Te.remove(this);else U.remove(this);const{initialTeardown:ee}=this;if((0,g.m)(ee))try{ee()}catch(Te){j=Te instanceof R?Te.errors:[Te]}const{_teardowns:ke}=this;if(ke){this._teardowns=null;for(const Te of ke)try{se(Te)}catch(Ve){j=null!=j?j:[],Ve instanceof R?j=[...j,...Ve.errors]:j.push(Ve)}}if(j)throw new R(j)}}add(j){var U;if(j&&j!==this)if(this.closed)se(j);else{if(j instanceof ie){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._teardowns=null!==(U=this._teardowns)&&void 0!==U?U:[]).push(j)}}_hasParent(j){const{_parentage:U}=this;return U===j||Array.isArray(U)&&U.includes(j)}_addParent(j){const{_parentage:U}=this;this._parentage=Array.isArray(U)?(U.push(j),U):U?[U,j]:j}_removeParent(j){const{_parentage:U}=this;U===j?this._parentage=null:Array.isArray(U)&&(0,re.P)(U,j)}remove(j){const{_teardowns:U}=this;U&&(0,re.P)(U,j),j instanceof ie&&j._removeParent(this)}}ie.EMPTY=(()=>{const le=new ie;return le.closed=!0,le})();const fe=ie.EMPTY;function oe(le){return le instanceof ie||le&&"closed"in le&&(0,g.m)(le.remove)&&(0,g.m)(le.add)&&(0,g.m)(le.unsubscribe)}function se(le){(0,g.m)(le)?le():le.unsubscribe()}},4288:(Je,ye,O)=>{"use strict";O.d(ye,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},3703:(Je,ye,O)=>{"use strict";O.d(ye,{E:()=>L});const L=new(O(9105).y)(ie=>ie.complete())},2749:(Je,ye,O)=>{"use strict";O.d(ye,{D:()=>Ge});var g=O(5823),L=O(8985),R=O(5649),fe=O(9105),se=O(818),le=O(2908),j=O(7596);function ee(xe,qe){if(!xe)throw new Error("Iterable cannot be null");return new fe.y(We=>{(0,j.f)(We,qe,()=>{const ct=xe[Symbol.asyncIterator]();(0,j.f)(We,qe,()=>{ct.next().then(ne=>{ne.done?We.complete():We.next(ne.value)})},0,!0)})})}var ke=O(3746),Te=O(7516),Ve=O(3472),Ue=O(9203),ue=O(3135),Y=O(454),ae=O(6537);function Ge(xe,qe){return qe?function(xe,qe){if(null!=xe){if((0,ke.c)(xe))return function(xe,qe){return(0,g.Xf)(xe).pipe((0,R.R)(qe),(0,L.Q)(qe))}(xe,qe);if((0,Ve.z)(xe))return function(xe,qe){return new fe.y(We=>{let ct=0;return qe.schedule(function(){ct===xe.length?We.complete():(We.next(xe[ct++]),We.closed||this.schedule())})})}(xe,qe);if((0,Te.t)(xe))return function(xe,qe){return(0,g.Xf)(xe).pipe((0,R.R)(qe),(0,L.Q)(qe))}(xe,qe);if((0,ue.D)(xe))return ee(xe,qe);if((0,Ue.T)(xe))return function(xe,qe){return new fe.y(We=>{let ct;return(0,j.f)(We,qe,()=>{ct=xe[se.h](),(0,j.f)(We,qe,()=>{let ne,ce;try{({value:ne,done:ce}=ct.next())}catch(ge){return void We.error(ge)}ce?We.complete():We.next(ne)},0,!0)}),()=>(0,le.m)(null==ct?void 0:ct.return)&&ct.return()})}(xe,qe);if((0,ae.L)(xe))return function(xe,qe){return ee((0,ae.Q)(xe),qe)}(xe,qe)}throw(0,Y.z)(xe)}(xe,qe):(0,g.Xf)(xe)}},5823:(Je,ye,O)=>{"use strict";O.d(ye,{Xf:()=>ke});var g=O(6086),L=O(3472),R=O(7516),re=O(9105),ie=O(3746),fe=O(3135),oe=O(454),se=O(9203),le=O(6537),j=O(2908),U=O(7050),ee=O(746);function ke(ve){if(ve instanceof re.y)return ve;if(null!=ve){if((0,ie.c)(ve))return function(ve){return new re.y(Ge=>{const xe=ve[ee.L]();if((0,j.m)(xe.subscribe))return xe.subscribe(Ge);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ve);if((0,L.z)(ve))return function(ve){return new re.y(Ge=>{for(let xe=0;xe<ve.length&&!Ge.closed;xe++)Ge.next(ve[xe]);Ge.complete()})}(ve);if((0,R.t)(ve))return function(ve){return new re.y(Ge=>{ve.then(xe=>{Ge.closed||(Ge.next(xe),Ge.complete())},xe=>Ge.error(xe)).then(null,U.h)})}(ve);if((0,fe.D)(ve))return Y(ve);if((0,se.T)(ve))return function(ve){return new re.y(Ge=>{for(const xe of ve)if(Ge.next(xe),Ge.closed)return;Ge.complete()})}(ve);if((0,le.L)(ve))return function(ve){return Y((0,le.Q)(ve))}(ve)}throw(0,oe.z)(ve)}function Y(ve){return new re.y(Ge=>{(function(ve,Ge){var xe,qe,We,ct;return(0,g.mG)(this,void 0,void 0,function*(){try{for(xe=(0,g.KL)(ve);!(qe=yield xe.next()).done;)if(Ge.next(qe.value),Ge.closed)return}catch(ne){We={error:ne}}finally{try{qe&&!qe.done&&(ct=xe.return)&&(yield ct.call(xe))}finally{if(We)throw We.error}}Ge.complete()})})(ve,Ge).catch(xe=>Ge.error(xe))})}},8264:(Je,ye,O)=>{"use strict";O.d(ye,{T:()=>fe});var g=O(6007),L=O(5823),R=O(3703),re=O(5907),ie=O(2749);function fe(...oe){const se=(0,re.yG)(oe),le=(0,re._6)(oe,1/0),j=oe;return j.length?1===j.length?(0,L.Xf)(j[0]):(0,g.J)(le)((0,ie.D)(j,se)):R.E}},9817:(Je,ye,O)=>{"use strict";O.d(ye,{Q:()=>L});var g=O(1867);class L extends g.Lv{constructor(re,ie,fe,oe,se){super(re),this.onFinalize=se,this._next=ie?function(le){try{ie(le)}catch(j){re.error(j)}}:super._next,this._error=oe?function(le){try{oe(le)}catch(j){re.error(j)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(le){re.error(le)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;const{closed:ie}=this;super.unsubscribe(),!ie&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}},2201:(Je,ye,O)=>{"use strict";O.d(ye,{U:()=>R});var g=O(5711),L=O(9817);function R(re,ie){return(0,g.e)((fe,oe)=>{let se=0;fe.subscribe(new L.Q(oe,le=>{oe.next(re.call(ie,le,se++))}))})}},6007:(Je,ye,O)=>{"use strict";O.d(ye,{J:()=>R});var g=O(9964),L=O(7190);function R(re=1/0){return(0,g.z)(L.y,re)}},9964:(Je,ye,O)=>{"use strict";O.d(ye,{z:()=>se});var g=O(2201),L=O(5823),R=O(5711),ie=(O(7596),O(9817)),oe=O(2908);function se(le,j,U=1/0){return(0,oe.m)(j)?se((ee,ke)=>(0,g.U)((Te,Ve)=>j(ee,Te,ke,Ve))((0,L.Xf)(le(ee,ke))),U):("number"==typeof j&&(U=j),(0,R.e)((ee,ke)=>function(le,j,U,ee,ke,Te,Ve,Ue){const ue=[];let Y=0,ae=0,Ie=!1;const ve=()=>{Ie&&!ue.length&&!Y&&j.complete()},Ge=qe=>Y<ee?xe(qe):ue.push(qe),xe=qe=>{Y++;let We=!1;(0,L.Xf)(U(qe,ae++)).subscribe(new ie.Q(j,ct=>{j.next(ct)},()=>{We=!0},void 0,()=>{if(We)try{for(Y--;ue.length&&Y<ee;){const ct=ue.shift();xe(ct)}ve()}catch(ct){j.error(ct)}}))};return le.subscribe(new ie.Q(j,Ge,()=>{Ie=!0,ve()})),()=>{}}(ee,ke,le,U)))}},8985:(Je,ye,O)=>{"use strict";O.d(ye,{Q:()=>re});var g=O(7596),L=O(5711),R=O(9817);function re(ie,fe=0){return(0,L.e)((oe,se)=>{oe.subscribe(new R.Q(se,le=>(0,g.f)(se,ie,()=>se.next(le),fe),()=>(0,g.f)(se,ie,()=>se.complete(),fe),le=>(0,g.f)(se,ie,()=>se.error(le),fe)))})}},9452:(Je,ye,O)=>{"use strict";O.d(ye,{B:()=>fe});var g=O(2749),L=O(3453),R=O(7396),re=O(1867),ie=O(5711);function fe(se={}){const{connector:le=(()=>new R.x),resetOnError:j=!0,resetOnComplete:U=!0,resetOnRefCountZero:ee=!0}=se;return ke=>{let Te=null,Ve=null,Ue=null,ue=0,Y=!1,ae=!1;const Ie=()=>{null==Ve||Ve.unsubscribe(),Ve=null},ve=()=>{Ie(),Te=Ue=null,Y=ae=!1},Ge=()=>{const xe=Te;ve(),null==xe||xe.unsubscribe()};return(0,ie.e)((xe,qe)=>{ue++,!ae&&!Y&&Ie();const We=Ue=null!=Ue?Ue:le();qe.add(()=>{ue--,0===ue&&!ae&&!Y&&(Ve=oe(Ge,ee))}),We.subscribe(qe),Te||(Te=new re.Hp({next:ct=>We.next(ct),error:ct=>{ae=!0,Ie(),Ve=oe(ve,j,ct),We.error(ct)},complete:()=>{Y=!0,Ie(),Ve=oe(ve,U),We.complete()}}),(0,g.D)(xe).subscribe(Te))})(ke)}}function oe(se,le,...j){return!0===le?(se(),null):!1===le?null:le(...j).pipe((0,L.q)(1)).subscribe(()=>se())}},5649:(Je,ye,O)=>{"use strict";O.d(ye,{R:()=>L});var g=O(5711);function L(R,re=0){return(0,g.e)((ie,fe)=>{fe.add(R.schedule(()=>ie.subscribe(fe),re))})}},3453:(Je,ye,O)=>{"use strict";O.d(ye,{q:()=>re});var g=O(3703),L=O(5711),R=O(9817);function re(ie){return ie<=0?()=>g.E:(0,L.e)((fe,oe)=>{let se=0;fe.subscribe(new R.Q(oe,le=>{++se<=ie&&(oe.next(le),ie<=se&&oe.complete())}))})}},6801:(Je,ye,O)=>{"use strict";O.d(ye,{b:()=>ie});var g=O(2908),L=O(5711),R=O(9817),re=O(7190);function ie(fe,oe,se){const le=(0,g.m)(fe)||oe||se?{next:fe,error:oe,complete:se}:fe;return le?(0,L.e)((j,U)=>{var ee;null===(ee=le.subscribe)||void 0===ee||ee.call(le);let ke=!0;j.subscribe(new R.Q(U,Te=>{var Ve;null===(Ve=le.next)||void 0===Ve||Ve.call(le,Te),U.next(Te)},()=>{var Te;ke=!1,null===(Te=le.complete)||void 0===Te||Te.call(le),U.complete()},Te=>{var Ve;ke=!1,null===(Ve=le.error)||void 0===Ve||Ve.call(le,Te),U.error(Te)},()=>{var Te,Ve;ke&&(null===(Te=le.unsubscribe)||void 0===Te||Te.call(le)),null===(Ve=le.finalize)||void 0===Ve||Ve.call(le)}))}):re.y}},5480:(Je,ye,O)=>{"use strict";O.d(ye,{o:()=>ie});var g=O(5414);class L extends g.w0{constructor(oe,se){super()}schedule(oe,se=0){return this}}const R={setInterval(...fe){const{delegate:oe}=R;return((null==oe?void 0:oe.setInterval)||setInterval)(...fe)},clearInterval(fe){const{delegate:oe}=R;return((null==oe?void 0:oe.clearInterval)||clearInterval)(fe)},delegate:void 0};var re=O(7487);class ie extends L{constructor(oe,se){super(oe,se),this.scheduler=oe,this.work=se,this.pending=!1}schedule(oe,se=0){if(this.closed)return this;this.state=oe;const le=this.id,j=this.scheduler;return null!=le&&(this.id=this.recycleAsyncId(j,le,se)),this.pending=!0,this.delay=se,this.id=this.id||this.requestAsyncId(j,this.id,se),this}requestAsyncId(oe,se,le=0){return R.setInterval(oe.flush.bind(oe,this),le)}recycleAsyncId(oe,se,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return se;R.clearInterval(se)}execute(oe,se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(oe,se);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,se){let j,le=!1;try{this.work(oe)}catch(U){le=!0,j=U||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:oe,scheduler:se}=this,{actions:le}=se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(le,this),null!=oe&&(this.id=this.recycleAsyncId(se,oe,null)),this.delay=null,super.unsubscribe()}}}},6037:(Je,ye,O)=>{"use strict";O.d(ye,{v:()=>R});var g=O(2991);class L{constructor(ie,fe=L.now){this.schedulerActionCtor=ie,this.now=fe}schedule(ie,fe=0,oe){return new this.schedulerActionCtor(this,ie).schedule(oe,fe)}}L.now=g.l.now;class R extends L{constructor(ie,fe=L.now){super(ie,fe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ie){const{actions:fe}=this;if(this._active)return void fe.push(ie);let oe;this._active=!0;do{if(oe=ie.execute(ie.state,ie.delay))break}while(ie=fe.shift());if(this._active=!1,oe){for(;ie=fe.shift();)ie.unsubscribe();throw oe}}}},906:(Je,ye,O)=>{"use strict";O.d(ye,{z:()=>R});var g=O(5480);const R=new(O(6037).v)(g.o)},2991:(Je,ye,O)=>{"use strict";O.d(ye,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},6494:(Je,ye,O)=>{"use strict";O.d(ye,{z:()=>g});const g={setTimeout(...L){const{delegate:R}=g;return((null==R?void 0:R.setTimeout)||setTimeout)(...L)},clearTimeout(L){const{delegate:R}=g;return((null==R?void 0:R.clearTimeout)||clearTimeout)(L)},delegate:void 0}},818:(Je,ye,O)=>{"use strict";O.d(ye,{h:()=>L});const L="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},746:(Je,ye,O)=>{"use strict";O.d(ye,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},5907:(Je,ye,O)=>{"use strict";O.d(ye,{_6:()=>fe,jO:()=>re,yG:()=>ie});var g=O(2908);function R(oe){return oe[oe.length-1]}function re(oe){return(0,g.m)(R(oe))?oe.pop():void 0}function ie(oe){return function(oe){return oe&&(0,g.m)(oe.schedule)}(R(oe))?oe.pop():void 0}function fe(oe,se){return"number"==typeof R(oe)?oe.pop():se}},7487:(Je,ye,O)=>{"use strict";function g(L,R){if(L){const re=L.indexOf(R);0<=re&&L.splice(re,1)}}O.d(ye,{P:()=>g})},6171:(Je,ye,O)=>{"use strict";function g(L){const re=L(ie=>{Error.call(ie),ie.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}O.d(ye,{d:()=>g})},9160:(Je,ye,O)=>{"use strict";O.d(ye,{x:()=>R,O:()=>re});var g=O(4288);let L=null;function R(ie){if(g.v.useDeprecatedSynchronousErrorHandling){const fe=!L;if(fe&&(L={errorThrown:!1,error:null}),ie(),fe){const{errorThrown:oe,error:se}=L;if(L=null,oe)throw se}}else ie()}function re(ie){g.v.useDeprecatedSynchronousErrorHandling&&L&&(L.errorThrown=!0,L.error=ie)}},7596:(Je,ye,O)=>{"use strict";function g(L,R,re,ie=0,fe=!1){const oe=R.schedule(function(){re(),fe?L.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(L.add(oe),!fe)return oe}O.d(ye,{f:()=>g})},7190:(Je,ye,O)=>{"use strict";function g(L){return L}O.d(ye,{y:()=>g})},3472:(Je,ye,O)=>{"use strict";O.d(ye,{z:()=>g});const g=L=>L&&"number"==typeof L.length&&"function"!=typeof L},3135:(Je,ye,O)=>{"use strict";O.d(ye,{D:()=>L});var g=O(2908);function L(R){return Symbol.asyncIterator&&(0,g.m)(null==R?void 0:R[Symbol.asyncIterator])}},2908:(Je,ye,O)=>{"use strict";function g(L){return"function"==typeof L}O.d(ye,{m:()=>g})},3746:(Je,ye,O)=>{"use strict";O.d(ye,{c:()=>R});var g=O(746),L=O(2908);function R(re){return(0,L.m)(re[g.L])}},9203:(Je,ye,O)=>{"use strict";O.d(ye,{T:()=>R});var g=O(818),L=O(2908);function R(re){return(0,L.m)(null==re?void 0:re[g.h])}},7516:(Je,ye,O)=>{"use strict";O.d(ye,{t:()=>L});var g=O(2908);function L(R){return(0,g.m)(null==R?void 0:R.then)}},6537:(Je,ye,O)=>{"use strict";O.d(ye,{Q:()=>R,L:()=>re});var g=O(6086),L=O(2908);function R(ie){return(0,g.FC)(this,arguments,function*(){const oe=ie.getReader();try{for(;;){const{value:se,done:le}=yield(0,g.qq)(oe.read());if(le)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(se)}}finally{oe.releaseLock()}})}function re(ie){return(0,L.m)(null==ie?void 0:ie.getReader)}},5711:(Je,ye,O)=>{"use strict";O.d(ye,{A:()=>L,e:()=>R});var g=O(2908);function L(re){return(0,g.m)(null==re?void 0:re.lift)}function R(re){return ie=>{if(L(ie))return ie.lift(function(fe){try{return re(fe,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},7050:(Je,ye,O)=>{"use strict";O.d(ye,{h:()=>R});var g=O(4288),L=O(6494);function R(re){L.z.setTimeout(()=>{const{onUnhandledError:ie}=g.v;if(!ie)throw re;ie(re)})}},454:(Je,ye,O)=>{"use strict";function g(L){return new TypeError(`You provided ${null!==L&&"object"==typeof L?"an invalid object":`'${L}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(ye,{z:()=>g})},9121:(Je,ye,O)=>{"use strict";var g=O(3668);let L=null;function R(){return L}const oe=new g.OlP("DocumentToken");let se=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.LFG)(U)},providedIn:"platform"}),n})();const j=new g.OlP("Location Initialized");let U=(()=>{class n extends se{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return R().getBaseHref(this._doc)}onPopState(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){ee()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){ee()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(oe))},n.\u0275prov=g.Yz7({token:n,factory:function(){return new U((0,g.LFG)(oe))},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ve(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function(n){const e=(0,g.LFG)(oe).location;return new Ie((0,g.LFG)(se),e&&e.origin||"")}()},providedIn:"root"}),n})();const ae=new g.OlP("appBaseHref");let Ie=(()=>{class n extends ue{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,l){const h=this.prepareExternalUrl(o+Ue(l));this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,l){const h=this.prepareExternalUrl(o+Ue(l));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null==(o=(r=this._platformLocation).historyGo)||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se),g.LFG(ae,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),ve=(()=>{class n extends ue{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,l){let h=this.prepareExternalUrl(o+Ue(l));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,l){let h=this.prepareExternalUrl(o+Ue(l));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null==(o=(r=this._platformLocation).historyGo)||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se),g.LFG(ae,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ge=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ve(We(o)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,We(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null==(o=(r=this._platformStrategy).historyGo)||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=Te,n.stripTrailingSlash=Ve,n.\u0275fac=function(t){return new(t||n)(g.LFG(ue),g.LFG(se))},n.\u0275prov=g.Yz7({token:n,factory:function(){return new Ge((0,g.LFG)(ue),(0,g.LFG)(se))},providedIn:"root"}),n})();function We(n){return n.replace(/\/index.html$/,"")}var ce=(()=>((ce=ce||{})[ce.Zero=0]="Zero",ce[ce.One=1]="One",ce[ce.Two=2]="Two",ce[ce.Few=3]="Few",ce[ce.Many=4]="Many",ce[ce.Other=5]="Other",ce))();const Ne=g.kL8;class ai{}let an=(()=>{class n extends ai{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Ne(r||this.locale)(t)){case ce.Zero:return"zero";case ce.One:return"one";case ce.Two:return"two";case ce.Few:return"few";case ce.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.soG))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Zr=(()=>{class n{constructor(t,r,o,l){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=l,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class bc{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let aa=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((o,l,h)=>{if(null==o.previousIndex){const m=this._viewContainer.createEmbeddedView(this._template,new bc(null,this._ngForOf,-1,-1),null===h?void 0:h),w=new As(o,m);r.push(w)}else if(null==h)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const m=this._viewContainer.get(l);this._viewContainer.move(m,h);const w=new As(o,m);r.push(w)}});for(let o=0;o<r.length;o++)this._perViewChange(r[o].view,r[o].record);for(let o=0,l=this._viewContainer.length;o<l;o++){const h=this._viewContainer.get(o);h.context.index=o,h.context.count=l,h.context.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{this._viewContainer.get(o.currentIndex).context.$implicit=o.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class As{constructor(e,t){this.record=e,this.view=t}}let Ss=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new $a,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ns("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ns("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class $a{constructor(){this.$implicit=null,this.ngIf=null}}function ns(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let rh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[{provide:ai,useClass:an}]}),n})();function Yr(n){return"server"===n}let tl=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new is((0,g.LFG)(oe),window)}),n})();class is{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const l=o.shadowRoot;if(l){const h=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(h)return h}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],o-l[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=sh(this.window.history)||sh(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function sh(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Qr extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Qr,L||(L=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(vi=vi||document.querySelector("base"),vi?vi.getAttribute("href"):null);return null==t?null:function(n){br=br||document.createElement("a"),br.setAttribute("href",n);const e=br.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){vi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let br,vi=null;const Co=new g.OlP("TRANSITION_ID"),Ut=[{provide:g.ip1,useFactory:function(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=R(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<o.length;l++)r.remove(o[l])})}},deps:[Co,oe,g.zs3],multi:!0}];class Wa{static init(){(0,g.VLi)(new Wa)}addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const l=e.findTestabilityInTree(r,o);if(null==l)throw new Error("Could not find testability for element.");return l},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let l=o.length,h=!1;const m=function(w){h=h||w,l--,0==l&&r(h)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?R().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Ns=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Ka=new g.OlP("EventManagerPlugins");let Ur=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let l=0;l<o.length;l++){const h=o[l];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ka),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class To{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=R().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let ir=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),ft=(()=>{class n extends ir{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(l=>{const h=this._doc.createElement("style");h.textContent=l,o.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(rl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(rl))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(oe))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function rl(n){R().remove(n)}const to={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},no=/%COMP%/g;function Ui(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Ui(n,o,t):(o=o.replace(no,n),t.push(o))}return t}function Rn(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ss=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Tr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Vc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new Uc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Ui(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ur),g.LFG(ft),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Tr{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(to[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const l=to[o];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=to[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Rn(r)):this.eventManager.addEventListener(e,t,Rn(r))}}class Vc extends Tr{constructor(e,t,r,o){super(e),this.component=r;const l=Ui(o+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(no,o+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(no,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Uc extends Tr{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Ui(o.id,o.styles,[]);for(let h=0;h<l.length;h++){const m=document.createElement("style");m.textContent=l[h],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ao=(()=>{class n extends To{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(oe))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const So=["alt","control","meta","shift"],os={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ro={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Mo={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ui=(()=>{class n extends To{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const l=n.parseEventName(r),h=n.eventCallback(l.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>R().onAndCancel(t,l.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const l=n._normalizeKey(r.pop());let h="";if(So.forEach(w=>{const A=r.indexOf(w);A>-1&&(r.splice(A,1),h+=w+".")}),h+=l,0!=r.length||0===l.length)return null;const m={};return m.domEventName=o,m.fullKey=h,m}static getEventFullKey(t){let r="",o=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ro.hasOwnProperty(e)&&(e=ro[e]))}return os[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),So.forEach(l=>{l!=o&&Mo[l](t)&&(r+=l+".")}),r+=o,r}static eventCallback(t,r,o){return l=>{n.getEventFullKey(l)===t&&o.runGuarded(()=>r(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(oe))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Xa=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function(){Qr.makeCurrent(),Wa.init()},multi:!0},{provide:oe,useFactory:function(){return(0,g.RDi)(document),document},deps:[]}]),No=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function(){return new g.qLn},deps:[]},{provide:Ka,useClass:Ao,multi:!0,deps:[oe,g.R0b,g.Lbi]},{provide:Ka,useClass:ui,multi:!0,deps:[oe]},{provide:ss,useClass:ss,deps:[Ur,ft,g.AFp]},{provide:g.FYo,useExisting:ss},{provide:ir,useExisting:ft},{provide:ft,useClass:ft,deps:[oe]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:Ur,useClass:Ur,deps:[Ka,g.R0b]},{provide:class{},useClass:Ns,deps:[]}];let ol=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:Co,useExisting:g.AFp},Ut]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:No,imports:[rh,g.hGG]}),n})();"undefined"!=typeof window&&window;var In=O(2749),so=O(5907);function it(...n){const e=(0,so.yG)(n);return(0,In.D)(n,e)}var Bi=O(7396);class Ei extends Bi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var li=O(9105);const{isArray:ko}=Array,{getPrototypeOf:np,prototype:ga,keys:oo}=Object;function wi(n){if(1===n.length){const e=n[0];if(ko(e))return{args:e,keys:null};if(function(n){return n&&"object"==typeof n&&np(n)===ga}(e)){const t=oo(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ao=O(7190),bt=O(2201);const{isArray:ch}=Array;function ks(n){return(0,bt.U)(e=>function(n,e){return ch(e)?n(...e):n(e)}(n,e))}function Fo(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var er=O(9817),uo=O(7596);function Ii(n,e,t){n?(0,uo.f)(t,n,e):e()}const ma=(0,O(6171).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var us=O(6007);function Lo(...n){return(0,us.J)(1)((0,In.D)(n,(0,so.yG)(n)))}var Di=O(5823);function Fs(n){return new li.y(e=>{(0,Di.Xf)(n()).subscribe(e)})}var ls=O(3703),gl=O(5414),Gt=O(5711);function co(){return(0,Gt.e)((n,e)=>{let t=null;n._refCount++;const r=new er.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,l=t;t=null,o&&(!l||o===l)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Vo extends li.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Gt.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new gl.w0;const t=this.getSubject();e.add(this.source.subscribe(new er.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=gl.w0.EMPTY)}return e}refCount(){return co()(this)}}function sr(n,e){return(0,Gt.e)((t,r)=>{let o=null,l=0,h=!1;const m=()=>h&&!o&&r.complete();t.subscribe(new er.Q(r,w=>{null==o||o.unsubscribe();let A=0;const N=l++;(0,Di.Xf)(n(w,N)).subscribe(o=new er.Q(r,P=>r.next(e?e(w,P,N,A++):P),()=>{o=null,m()}))},()=>{h=!0,m()}))})}var cs=O(3453);function ds(...n){const e=(0,so.yG)(n);return(0,Gt.e)((t,r)=>{(e?Lo(n,t,e):Lo(n,t)).subscribe(r)})}function Ls(n,e,t,r,o){return(l,h)=>{let m=t,w=e,A=0;l.subscribe(new er.Q(h,N=>{const P=A++;w=m?n(w,N,P):(m=!0,N),r&&h.next(w)},o&&(()=>{m&&h.next(w),h.complete()})))}}function Ci(n,e){return(0,Gt.e)(Ls(n,e,arguments.length>=2,!0))}function Ar(n,e){return(0,Gt.e)((t,r)=>{let o=0;t.subscribe(new er.Q(r,l=>n.call(e,l,o++)&&r.next(l)))})}function Jr(n){return(0,Gt.e)((e,t)=>{let l,r=null,o=!1;r=e.subscribe(new er.Q(t,void 0,void 0,h=>{l=(0,Di.Xf)(n(h,Jr(n)(e))),r?(r.unsubscribe(),r=null,l.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,l.subscribe(t))})}var Tn=O(9964),au=O(2908);function Vs(n,e){return(0,au.m)(e)?(0,Tn.z)(n,e,1):(0,Tn.z)(n,1)}function An(n){return n<=0?()=>ls.E:(0,Gt.e)((e,t)=>{let r=[];e.subscribe(new er.Q(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Uo(n=rp){return(0,Gt.e)((e,t)=>{let r=!1;e.subscribe(new er.Q(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function rp(){return new ma}function Hc(n){return(0,Gt.e)((e,t)=>{let r=!1;e.subscribe(new er.Q(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function ho(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ar((o,l)=>n(o,l,r)):ao.y,(0,cs.q)(1),t?Hc(e):Uo(()=>new ma))}var Xr=O(6801);class Br{constructor(e,t){this.id=e,this.url=t}}class gh extends Br{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Sn extends Br{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class uu extends Br{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ya extends Br{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ip extends Br{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ml extends Br{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bi extends Br{constructor(e,t,r,o,l){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ti extends Br{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yl extends Br{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _a{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bo{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class va{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gc{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _l{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mh{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ea{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const St="primary";class Sr{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ji(n){return new Sr(n)}const jo="ngNavigationCancelingError";function yh(n){const e=Error("NavigationCancelingError: "+n);return e[jo]=!0,e}function _h(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let l=0;l<r.length;l++){const h=r[l],m=n[l];if(h.startsWith(":"))o[h.substring(1)]=m;else if(h!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Mr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let l=0;l<t.length;l++)if(o=t[l],!wa(n[o],e[o]))return!1;return!0}function wa(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,l)=>r[l]===o)}return n===e}function zc(n){return Array.prototype.concat.apply([],n)}function Ia(n){return n.length>0?n[n.length-1]:null}function Pn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function xr(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,In.D)(Promise.resolve(n)):it(n)}const Da={exact:function Eh(n,e,t){if(!ze(n.segments,e.segments)||!F(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Eh(n.children[r],e.children[r],t))return!1;return!0},subset:C},Bs={exact:function(n,e){return Mr(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>wa(n[t],e[t]))},ignored:()=>!0};function Wc(n,e,t){return Da[t.paths](n.root,e.root,t.matrixParams)&&Bs[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function C(n,e,t){return M(n,e,e.segments,t)}function M(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!ze(o,t)||e.hasChildren()||!F(o,t,r))}if(n.segments.length===t.length){if(!ze(n.segments,t)||!F(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!C(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(ze(n.segments,o)&&F(n.segments,o,r)&&n.children[St])&&M(n.children[St],e,l,r)}}function F(n,e,t){return e.every((r,o)=>Bs[t](n[o].parameters,r.parameters))}class K{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ji(this.queryParams)),this._queryParamMap}toString(){return ci.serialize(this)}}class W{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Pn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _n(this)}}class Se{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ji(this.parameters)),this._parameterMap}toString(){return El(this)}}function ze(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class cn{}class pr{parse(e){const t=new up(e);return new K(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${gr(e.root,!0)}`,r=function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${mr(t)}=${mr(o)}`).join("&"):`${mr(t)}=${mr(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);var n;return`${t}${r}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const ci=new pr;function _n(n){return n.segments.map(e=>El(e)).join("/")}function gr(n,e){if(!n.hasChildren())return _n(n);if(e){const t=n.children[St]?gr(n.children[St],!1):"",r=[];return Pn(n.children,(o,l)=>{l!==St&&r.push(`${l}:${gr(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return Pn(n.children,(r,o)=>{o===St&&(t=t.concat(e(r,o)))}),Pn(n.children,(r,o)=>{o!==St&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===St?[gr(n.children[St],!1)]:[`${o}:${gr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[St]?`${_n(n)}/${t[0]}`:`${_n(n)}/(${t.join("//")})`}}function Ca(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mr(n){return Ca(n).replace(/%3B/gi,";")}function hs(n){return Ca(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fs(n){return decodeURIComponent(n)}function ba(n){return fs(n.replace(/\+/g,"%20"))}function El(n){return`${hs(n.path)}${function(n){return Object.keys(n).map(e=>`;${hs(e)}=${hs(n[e])}`).join("")}(n.parameters)}`}const Ta=/^[^\/()?;=#]+/;function Ho(n){const e=n.match(Ta);return e?e[0]:""}const Am=/^[^=?&#]+/,ap=/^[^&#]+/;class up{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new W([],{}):new W([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[St]=new W(e,t)),r}parseSegment(){const e=Ho(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Se(fs(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ho(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Ho(this.remaining);o&&(r=o,this.capture(r))}e[fs(t)]=fs(r)}parseQueryParam(e){const t=function(n){const e=n.match(Am);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function(n){const e=n.match(ap);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const o=ba(t),l=ba(r);if(e.hasOwnProperty(o)){let h=e[o];Array.isArray(h)||(h=[h],e[o]=h),h.push(l)}else e[o]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ho(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=St);const h=this.parseChildren();t[l]=1===Object.keys(h).length?h[St]:new W([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class lp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=wh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=wh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=wl(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return wl(e,this._root).map(t=>t.value)}}function wh(n,e){if(n===e.value)return e;for(const t of e.children){const r=wh(n,t);if(r)return r}return null}function wl(n,e){if(n===e.value)return[e];for(const t of e.children){const r=wl(n,t);if(r.length)return r.unshift(e),r}return[]}class $i{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function js(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class po extends lp{constructor(e,t){super(e),this.snapshot=t,Qc(this,e)}toString(){return this.snapshot.toString()}}function Kc(n,e){const t=function(n,e){const h=new lu([],{},{},"",{},St,e,null,n.root,-1,{});return new Yc("",new $i(h,[]))}(n,e),r=new Ei([new Se("",{})]),o=new Ei({}),l=new Ei({}),h=new Ei({}),m=new Ei(""),w=new Aa(r,o,h,m,l,St,e,t.root);return w.snapshot=t.root,new po(new $i(w,[]),t)}class Aa{constructor(e,t,r,o,l,h,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=h,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,bt.U)(e=>ji(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,bt.U)(e=>ji(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Il(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],l=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(l.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:vt(vt({},e.params),t.params),data:vt(vt({},e.data),t.data),resolve:vt(vt({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class lu{constructor(e,t,r,o,l,h,m,w,A,N,P){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=h,this.component=m,this.routeConfig=w,this._urlSegment=A,this._lastPathIndex=N,this._resolve=P}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ji(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ji(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Yc extends lp{constructor(e,t){super(t),this.url=e,Qc(this,t)}toString(){return Jc(this._root)}}function Qc(n,e){e.value._routerState=n,e.children.forEach(t=>Qc(n,t))}function Jc(n){const e=n.children.length>0?` { ${n.children.map(Jc).join(", ")} } `:"";return`${n.value}${e}`}function Dl(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Mr(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Mr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ih(n,e){const t=Mr(n.params,e.params)&&function(n,e){return ze(n,e)&&n.every((t,r)=>Mr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ih(n.parent,e.parent))}function Cl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Cl(n,r,o);return Cl(n,r)})}(n,e,t);return new $i(r,o)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const h=l.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(m=>Cl(n,m)),h}}const r=function(n){return new Aa(new Ei(n.url),new Ei(n.params),new Ei(n.queryParams),new Ei(n.fragment),new Ei(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(l=>Cl(n,l));return new $i(r,o)}}function Tl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Xc(n){return"object"==typeof n&&null!=n&&n.outlets}function Al(n,e,t,r,o){let l={};return r&&Pn(r,(h,m)=>{l[m]=Array.isArray(h)?h.map(w=>`${w}`):`${h}`}),new K(t.root===n?e:xm(t.root,n,e),l,o)}function xm(n,e,t){const r={};return Pn(n.children,(o,l)=>{r[l]=o===e?t:xm(o,e,t)}),new W(n.segments,r)}class Rm{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Tl(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Xc);if(o&&o!==Ia(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ed{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function dp(n,e,t){if(n||(n=new W([],{})),0===n.segments.length&&n.hasChildren())return Sl(n,e,t);const r=function(n,e,t){let r=0,o=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return l;const h=n.segments[o],m=t[r];if(Xc(m))break;const w=`${m}`,A=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&A&&"object"==typeof A&&void 0===A.outlets){if(!du(w,A,h))return l;r+=2}else{if(!du(w,{},h))return l;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new W(n.segments.slice(0,r.pathIndex),{});return l.children[St]=new W(n.segments.slice(r.pathIndex),n.children),Sl(l,0,o)}return r.match&&0===o.length?new W(n.segments,{}):r.match&&!n.hasChildren()?cu(n,e,t):r.match?Sl(n,0,o):cu(n,e,t)}function Sl(n,e,t){if(0===t.length)return new W(n.segments,{});{const r=function(n){return Xc(n[0])?n[0].outlets:{[St]:n}}(t),o={};return Pn(r,(l,h)=>{"string"==typeof l&&(l=[l]),null!==l&&(o[h]=dp(n.children[h],e,l))}),Pn(n.children,(l,h)=>{void 0===r[h]&&(o[h]=l)}),new W(n.segments,o)}}function cu(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const l=t[o];if(Xc(l)){const w=hp(l.outlets);return new W(r,w)}if(0===o&&Tl(t[0])){r.push(new Se(n.segments[e].path,ps(t[0]))),o++;continue}const h=Xc(l)?l.outlets[St]:`${l}`,m=o<t.length-1?t[o+1]:null;h&&m&&Tl(m)?(r.push(new Se(h,ps(m))),o+=2):(r.push(new Se(h,{})),o++)}return new W(r,{})}function hp(n){const e={};return Pn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=cu(new W([],{}),0,t))}),e}function ps(n){const e={};return Pn(n,(t,r)=>e[r]=`${t}`),e}function du(n,e,t){return n==t.path&&Mr(e,t.parameters)}class fp{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Dl(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=js(t);e.children.forEach(l=>{const h=l.value.outlet;this.deactivateRoutes(l,o[h],r),delete o[h]}),Pn(o,(l,h)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(o===l)if(o.component){const h=r.getContext(o.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else l&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,l=js(e);for(const h of Object.keys(l))this.deactivateRouteAndItsChildren(l[h],o);if(r&&r.outlet){const h=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,l=js(e);for(const h of Object.keys(l))this.deactivateRouteAndItsChildren(l[h],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=js(t);e.children.forEach(l=>{this.activateRoutes(l,o[l.value.outlet],r),this.forwardEvent(new mh(l.value.snapshot))}),e.children.length&&this.forwardEvent(new Gc(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(Dl(o),o===l)if(o.component){const h=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const h=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(m.contexts),h.attachRef=m.componentRef,h.route=m.route.value,h.outlet&&h.outlet.attach(m.componentRef,m.route.value),Dl(m.route.value),this.activateChildRoutes(e,null,h.children)}else{const m=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;h.attachRef=null,h.route=o,h.resolver=w,h.outlet&&h.outlet.activateWith(o,w),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class gp{constructor(e,t){this.routes=e,this.module=t}}function Sa(n){return"function"==typeof n}function go(n){return n instanceof K}const qo=Symbol("INITIAL_VALUE");function xl(){return sr(n=>function(...n){const e=(0,so.yG)(n),t=(0,so.jO)(n),{args:r,keys:o}=wi(n);if(0===r.length)return(0,In.D)([],e);const l=new li.y(function(n,e,t=ao.y){return r=>{Ii(e,()=>{const{length:o}=n,l=new Array(o);let h=o,m=o;for(let w=0;w<o;w++)Ii(e,()=>{const A=(0,In.D)(n[w],e);let N=!1;A.subscribe(new er.Q(r,P=>{l[w]=P,N||(N=!0,m--),m||r.next(t(l.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,o?h=>Fo(o,h):ao.y));return t?l.pipe(ks(t)):l}(n.map(e=>e.pipe((0,cs.q)(1),ds(qo)))).pipe(Ci((e,t)=>{let r=!1;return t.reduce((o,l,h)=>o!==qo?o:(l===qo&&(r=!0),r||!1!==l&&h!==t.length-1&&!go(l)?o:l),e)},qo),Ar(e=>e!==qo),(0,bt.U)(e=>go(e)?e:!0===e),(0,cs.q)(1)))}class yp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new hu,this.attachRef=null}}class hu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new yp,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let _p=(()=>{class n{constructor(t,r,o,l,h){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=l||St,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new vp(t,m,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(hu),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class vp{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Aa?this.route:e===hu?this.childContexts:this.parent.get(e,t)}}let Rl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[_p],encapsulation:2}),n})();function Lm(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];_(r,d(e,r))}}function _(n,e){n.children&&Lm(n.children,e)}function d(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function p(n){const e=n.children&&n.children.map(p),t=e?fi(vt({},n),{children:e}):vt({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==St&&(t.component=Rl),t}function v(n){return n.outlet||St}function T(n,e){const t=n.filter(r=>v(r)===e);return t.push(...n.filter(r=>v(r)!==e)),t}const x={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function z(n,e,t){var m;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?vt({},x):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const o=(e.matcher||_h)(t,n,e);if(!o)return vt({},x);const l={};Pn(o.posParams,(w,A)=>{l[A]=w.path});const h=o.consumed.length>0?vt(vt({},l),o.consumed[o.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:o.consumed,lastChild:o.consumed.length,parameters:h,positionalParamSegments:null!=(m=o.posParams)?m:{}}}function pe(n,e,t,r,o="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>dn(n,e,r)&&v(r)!==St)}(n,t,r)){const h=new W(e,function(n,e,t,r){const o={};o[St]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&v(l)!==St){const h=new W([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[v(l)]=h}return o}(n,e,r,new W(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>dn(n,e,r))}(n,t,r)){const h=new W(n.segments,function(n,e,t,r,o,l){const h={};for(const m of r)if(dn(n,t,m)&&!o[v(m)]){const w=new W([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===l?n.segments.length:e.length,h[v(m)]=w}return vt(vt({},o),h)}(n,e,t,r,n.children,o));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const l=new W(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function dn(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ei(n,e,t,r){return!!(v(n)===r||r!==St&&dn(e,t,n))&&("**"===n.path||z(e,n,t).matched)}function Ai(n,e,t){return 0===e.length&&!n.children[t]}class zn{constructor(e){this.segmentGroup=e||null}}class fu{constructor(e){this.urlTree=e}}function pu(n){return new li.y(e=>e.error(new zn(n)))}function td(n){return new li.y(e=>e.error(new fu(n)))}function yr(n){return new li.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Th{constructor(e,t,r,o,l){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=pe(this.urlTree.root,[],[],this.config).segmentGroup,t=new W(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,St).pipe((0,bt.U)(l=>this.createUrlTree(rd(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Jr(l=>{if(l instanceof fu)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof zn?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,St).pipe((0,bt.U)(o=>this.createUrlTree(rd(o),e.queryParams,e.fragment))).pipe(Jr(o=>{throw o instanceof zn?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new W([],{[St]:e}):e;return new K(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,bt.U)(l=>new W([],l))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const l of Object.keys(r.children))"primary"===l?o.unshift(l):o.push(l);return(0,In.D)(o).pipe(Vs(l=>{const h=r.children[l],m=T(t,l);return this.expandSegmentGroup(e,m,h,l).pipe((0,bt.U)(w=>({segment:w,outlet:l})))}),Ci((l,h)=>(l[h.outlet]=h.segment,l),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ar((o,l)=>n(o,l,r)):ao.y,An(1),t?Hc(e):Uo(()=>new ma))}())}expandSegment(e,t,r,o,l,h){return(0,In.D)(r).pipe(Vs(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,l,h).pipe(Jr(A=>{if(A instanceof zn)return it(null);throw A}))),ho(m=>!!m),Jr((m,w)=>{if(m instanceof ma||"EmptyError"===m.name){if(Ai(t,o,l))return it(new W([],{}));throw new zn(t)}throw m}))}expandSegmentAgainstRoute(e,t,r,o,l,h,m){return ei(o,t,l,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,l,h):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,h):pu(t):pu(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?td(l):this.lineralizeSegments(r,l).pipe((0,Tn.z)(h=>{const m=new W(h,{});return this.expandSegment(e,m,t,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,h){const{matched:m,consumedSegments:w,lastChild:A,positionalParamSegments:N}=z(t,o,l);if(!m)return pu(t);const P=this.applyRedirectCommands(w,o.redirectTo,N);return o.redirectTo.startsWith("/")?td(P):this.lineralizeSegments(o,P).pipe((0,Tn.z)(Z=>this.expandSegment(e,t,r,Z.concat(l.slice(A)),h,!1)))}matchSegmentAgainstRoute(e,t,r,o,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?it(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,bt.U)(Z=>(r._loadedConfig=Z,new W(o,{})))):it(new W(o,{}));const{matched:h,consumedSegments:m,lastChild:w}=z(t,r,o);if(!h)return pu(t);const A=o.slice(w);return this.getChildConfig(e,r,o).pipe((0,Tn.z)(P=>{const Z=P.module,te=P.routes,{segmentGroup:Ce,slicedSegments:Ye}=pe(t,m,A,te),et=new W(Ce.segments,Ce.children);if(0===Ye.length&&et.hasChildren())return this.expandChildren(Z,te,et).pipe((0,bt.U)(Bt=>new W(m,Bt)));if(0===te.length&&0===Ye.length)return it(new W(m,{}));const Qt=v(r)===l;return this.expandSegment(Z,et,te,Ye,Qt?St:l,!0).pipe((0,bt.U)(cr=>new W(m.concat(cr.segments),cr.children)))}))}getChildConfig(e,t,r){return t.children?it(new gp(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?it(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Tn.z)(o=>{return o?this.configLoader.load(e.injector,t).pipe((0,bt.U)(l=>(t._loadedConfig=l,l))):(n=t,new li.y(e=>e.error(yh(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):it(new gp([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?it(o.map(h=>{const m=e.get(h);let w;if((n=m)&&Sa(n.canLoad))w=m.canLoad(t,r);else{if(!Sa(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}var n;return xr(w)})).pipe(xl(),(0,Xr.b)(h=>{if(!go(h))return;const m=yh(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw m.url=h,m}),(0,bt.U)(h=>!0===h)):it(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return it(r);if(o.numberOfChildren>1||!o.children[St])return yr(e.redirectTo);o=o.children[St]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const l=this.createSegmentGroup(e,t.root,r,o);return new K(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Pn(e,(o,l)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[l]=t[m]}else r[l]=o}),r}createSegmentGroup(e,t,r,o){const l=this.createSegments(e,t.segments,r,o);let h={};return Pn(t.children,(m,w)=>{h[w]=this.createSegmentGroup(e,m,r,o)}),new W(l,h)}createSegments(e,t,r,o){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,o):this.findOrReturn(l,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function rd(n){const e={};for(const r of Object.keys(n.children)){const l=rd(n.children[r]);(l.segments.length>0||l.hasChildren())&&(e[r]=l)}return function(n){if(1===n.numberOfChildren&&n.children[St]){const e=n.children[St];return new W(n.segments.concat(e.segments),e.children)}return n}(new W(n.segments,e))}class Sh{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class wp{constructor(e,t){this.component=e,this.route=t}}function Hv(n,e,t){const r=n._root;return Nl(r,e?e._root:null,t,[r.value])}function Ip(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Nl(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=js(e);return n.children.forEach(h=>{(function(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,h=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(h&&l.routeConfig===h.routeConfig){const w=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ze(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ze(n.url,e.url)||!Mr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ih(n,e)||!Mr(n.queryParams,e.queryParams);default:return!Ih(n,e)}}(h,l,l.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new Sh(r)):(l.data=h.data,l._resolvedData=h._resolvedData),Nl(n,e,l.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new wp(m.outlet.component,h))}else h&&Dp(e,m,o),o.canActivateChecks.push(new Sh(r)),Nl(n,null,l.component?m?m.children:null:t,r,o)})(h,l[h.value.outlet],t,r.concat([h.value]),o),delete l[h.value.outlet]}),Pn(l,(h,m)=>Dp(h,t.getContext(m),o)),o}function Dp(n,e,t){const r=js(n),o=n.value;Pn(r,(l,h)=>{Dp(l,o.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new wp(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class xI{}function Um(n){return new li.y(e=>e.error(n))}class NI{constructor(e,t,r,o,l,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=h}recognize(){const e=pe(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,St);if(null===t)return null;const r=new lu([],Object.freeze({}),Object.freeze(vt({},this.urlTree.queryParams)),this.urlTree.fragment,{},St,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new $i(r,t),l=new Yc(this.url,o);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,r=Il(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const l of Object.keys(t.children)){const h=t.children[l],m=T(e,l),w=this.processSegmentGroup(m,h,l);if(null===w)return null;r.push(...w)}const o=qv(r);return o.sort((e,t)=>e.value.outlet===St?-1:t.value.outlet===St?1:e.value.outlet.localeCompare(t.value.outlet)),o}processSegment(e,t,r,o){for(const l of e){const h=this.processSegmentAgainstRoute(l,t,r,o);if(null!==h)return h}return Ai(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!ei(e,t,r,o))return null;let l,h=[],m=[];if("**"===e.path){const te=r.length>0?Ia(r).parameters:{};l=new lu(r,te,Object.freeze(vt({},this.urlTree.queryParams)),this.urlTree.fragment,mo(e),v(e),e.component,e,zv(t),Ol(t)+r.length,kI(e))}else{const te=z(t,e,r);if(!te.matched)return null;h=te.consumedSegments,m=r.slice(te.lastChild),l=new lu(h,te.parameters,Object.freeze(vt({},this.urlTree.queryParams)),this.urlTree.fragment,mo(e),v(e),e.component,e,zv(t),Ol(t)+h.length,kI(e))}const w=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:A,slicedSegments:N}=pe(t,h,m,w.filter(te=>void 0===te.redirectTo),this.relativeLinkResolution);var n;if(0===N.length&&A.hasChildren()){const te=this.processChildren(w,A);return null===te?null:[new $i(l,te)]}if(0===w.length&&0===N.length)return[new $i(l,[])];const P=v(e)===o,Z=this.processSegment(w,A,N,P?St:o);return null===Z?null:[new $i(l,Z)]}}function Gv(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function qv(n){const e=[],t=new Set;for(const r of n){if(!Gv(r)){e.push(r);continue}const o=e.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=qv(r.children);e.push(new $i(r.value,o))}return e.filter(r=>!t.has(r))}function zv(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ol(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function mo(n){return n.data||{}}function kI(n){return n.resolve||{}}function xh(n){return sr(e=>{const t=n(e);return t?(0,In.D)(t).pipe((0,bt.U)(()=>e)):it(e)})}class Rh extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Cp=new g.OlP("ROUTES");class jm{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,bt.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=l.create(e);return new gp(zc(h.injector.get(Cp,void 0,g.XFs.Self|g.XFs.Optional)).map(p),h)}),Jr(l=>{throw t._loader$=void 0,l}));return t._loader$=new Vo(o,()=>new Bi.x).pipe(co()),t._loader$}loadModuleFactory(e){return xr(e()).pipe((0,Tn.z)(t=>t instanceof g.YKP?it(t):(0,In.D)(this.compiler.compileModuleAsync(t))))}}class Hm{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Zv(n){throw n}function tT(n,e,t){return e.parse("/")}function Pl(n,e){return it(null)}const Gm={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Yv={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let gs=(()=>{class n{constructor(t,r,o,l,h,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=l,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Bi.x,this.errorHandler=Zv,this.malformedUriErrorHandler=tT,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Pl,afterPreactivation:Pl},this.urlHandlingStrategy=new Hm,this.routeReuseStrategy=new Rh,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(g.h0i),this.console=h.get(g.c2e);const P=h.get(g.R0b);this.isNgZoneEnabled=P instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=new K(new W([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new jm(h,m,Z=>this.triggerEvent(new _a(Z)),Z=>this.triggerEvent(new Bo(Z))),this.routerState=Kc(this.currentUrlTree,this.rootComponentType),this.transitions=new Ei({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null==(t=this.location.getState())?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ar(o=>0!==o.id),(0,bt.U)(o=>fi(vt({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),sr(o=>{let l=!1,h=!1;return it(o).pipe((0,Xr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?fi(vt({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),sr(m=>{const w=this.browserUrlTree.toString(),A=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||A)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return bp(m.source)&&(this.browserUrlTree=m.extractedUrl),it(m).pipe(sr(P=>{const Z=this.transitions.getValue();return r.next(new gh(P.id,this.serializeUrl(P.extractedUrl),P.source,P.restoredState)),Z!==this.transitions.getValue()?ls.E:Promise.resolve(P)}),function(n,e,t,r){return sr(o=>function(n,e,t,r,o){return new Th(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,bt.U)(l=>fi(vt({},o),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Xr.b)(P=>{this.currentNavigation=fi(vt({},this.currentNavigation),{finalUrl:P.urlAfterRedirects})}),function(n,e,t,r,o){return(0,Tn.z)(l=>function(n,e,t,r,o="emptyOnly",l="legacy"){try{const h=new NI(n,e,t,r,o,l).recognize();return null===h?Um(new xI):it(h)}catch(h){return Um(h)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),r,o).pipe((0,bt.U)(h=>fi(vt({},l),{targetSnapshot:h}))))}(this.rootComponentType,this.config,P=>this.serializeUrl(P),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Xr.b)(P=>{if("eager"===this.urlUpdateStrategy){if(!P.extras.skipLocationChange){const te=this.urlHandlingStrategy.merge(P.urlAfterRedirects,P.rawUrl);this.setBrowserUrl(te,P)}this.browserUrlTree=P.urlAfterRedirects}const Z=new ip(P.id,this.serializeUrl(P.extractedUrl),this.serializeUrl(P.urlAfterRedirects),P.targetSnapshot);r.next(Z)}));if(A&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Z,extractedUrl:te,source:Ce,restoredState:Ye,extras:et}=m,Qt=new gh(Z,this.serializeUrl(te),Ce,Ye);r.next(Qt);const fn=Kc(te,this.rootComponentType).snapshot;return it(fi(vt({},m),{targetSnapshot:fn,urlAfterRedirects:te,extras:fi(vt({},et),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),ls.E}),xh(m=>{const{targetSnapshot:w,id:A,extractedUrl:N,rawUrl:P,extras:{skipLocationChange:Z,replaceUrl:te}}=m;return this.hooks.beforePreactivation(w,{navigationId:A,appliedUrlTree:N,rawUrlTree:P,skipLocationChange:!!Z,replaceUrl:!!te})}),(0,Xr.b)(m=>{const w=new ml(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,bt.U)(m=>fi(vt({},m),{guards:Hv(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Tn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:l,canDeactivateChecks:h}}=t;return 0===h.length&&0===l.length?it(fi(vt({},t),{guardsResult:!0})):function(n,e,t,r){return(0,In.D)(n).pipe((0,Tn.z)(o=>function(n,e,t,r,o){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return l&&0!==l.length?it(l.map(m=>{const w=Ip(m,e,o);let A;if(function(n){return n&&Sa(n.canDeactivate)}(w))A=xr(w.canDeactivate(n,e,t,r));else{if(!Sa(w))throw new Error("Invalid CanDeactivate guard");A=xr(w(n,e,t,r))}return A.pipe(ho())})).pipe(xl()):it(!0)}(o.component,o.route,t,e,r)),ho(o=>!0!==o,!0))}(h,r,o,n).pipe((0,Tn.z)(m=>m&&function(n){return"boolean"==typeof n}(m)?function(n,e,t,r){return(0,In.D)(e).pipe(Vs(o=>Lo(function(n,e){return null!==n&&e&&e(new va(n)),it(!0)}(o.route.parent,r),function(n,e){return null!==n&&e&&e(new _l(n)),it(!0)}(o.route,r),function(n,e,t){const r=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(h=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>Fs(()=>it(h.guards.map(w=>{const A=Ip(w,h.node,t);let N;if(function(n){return n&&Sa(n.canActivateChild)}(A))N=xr(A.canActivateChild(r,n));else{if(!Sa(A))throw new Error("Invalid CanActivateChild guard");N=xr(A(r,n))}return N.pipe(ho())})).pipe(xl())));return it(l).pipe(xl())}(n,o.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return it(!0);const o=r.map(l=>Fs(()=>{const h=Ip(l,e,t);let m;if(function(n){return n&&Sa(n.canActivate)}(h))m=xr(h.canActivate(e,n));else{if(!Sa(h))throw new Error("Invalid CanActivate guard");m=xr(h(e,n))}return m.pipe(ho())}));return it(o).pipe(xl())}(n,o.route,t))),ho(o=>!0!==o,!0))}(r,l,n,e):it(m)),(0,bt.U)(m=>fi(vt({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Xr.b)(m=>{if(go(m.guardsResult)){const A=yh(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw A.url=m.guardsResult,A}const w=new bi(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),Ar(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),xh(m=>{if(m.guards.canActivateChecks.length)return it(m).pipe((0,Xr.b)(w=>{const A=new Ti(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(A)}),sr(w=>{let A=!1;return it(w).pipe(function(n,e){return(0,Tn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return it(t);let l=0;return(0,In.D)(o).pipe(Vs(h=>function(n,e,t,r){return function(n,e,t,r){const o=Object.keys(n);if(0===o.length)return it({});const l={};return(0,In.D)(o).pipe((0,Tn.z)(h=>function(n,e,t,r){const o=Ip(n,e,r);return xr(o.resolve?o.resolve(e,t):o(e,t))}(n[h],e,t,r).pipe((0,Xr.b)(m=>{l[h]=m}))),An(1),(0,Tn.z)(()=>Object.keys(l).length===o.length?it(l):ls.E))}(n._resolve,n,e,r).pipe((0,bt.U)(l=>(n._resolvedData=l,n.data=vt(vt({},n.data),Il(n,t).resolve),null)))}(h.route,r,n,e)),(0,Xr.b)(()=>l++),An(1),(0,Tn.z)(h=>l===o.length?it(t):ls.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Xr.b)({next:()=>A=!0,complete:()=>{A||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,Xr.b)(w=>{const A=new yl(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(A)}))}),xh(m=>{const{targetSnapshot:w,id:A,extractedUrl:N,rawUrl:P,extras:{skipLocationChange:Z,replaceUrl:te}}=m;return this.hooks.afterPreactivation(w,{navigationId:A,appliedUrlTree:N,rawUrlTree:P,skipLocationChange:!!Z,replaceUrl:!!te})}),(0,bt.U)(m=>{const w=function(n,e,t){const r=Cl(n,e._root,t?t._root:void 0);return new po(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return fi(vt({},m),{targetRouterState:w})}),(0,Xr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,bt.U)(r=>(new fp(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Xr.b)({next(){l=!0},complete(){l=!0}}),function(n){return(0,Gt.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;l||h||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null==(m=this.currentNavigation)?void 0:m.id)===o.id&&(this.currentNavigation=null)}),Jr(m=>{if(h=!0,function(n){return n&&n[jo]}(m)){const w=go(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const A=new uu(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(A),w?setTimeout(()=>{const N=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),P={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||bp(o.source)};this.scheduleNavigation(N,"imperative",null,P,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new ya(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(A){o.reject(A)}}return ls.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(vt(vt({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var m;const o={replaceUrl:!0},l=(null==(m=t.state)?void 0:m.navigationId)?t.state:null;if(l){const w=vt({},l);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(o.state=w)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,l,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Lm(t),this.config=t.map(p),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:l,fragment:h,queryParamsHandling:m,preserveFragment:w}=r,A=o||this.routerState.root,N=w?this.currentUrlTree.fragment:h;let P=null;switch(m){case"merge":P=vt(vt({},this.currentUrlTree.queryParams),l);break;case"preserve":P=this.currentUrlTree.queryParams;break;default:P=l||null}return null!==P&&(P=this.removeEmptyProps(P)),function(n,e,t,r,o){if(0===t.length)return Al(e.root,e.root,e,r,o);const l=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Rm(!0,0,n);let e=0,t=!1;const r=n.reduce((o,l,h)=>{if("object"==typeof l&&null!=l){if(l.outlets){const m={};return Pn(l.outlets,(w,A)=>{m[A]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(l.segmentPath)return[...o,l.segmentPath]}return"string"!=typeof l?[...o,l]:0===h?(l.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,l]},[]);return new Rm(t,e,r)}(t);if(l.toRoot())return Al(e.root,new W([],{}),e,r,o);const h=function(n,e,t){if(n.isAbsolute)return new ed(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new ed(l,l===e.root,0)}const r=Tl(n.commands[0])?0:1;return function(n,e,t){let r=n,o=e,l=t;for(;l>o;){if(l-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new ed(r,!1,o-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,e,n),m=h.processChildren?Sl(h.segmentGroup,h.index,l.commands):dp(h.segmentGroup,h.index,l.commands);return Al(h.segmentGroup,m,e,r,o)}(A,this.currentUrlTree,t,P,null!=N?N:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=go(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?vt({},Gm):!1===r?vt({},Yv):r,go(t))return Wc(this.currentUrlTree,t,o);const l=this.parseUrl(t);return Wc(this.currentUrlTree,l,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const l=t[o];return null!=l&&(r[o]=l),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Sn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,l,h){var Qt,fn,cr;if(this.disposed)return Promise.resolve(!1);const m=this.transitions.value,w=bp(r)&&m&&!bp(m.source),A=m.rawUrl.toString()===t.toString(),N=m.id===(null==(Qt=this.currentNavigation)?void 0:Qt.id);if(w&&A&&N)return Promise.resolve(!0);let Z,te,Ce;h?(Z=h.resolve,te=h.reject,Ce=h.promise):Ce=new Promise((Bt,Jn)=>{Z=Bt,te=Jn});const Ye=++this.navigationId;let et;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),et=o&&o.\u0275routerPageId?o.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!=(fn=this.browserPageId)?fn:0:(null!=(cr=this.browserPageId)?cr:0)+1):et=0,this.setTransition({id:Ye,targetPageId:et,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:Z,reject:te,promise:Ce,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ce.catch(Bt=>Promise.reject(Bt))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),l=vt(vt({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",l):this.location.go(o,"",l)}restoreHistory(t,r=!1){var o,l;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(o=this.currentNavigation)?void 0:o.finalUrl)||0===h?this.currentUrlTree===(null==(l=this.currentNavigation)?void 0:l.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new uu(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function bp(n){return"imperative"!==n}class Km{}class Ym{preload(e,t){return it(null)}}let Tp=(()=>{class n{constructor(t,r,o,l){this.router=t,this.injector=o,this.preloadingStrategy=l,this.loader=new jm(o,r,w=>t.triggerEvent(new _a(w)),w=>t.triggerEvent(new Bo(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ar(t=>t instanceof Sn),Vs(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const h=l._loadedConfig;o.push(this.processRoutes(h.module,h.routes))}else l.loadChildren&&!l.canLoad?o.push(this.preloadConfig(t,l)):l.children&&o.push(this.processRoutes(t,l.children));return(0,In.D)(o).pipe((0,us.J)(),(0,bt.U)(l=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?it(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Tn.z)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(gs),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(Km))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Qm=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof gh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Sn&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ea&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ea(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const mu=new g.OlP("ROUTER_CONFIGURATION"),Jm=new g.OlP("ROUTER_FORROOT_GUARD"),kl=[Ge,{provide:cn,useClass:pr},{provide:gs,useFactory:function(n,e,t,r,o,l,h={},m,w){const A=new gs(null,n,e,t,r,o,zc(l));return m&&(A.urlHandlingStrategy=m),w&&(A.routeReuseStrategy=w),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,A),h.enableTracing&&A.events.subscribe(N=>{var P,Z;null==(P=console.group)||P.call(console,`Router Event: ${N.constructor.name}`),console.log(N.toString()),console.log(N),null==(Z=console.groupEnd)||Z.call(console)}),A},deps:[cn,hu,Ge,g.zs3,g.Sil,Cp,mu,[class{},new g.FiY],[class{},new g.FiY]]},hu,{provide:Aa,useFactory:function(n){return n.routerState.root},deps:[gs]},Tp,Ym,class{preload(e,t){return t().pipe(Jr(()=>it(null)))}},{provide:mu,useValue:{enableTracing:!1}}];function Qv(){return new g.PXZ("Router",gs)}let Xm=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[kl,ey(t),{provide:Jm,useFactory:BI,deps:[[gs,new g.FiY,new g.tp0]]},{provide:mu,useValue:r||{}},{provide:ue,useFactory:Ap,deps:[se,[new g.tBr(ae),new g.FiY],mu]},{provide:Qm,useFactory:UI,deps:[gs,tl,mu]},{provide:Km,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Ym},{provide:g.PXZ,multi:!0,useFactory:Qv},[Sp,{provide:g.ip1,multi:!0,useFactory:Mp,deps:[Sp]},{provide:ny,useFactory:xp,deps:[Sp]},{provide:g.tb,multi:!0,useExisting:ny}]]}}static forChild(t){return{ngModule:n,providers:[ey(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Jm,8),g.LFG(gs,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function UI(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Qm(n,e,t)}function Ap(n,e,t={}){return t.useHash?new ve(n,e):new Ie(n,e)}function BI(n){return"guarded"}function ey(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:Cp,multi:!0,useValue:n}]}let Sp=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Bi.x}appInitializer(){return this.injector.get(j,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),l=this.injector.get(gs),h=this.injector.get(mu);return"disabled"===h.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?it(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(mu),o=this.injector.get(Tp),l=this.injector.get(Qm),h=this.injector.get(gs),m=this.injector.get(g.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),o.setUpPreloading(),l.init(),h.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Mp(n){return n.appInitializer.bind(n)}function xp(n){return n.bootstrapListener.bind(n)}const ny=new g.OlP("Router Initializer"),iy=[];let Nh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[Xm.forRoot(iy)],Xm]}),n})();var $I=O(906),Rr=O(6146);function sy(){return(0,Gt.e)((n,e)=>{let t,r=!1;n.subscribe(new er.Q(e,o=>{const l=t;t=o,r&&e.next([l,o]),r=!0}))})}function eE(n,e){return n===e}var rt,ms=O(8118),rT=(O(7727),O(614)),_e=O(1921),Fl=O(2646),Oh=O(7817),yu=O(4516),jt=O(9842),yo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ma={},oy=oy||{},At=yo||self;function Rp(){}function ay(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function sd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var uy="closure_uid_"+(1e9*Math.random()>>>0),zI=0;function Mt(n,e,t){return n.call.apply(n.bind,arguments)}function tE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function jr(n,e,t){return(jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Mt:tE).apply(null,arguments)}function Ph(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function _r(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,l){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return e.prototype[o].apply(r,h)}}function $r(){this.s=this.s,this.o=this.o}var WI={};$r.prototype.s=!1,$r.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,uy)&&n[uy]||(n[uy]=++zI)}(this);delete WI[n]}},$r.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Np=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Wo=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in o&&e.call(t,o[l],l,n)};function cy(n){return Array.prototype.concat.apply([],arguments)}function kh(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function dy(n){return/^[\s\xa0]*$/.test(n)}var Hr,hy=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Hi(n,e){return-1!=n.indexOf(e)}function od(n,e){return n<e?-1:n>e?1:0}e:{var Op=At.navigator;if(Op){var Pp=Op.userAgent;if(Pp){Hr=Pp;break e}}Hr=""}function Fh(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function KI(n){const e={};for(const t in n)e[t]=n[t];return e}var rE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function iE(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let l=0;l<rE.length;l++)t=rE[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function fy(n){return fy[" "](n),n}fy[" "]=Rp;var ad,n,sE=Hi(Hr,"Opera"),Lh=Hi(Hr,"Trident")||Hi(Hr,"MSIE"),oE=Hi(Hr,"Edge"),aE=oE||Lh,py=Hi(Hr,"Gecko")&&!(Hi(Hr.toLowerCase(),"webkit")&&!Hi(Hr,"Edge"))&&!(Hi(Hr,"Trident")||Hi(Hr,"MSIE"))&&!Hi(Hr,"Edge"),uE=Hi(Hr.toLowerCase(),"webkit")&&!Hi(Hr,"Edge");function lE(){var n=At.document;return n?n.documentMode:void 0}e:{var cE="",dE=(n=Hr,py?/rv:([^\);]+)(\)|;)/.exec(n):oE?/Edge\/([\d\.]+)/.exec(n):Lh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):uE?/WebKit\/(\S+)/.exec(n):sE?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(dE&&(cE=dE?dE[1]:""),Lh){var hE=lE();if(null!=hE&&hE>parseFloat(cE)){ad=String(hE);break e}}ad=cE}var iT={};function sT(){return e=iT,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=hy(String(ad)).split("."),t=hy("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var o=e[h]||"",l=t[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==o[0].length&&0==l[0].length)break;n=od(0==o[1].length?0:parseInt(o[1],10),0==l[1].length?0:parseInt(l[1],10))||od(0==o[2].length,0==l[2].length)||od(o[2],l[2]),o=o[3],l=l[3]}while(0==n)}return 0<=n}();var e}var oT=At.document&&Lh&&(lE()||parseInt(ad,10))||void 0,aT=function(){if(!At.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{At.addEventListener("test",Rp,e),At.removeEventListener("test",Rp,e)}catch(t){}return n}();function Si(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function $s(n,e){if(Si.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(py){e:{try{fy(e.nodeName);var o=!0;break e}catch(l){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:gy[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&$s.Z.h.call(this)}}Si.prototype.h=function(){this.defaultPrevented=!0},_r($s,Si);var gy={2:"touch",3:"pen",4:"mouse"};$s.prototype.h=function(){$s.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Vh="closure_listenable_"+(1e6*Math.random()|0),pE=0;function my(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++pE,this.ca=this.fa=!1}function Uh(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function ud(n){this.src=n,this.g={},this.h=0}function yy(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],o=Np(r,e);(l=0<=o)&&Array.prototype.splice.call(r,o,1),l&&(Uh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ko(n,e,t,r){for(var o=0;o<n.length;++o){var l=n[o];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return o}return-1}ud.prototype.add=function(n,e,t,r,o){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var h=Ko(n,e,r,o);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new my(e,this.src,l,!!r,o)).fa=t,n.push(e)),e};var kp="closure_lm_"+(1e6*Math.random()|0),_y={};function Fp(n,e,t,r,o){if(r&&r.once)return yE(n,e,t,r,o);if(Array.isArray(e)){for(var l=0;l<e.length;l++)Fp(n,e[l],t,r,o);return null}return t=vu(t),n&&n[Vh]?n.N(e,t,sd(r)?!!r.capture:!!r,o):gE(n,e,t,!1,r,o)}function gE(n,e,t,r,o,l){if(!e)throw Error("Invalid event type");var h=sd(o)?!!o.capture:!!o,m=_u(n);if(m||(n[kp]=m=new ud(n)),(t=m.add(e,t,r,h,l)).proxy)return t;if(r=function(){var e=vy;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)aT||(o=h),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Vl(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function yE(n,e,t,r,o){if(Array.isArray(e)){for(var l=0;l<e.length;l++)yE(n,e[l],t,r,o);return null}return t=vu(t),n&&n[Vh]?n.O(e,t,sd(r)?!!r.capture:!!r,o):gE(n,e,t,!0,r,o)}function _E(n,e,t,r,o){if(Array.isArray(e))for(var l=0;l<e.length;l++)_E(n,e[l],t,r,o);else r=sd(r)?!!r.capture:!!r,t=vu(t),n&&n[Vh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ko(l=n.g[e],t,r,o))&&(Uh(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=_u(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ko(e,t,r,o)),(t=-1<n?e[n]:null)&&Ll(t))}function Ll(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Vh])yy(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Vl(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=_u(e))?(yy(t,n),0==t.h&&(t.src=null,e[kp]=null)):Uh(n)}}}function Vl(n){return n in _y?_y[n]:_y[n]="on"+n}function vy(n,e){if(n.ca)n=!0;else{e=new $s(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Ll(n),n=t.call(r,e)}return n}function _u(n){return(n=n[kp])instanceof ud?n:null}var Ul="__closure_events_fn_"+(1e9*Math.random()>>>0);function vu(n){return"function"==typeof n?n:(n[Ul]||(n[Ul]=function(e){return n.handleEvent(e)}),n[Ul])}function Gr(){$r.call(this),this.i=new ud(this),this.P=this,this.I=null}function qr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Si(e,n);else if(e instanceof Si)e.target=e.target||n;else{var o=e;iE(e=new Si(r,n),o)}if(o=!0,t)for(var l=t.length-1;0<=l;l--){var h=e.g=t[l];o=Bh(h,r,!0,e)&&o}if(o=Bh(h=e.g=n,r,!0,e)&&o,o=Bh(h,r,!1,e)&&o,t)for(l=0;l<t.length;l++)o=Bh(h=e.g=t[l],r,!1,e)&&o}function Bh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,l=0;l<e.length;++l){var h=e[l];if(h&&!h.ca&&h.capture==t){var m=h.listener,w=h.ia||h.src;h.fa&&yy(n.i,h),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}_r(Gr,$r),Gr.prototype[Vh]=!0,Gr.prototype.removeEventListener=function(n,e,t,r){_E(this,n,e,t,r)},Gr.prototype.M=function(){if(Gr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Uh(t[r]);delete n.g[e],n.h--}}this.I=null},Gr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Gr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var jh=At.JSON.stringify;function Ey(){var n=Iy;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Lp,$h=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new QI,n=>n.reset());class QI{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function EE(n){At.setTimeout(()=>{throw n},0)}function wE(n,e){Lp||function(){var n=At.Promise.resolve(void 0);Lp=function(){n.then(JI)}}(),wy||(Lp(),wy=!0),Iy.add(n,e)}var wy=!1,Iy=new class{constructor(){this.h=this.g=null}add(e,t){const r=$h.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function JI(){for(var n;n=Ey();){try{n.h.call(n.g)}catch(t){EE(t)}var e=$h;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}wy=!1}function Vp(n,e){Gr.call(this),this.h=n||1,this.g=e||At,this.j=jr(this.kb,this),this.l=Date.now()}function Mi(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Dy(n,e,t){if("function"==typeof n)t&&(n=jr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=jr(n.handleEvent,n)}return 2147483647<Number(e)?-1:At.setTimeout(n,e||0)}function DE(n){n.g=Dy(()=>{n.g=null,n.i&&(n.i=!1,DE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}_r(Vp,Gr),(rt=Vp.prototype).da=!1,rt.S=null,rt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),qr(this,"tick"),this.da&&(Mi(this),this.start()))}},rt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.M=function(){Vp.Z.M.call(this),Mi(this),delete this.g};class uT extends $r{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:DE(this)}M(){super.M(),this.g&&(At.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Up(n){$r.call(this),this.h=n,this.g={}}_r(Up,$r);var Cy=[];function XI(n,e,t,r){Array.isArray(t)||(t&&(Cy[0]=t.toString()),t=Cy);for(var o=0;o<t.length;o++){var l=Fp(e,t[o],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function CE(n){Fh(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ll(e)},n),n.g={}}function ld(){this.g=!0}function cd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var l=o[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var h=1;h<o.length;h++)o[h]=""}}}return jh(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Up.prototype.M=function(){Up.Z.M.call(this),CE(this)},Up.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ld.prototype.Aa=function(){this.g=!1},ld.prototype.info=function(){};var Bl={},by=null;function Bp(){return by=by||new Gr}function AE(n){Si.call(this,Bl.Ma,n)}function dd(n){const e=Bp();qr(e,new AE(e,n))}function Ty(n,e){Si.call(this,Bl.STAT_EVENT,n),this.stat=e}function xi(n){const e=Bp();qr(e,new Ty(e,n))}function _o(n,e){Si.call(this,Bl.Na,n),this.size=e}function jl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return At.setTimeout(function(){n()},e)}Bl.Ma="serverreachability",_r(AE,Si),Bl.STAT_EVENT="statevent",_r(Ty,Si),Bl.Na="timingevent",_r(_o,Si);var jp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},SE={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ME(){}function xE(){}ME.prototype.h=null;var My,Hh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Sy(){Si.call(this,"d")}function Gh(){Si.call(this,"c")}function $p(){}function Eu(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Up(this),this.P=nD,this.W=new Vp(n=aE?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Hp}function Hp(){this.i=null,this.g="",this.h=!1}_r(Sy,Si),_r(Gh,Si),_r($p,ME),$p.prototype.g=function(){return new XMLHttpRequest},$p.prototype.i=function(){return{}},My=new $p;var nD=45e3,qh={},hd={};function Gp(n,e,t){n.K=1,n.v=Zp(ys(e)),n.s=t,n.U=!0,RE(n,null)}function RE(n,e){n.F=Date.now(),zh(n),n.A=ys(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Yp(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Hp,n.g=Zl(n.l,t?e:null,!n.s),0<n.O&&(n.L=new uT(jr(n.Ia,n,n.g),n.O)),XI(n.V,n.g,"readystatechange",n.gb),e=n.H?KI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),dd(1),function(n,e,t,r,o,l){n.info(function(){if(n.g)if(l)for(var h="",m=l.split("&"),w=0;w<m.length;w++){var A=m[w].split("=");if(1<A.length){var N=A[0];A=A[1];var P=N.split("_");h=2<=P.length&&"type"==P[1]?h+(N+"=")+A+"&":h+(N+"=redacted&")}}else h=null;else h=l;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function NE(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function qp(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=lT(n,t),o==hd){4==e&&(n.o=4,xi(14),r=!1),cd(n.j,n.m,null,"[Incomplete Response]");break}if(o==qh){n.o=4,xi(15),cd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}cd(n.j,n.m,o,null),zp(n,o)}NE(n)&&o!=hd&&o!=qh&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,xi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),ef(e),e.L=!0,xi(11))):(cd(n.j,n.m,t,"[Invalid Chunked Response]"),wu(n),fd(n))}function lT(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?hd:(t=Number(e.substring(t,r)),isNaN(t)?qh:(r+=1)+t>e.length?hd:(e=e.substr(r,t),n.C=r+t,e))}function zh(n){n.Y=Date.now()+n.P,xy(n,n.P)}function xy(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=jl(jr(n.eb,n),e)}function Wh(n){n.B&&(At.clearTimeout(n.B),n.B=null)}function fd(n){0==n.l.G||n.I||ql(n.l,n)}function wu(n){Wh(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Mi(n.W),CE(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function zp(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Fy(t.i,n)))if(t.I=n.N,!n.J&&Fy(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(A){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=jl(jr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Oa(t),Cu(t)}Gi(t),xi(18)}if(1>=VE(t.i)&&t.ka){try{t.ka()}catch(A){}t.ka=void 0}}else Hs(t,11)}else if((n.J||t.g==n)&&Oa(t),!dy(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let A=o[e];if(t.U=A[0],A=A[1],2==t.G)if("c"==A[0]){t.J=A[1],t.la=A[2];const N=A[3];null!=N&&(t.ma=N,t.h.info("VER="+t.ma));const P=A[4];null!=P&&(t.za=P,t.h.info("SVER="+t.za));const Z=A[5];null!=Z&&"number"==typeof Z&&0<Z&&(t.K=r=1.5*Z,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const te=n.g;if(te){const Ce=te.g?te.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ce){var l=r.i;!l.g&&(Hi(Ce,"spdy")||Hi(Ce,"quic")||Hi(Ce,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Qp(l,l.h),l.h=null))}if(r.D){const Ye=te.g?te.g.getResponseHeader("X-HTTP-Session-Id"):null;Ye&&(r.sa=Ye,Vn(r.F,r.D,Ye))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=Kl(r,r.H?r.la:null,r.W),h.J){uD(r.i,h);var m=h,w=r.K;w&&m.setTimeout(w),m.B&&(Wh(m),zh(m)),r.g=h}else Xh(r);0<t.l.length&&Id(t)}else"stop"!=A[0]&&"close"!=A[0]||Hs(t,7);else 3==t.G&&("stop"==A[0]||"close"==A[0]?"stop"==A[0]?Hs(t,7):jy(t):"noop"!=A[0]&&t.j&&t.j.wa(A),t.A=0)}dd(4)}catch(A){}}function pd(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ay(n)||"string"==typeof n)Wo(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(ay(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(ay(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var l=0;l<o;l++)e.call(void 0,r[l],t&&t[l],n)}}function gd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof gd)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Ry(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];md(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)md(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function md(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(rt=Eu.prototype).setTimeout=function(n){this.P=n},rt.gb=function(n){n=n.target;const e=this.L;e&&3==Na(n)?e.l():this.Ia(n)},rt.Ia=function(n){try{if(n==this.g)e:{const N=Na(this.g);var e=this.g.Da();const P=this.g.ba();if(!(3>N)&&(3!=N||aE||this.g&&(this.h.h||this.g.ga()||HE(this.g)))){this.I||4!=N||7==e||dd(8==e||0>=P?3:2),Wh(this);var t=this.g.ba();this.N=t;t:if(NE(this)){var r=HE(this.g);n="";var o=r.length,l=4==Na(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){wu(this),fd(this);var h="";break t}this.h.i=new At.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function(n,e,t,r,o,l,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+l+" "+h})}(this.j,this.u,this.A,this.m,this.X,N,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dy(m)){var A=m;break t}}A=null}if(!(t=A)){this.i=!1,this.o=3,xi(12),wu(this),fd(this);break e}cd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,zp(this,t)}this.U?(qp(this,N,h),aE&&this.i&&3==N&&(XI(this.V,this.W,"tick",this.fb),this.W.start())):(cd(this.j,this.m,h,null),zp(this,h)),4==N&&wu(this),this.i&&!this.I&&(4==N?ql(this.l,this):(this.i=!1,zh(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,xi(12)):(this.o=0,xi(13)),wu(this),fd(this)}}}catch(N){}},rt.fb=function(){if(this.g){var n=Na(this.g),e=this.g.ga();this.C<e.length&&(Wh(this),qp(this,n,e),this.i&&4!=n&&zh(this))}},rt.cancel=function(){this.I=!0,wu(this)},rt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(dd(3),xi(17)),wu(this),this.o=2,fd(this)):xy(this,this.Y-n)},(rt=gd.prototype).R=function(){Ry(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},rt.T=function(){return Ry(this),this.g.concat()},rt.get=function(n,e){return md(this.h,n)?this.h[n]:e},rt.set=function(n,e){md(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},rt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],l=this.get(o);n.call(e,l,o,this)}};var Wp=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ra(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ra){this.g=void 0!==e?e:n.g,Kp(this,n.j),this.s=n.s,yd(this,n.i),Kh(this,n.m),this.l=n.l,e=n.h;var t=new Yh;t.i=e.i,e.g&&(t.g=new gd(e.g),t.h=e.h),Ny(this,t),this.o=n.o}else n&&(t=String(n).match(Wp))?(this.g=!!e,Kp(this,t[1]||"",!0),this.s=Zh(t[2]||""),yd(this,t[3]||"",!0),Kh(this,t[4]),this.l=Zh(t[5]||"",!0),Ny(this,t[6]||"",!0),this.o=Zh(t[7]||"")):(this.g=!!e,this.h=new Yh(null,this.g))}function ys(n){return new Ra(n)}function Kp(n,e,t){n.j=t?Zh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function yd(n,e,t){n.i=t?Zh(e,!0):e}function Kh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Ny(n,e,t){e instanceof Yh?(n.h=e,function(n,e){e&&!n.j&&(Iu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(PE(this,r),Yp(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=_d(e,Ed)),n.h=new Yh(e,n.g))}function Vn(n,e,t){n.h.set(e,t)}function Zp(n){return Vn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Zh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function _d(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,vd),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function vd(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ra.prototype.toString=function(){var n=[],e=this.j;e&&n.push(_d(e,Py,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(_d(e,Py,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(_d(t,"/"==t.charAt(0)?sD:iD,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",_d(t,oD)),n.join("")};var Py=/[#\/\?@]/g,iD=/[#\?:]/g,sD=/[#\?]/g,Ed=/[#\?@]/g,oD=/#/g;function Yh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Iu(n){n.g||(n.g=new gd,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var l=n[t].substring(0,r);o=n[t].substring(r+1)}else l=n[t];e(l,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function PE(n,e){Iu(n),e=$l(n,e),md(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,md((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Ry(n)))}function _s(n,e){return Iu(n),e=$l(n,e),md(n.g.h,e)}function Yp(n,e,t){PE(n,e),0<t.length&&(n.i=null,n.g.set($l(n,e),kh(t)),n.h+=t.length)}function $l(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ky(n){this.l=n||aD,n=At.PerformanceNavigationTiming?0<(n=At.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(At.g&&At.g.Ea&&At.g.Ea()&&At.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=Yh.prototype).add=function(n,e){Iu(this),this.i=null,n=$l(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){Iu(this),this.g.forEach(function(t,r){Wo(t,function(o){n.call(e,o,r,this)},this)},this)},rt.T=function(){Iu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],l=0;l<o.length;l++)t.push(e[r]);return t},rt.R=function(n){Iu(this);var e=[];if("string"==typeof n)_s(this,n)&&(e=cy(e,this.g.get($l(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=cy(e,n[t])}return e},rt.set=function(n,e){return Iu(this),this.i=null,_s(this,n=$l(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var h=o;""!==r[l]&&(h+="="+encodeURIComponent(String(r[l]))),n.push(h)}}return this.i=n.join("&")};var aD=10;function LE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function VE(n){return n.h?1:n.g?n.g.size:0}function Fy(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Qp(n,e){n.g?n.g.add(e):n.h=e}function uD(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Ly(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return kh(n.i)}function Vy(){}function lD(){this.g=new Vy}function cT(n,e,t){const r=t||"";try{pd(n,function(o,l){let h=o;sd(o)&&(h=jh(o)),e.push(r+l+"="+encodeURIComponent(h))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function wd(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(l){}}function Qh(n){this.l=n.$b||null,this.j=n.ib||!1}function Jh(n,e){Gr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Jp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ky.prototype.cancel=function(){if(this.i=Ly(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Vy.prototype.stringify=function(n){return At.JSON.stringify(n,void 0)},Vy.prototype.parse=function(n){return At.JSON.parse(n,void 0)},_r(Qh,ME),Qh.prototype.g=function(){return new Jh(this.l,this.j)},Qh.prototype.i=function(n){return function(){return n}}({}),_r(Jh,Gr);var Jp=0;function cD(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Ri(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Xp(n)}function Xp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=Jh.prototype).open=function(n,e){if(this.readyState!=Jp)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Xp(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||At).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ri(this)),this.readyState=Jp},rt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Xp(this)),this.g&&(this.readyState=3,Xp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==At.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cD(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},rt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ri(this):Xp(this),3==this.readyState&&cD(this)}},rt.Ua=function(n){this.g&&(this.response=this.responseText=n,Ri(this))},rt.Ta=function(n){this.g&&(this.response=n,Ri(this))},rt.ha=function(){this.g&&Ri(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Jh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var hT=At.JSON.parse;function or(n){Gr.call(this),this.headers=new gd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Uy,this.K=this.L=!1}_r(or,Gr);var Uy="",UE=/^https?$/i,dD=["POST","PUT"];function BE(n){return"content-type"==n.toLowerCase()}function eg(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,jE(n),ng(n)}function jE(n){n.D||(n.D=!0,qr(n,"complete"),qr(n,"error"))}function tg(n){if(n.h&&void 0!==oy&&(!n.C[1]||4!=Na(n)||2!=n.ba()))if(n.v&&4==Na(n))Dy(n.Fa,0,n);else if(qr(n,"readystatechange"),4==Na(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(Wp)[1]||null;if(!o&&At.self&&At.self.location){var l=At.self.location.protocol;o=l.substr(0,l.length-1)}r=!UE.test(o?o.toLowerCase():"")}t=r}if(t)qr(n,"complete"),qr(n,"success");else{n.m=6;try{var h=2<Na(n)?n.g.statusText:""}catch(w){h=""}n.j=h+" ["+n.ba()+"]",jE(n)}}finally{ng(n)}}}function ng(n,e){if(n.g){$E(n);const t=n.g,r=n.C[0]?Rp:null;n.g=null,n.C=null,e||qr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function $E(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(At.clearTimeout(n.A),n.A=null)}function Na(n){return n.g?n.g.readyState:0}function HE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Uy:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function By(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return Fh(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Vn(n,e,t))}function Du(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Hl(n){this.za=0,this.l=[],this.h=new ld,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Du("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Du("baseRetryDelayMs",5e3,n),this.$a=Du("retryDelaySeedMs",1e4,n),this.Ya=Du("forwardChannelMaxRetries",2,n),this.ra=Du("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new ky(n&&n.concurrentRequestLimit),this.Ca=new lD,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function jy(n){if(GE(n),3==n.G){var e=n.V++,t=ys(n.F);Vn(t,"SID",n.J),Vn(t,"RID",e),Vn(t,"TYPE","terminate"),vr(n,t),(e=new Eu(n,n.h,e,void 0)).K=2,e.v=Zp(ys(t)),t=!1,At.navigator&&At.navigator.sendBeacon&&(t=At.navigator.sendBeacon(e.v.toString(),"")),!t&&At.Image&&((new Image).src=e.v,t=!0),t||(e.g=Zl(e.l,null),e.g.ea(e.v)),e.F=Date.now(),zh(e)}Wl(n)}function Cu(n){n.g&&(ef(n),n.g.cancel(),n.g=null)}function GE(n){Cu(n),n.u&&(At.clearTimeout(n.u),n.u=null),Oa(n),n.i.cancel(),n.m&&("number"==typeof n.m&&At.clearTimeout(n.m),n.m=null)}function $y(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Id(n)}function Id(n){LE(n.i)||n.m||(n.m=!0,wE(n.Ha,n),n.C=0)}function Dd(n,e){var t;t=e?e.m:n.V++;const r=ys(n.F);Vn(r,"SID",n.J),Vn(r,"RID",t),Vn(r,"AID",n.U),vr(n,r),n.o&&n.s&&By(r,n.o,n.s),t=new Eu(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=bu(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Qp(n.i,t),Gp(t,r,e)}function vr(n,e){n.j&&pd({},function(t,r){Vn(e,r,t)})}function bu(n,e,t){t=Math.min(n.l.length,t);var r=n.j?jr(n.j.Oa,n.j,n):null;e:{var o=n.l;let l=-1;for(;;){const h=["count="+t];-1==l?0<t?(l=o[0].h,h.push("ofs="+l)):l=0:h.push("ofs="+l);let m=!0;for(let w=0;w<t;w++){let A=o[w].h;const N=o[w].g;if(A-=l,0>A)l=Math.max(0,o[w].h-100),m=!1;else try{cT(N,h,"req"+A+"_")}catch(P){r&&r(N)}}if(m){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Xh(n){n.g||n.u||(n.Y=1,wE(n.Ga,n),n.A=0)}function Gi(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=jl(jr(n.Ga,n),zl(n,n.A)),n.A++,0))}function ef(n){null!=n.B&&(At.clearTimeout(n.B),n.B=null)}function Gl(n){n.g=new Eu(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ys(n.oa);Vn(e,"RID","rpc"),Vn(e,"SID",n.J),Vn(e,"CI",n.N?"0":"1"),Vn(e,"AID",n.U),vr(n,e),Vn(e,"TYPE","xmlhttp"),n.o&&n.s&&By(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Zp(ys(e)),t.s=null,t.U=!0,RE(t,n)}function Oa(n){null!=n.v&&(At.clearTimeout(n.v),n.v=null)}function ql(n,e){var t=null;if(n.g==e){Oa(n),ef(n),n.g=null;var r=2}else{if(!Fy(n.i,e))return;t=e.D,uD(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;qr(r=Bp(),new _o(r,t,e,o)),Id(n)}else Xh(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function(n,e){return!(VE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=jl(jr(n.Ha,n,e),zl(n,n.C)),n.C++,0)))}(n,e)||2==r&&Gi(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Hs(n,5);break;case 4:Hs(n,10);break;case 3:Hs(n,6);break;default:Hs(n,2)}}function zl(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Hs(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=jr(n.jb,n);t||(t=new Ra("//www.google.com/images/cleardot.gif"),At.location&&"http"==At.location.protocol||Kp(t,"https"),Zp(t)),function(n,e){const t=new ld;if(At.Image){const r=new Image;r.onload=Ph(wd,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ph(wd,t,r,"TestLoadImage: error",!1,e),r.onabort=Ph(wd,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ph(wd,t,r,"TestLoadImage: timeout",!1,e),At.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else xi(2);n.G=0,n.j&&n.j.va(e),Wl(n),GE(n)}function Wl(n){n.G=0,n.I=-1,n.j&&((0!=Ly(n.i).length||0!=n.l.length)&&(n.i.i.length=0,kh(n.l),n.l.length=0),n.j.ua())}function Kl(n,e,t){let r=function(n){return n instanceof Ra?ys(n):new Ra(n,void 0)}(t);if(""!=r.i)e&&yd(r,e+"."+r.i),Kh(r,r.m);else{const o=At.location;r=function(n,e,t,r){var o=new Ra(null,void 0);return n&&Kp(o,n),e&&yd(o,e),t&&Kh(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Fh(n.aa,function(o,l){Vn(r,l,o)}),t=n.sa,(e=n.D)&&t&&Vn(r,e,t),Vn(r,"VER",n.ma),vr(n,r),r}function Zl(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new or(t&&n.Ba&&!n.qa?new Qh({ib:!0}):n.qa)).L=n.H,e}function Yl(){}function tf(){if(Lh&&!(10<=Number(oT)))throw Error("Environmental error: no available transport.")}function qi(n,e){Gr.call(this),this.g=new Hl(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!dy(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!dy(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ql(this)}function Hy(n){Sy.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Gy(){Gh.call(this),this.status=1}function Ql(n){this.g=n}(rt=or.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():My.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:My),this.g.onreadystatechange=jr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void eg(this,l)}n=t||"";const o=new gd(this.headers);r&&pd(r,function(l,h){o.set(h,l)}),r=function(n){e:{var e=BE;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=At.FormData&&n instanceof At.FormData,!(0<=Np(dD,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(l,h){this.g.setRequestHeader(h,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$E(this),0<this.B&&((this.K=function(n){return Lh&&sT()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=jr(this.pa,this)):this.A=Dy(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){eg(this,l)}},rt.pa=function(){void 0!==oy&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qr(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,qr(this,"complete"),qr(this,"abort"),ng(this))},rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ng(this,!0)),or.Z.M.call(this)},rt.Fa=function(){this.s||(this.F||this.v||this.l?tg(this):this.cb())},rt.cb=function(){tg(this)},rt.ba=function(){try{return 2<Na(this)?this.g.status:-1}catch(n){return-1}},rt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},rt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),hT(e)}},rt.Da=function(){return this.m},rt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=Hl.prototype).ma=8,rt.G=1,rt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},rt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Eu(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=KI(l),iE(l,this.P)):l=this.P),null===this.o&&(o.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=bu(this,o,e),Vn(t=ys(this.F),"RID",n),Vn(t,"CVER",22),this.D&&Vn(t,"X-HTTP-Session-Id",this.D),vr(this,t),this.o&&l&&By(t,this.o,l),Qp(this.i,o),this.Ra&&Vn(t,"TYPE","init"),this.ja?(Vn(t,"$req",e),Vn(t,"SID","null"),o.$=!0,Gp(o,t,null)):Gp(o,t,e),this.G=2}}else 3==this.G&&(n?Dd(this,n):0==this.l.length||LE(this.i)||Dd(this))},rt.Ga=function(){if(this.u=null,Gl(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=jl(jr(this.bb,this),n)}},rt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,xi(10),Cu(this),Gl(this))},rt.ab=function(){null!=this.v&&(this.v=null,Cu(this),Gi(this),xi(19))},rt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),xi(2)):(this.h.info("Failed to ping google.com"),xi(1))},(rt=Yl.prototype).xa=function(){},rt.wa=function(){},rt.va=function(){},rt.ua=function(){},rt.Oa=function(){},tf.prototype.g=function(n,e){return new qi(n,e)},_r(qi,Gr),qi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),wE(jr(n.hb,n,e))),xi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Kl(n,null,n.W),Id(n)},qi.prototype.close=function(){jy(this.g)},qi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,$y(this.g,e)}else this.v?((e={}).__data__=jh(n),$y(this.g,e)):$y(this.g,n)},qi.prototype.M=function(){this.g.j=null,delete this.j,jy(this.g),delete this.g,qi.Z.M.call(this)},_r(Hy,Sy),_r(Gy,Gh),_r(Ql,Yl),Ql.prototype.xa=function(){qr(this.g,"a")},Ql.prototype.wa=function(n){qr(this.g,new Hy(n))},Ql.prototype.va=function(n){qr(this.g,new Gy(n))},Ql.prototype.ua=function(){qr(this.g,"b")},tf.prototype.createWebChannel=tf.prototype.g,qi.prototype.send=qi.prototype.u,qi.prototype.open=qi.prototype.m,qi.prototype.close=qi.prototype.close,jp.NO_ERROR=0,jp.TIMEOUT=8,jp.HTTP_ERROR=6,SE.COMPLETE="complete",xE.EventType=Hh,Hh.OPEN="a",Hh.CLOSE="b",Hh.ERROR="c",Hh.MESSAGE="d",Gr.prototype.listen=Gr.prototype.N,or.prototype.listenOnce=or.prototype.O,or.prototype.getLastError=or.prototype.La,or.prototype.getLastErrorCode=or.prototype.Da,or.prototype.getStatus=or.prototype.ba,or.prototype.getResponseJson=or.prototype.Qa,or.prototype.getResponseText=or.prototype.ga,or.prototype.send=or.prototype.ea;var qE=Ma.createWebChannelTransport=function(){return new tf},zE=Ma.getStatEventTarget=function(){return Bp()},rg=Ma.ErrorCode=jp,WE=Ma.EventType=SE,fD=Ma.Event=Bl,qy=Ma.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},pD=Ma.FetchXmlHttpFactory=Qh,ig=Ma.WebChannel=xE,KE=Ma.XhrIo=or;const ZE="@firebase/firestore";class ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ti.UNAUTHENTICATED=new ti(null),ti.GOOGLE_CREDENTIALS=new ti("google-credentials-uid"),ti.FIRST_PARTY=new ti("first-party-uid"),ti.MOCK_USER=new ti("mock-user");let Jl="9.6.1";const Tu=new yu.Yd("@firebase/firestore");function sg(){return Tu.logLevel}function Le(n,...e){if(Tu.logLevel<=yu.in.DEBUG){const t=e.map(rf);Tu.debug(`Firestore (${Jl}): ${n}`,...t)}}function Nr(n,...e){if(Tu.logLevel<=yu.in.ERROR){const t=e.map(rf);Tu.error(`Firestore (${Jl}): ${n}`,...t)}}function nf(n,...e){if(Tu.logLevel<=yu.in.WARN){const t=e.map(rf);Tu.warn(`Firestore (${Jl}): ${n}`,...t)}}function rf(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${Jl}) INTERNAL ASSERTION FAILED: `+n;throw Nr(e),new Error(e)}function Et(n,e){n||lt()}function Ke(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class mD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ti.UNAUTHENTICATED))}shutdown(){}}class Cd{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _D{constructor(e){this.t=e,this.currentUser=ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const l=A=>this.i!==o?(o=this.i,t(A)):Promise.resolve();let h=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Or,e.enqueueRetryable(()=>l(this.currentUser))};const m=()=>{const A=h;e.enqueueRetryable((0,_e.Z)(function*(){yield A.promise,yield l(r.currentUser)}))},w=A=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=A,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(A=>w(A)),setTimeout(()=>{if(!this.auth){const A=this.t.getImmediate({optional:!0});A?w(A):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Or)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et("string"==typeof r.accessToken),new mD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Et(null===e||"string"==typeof e),new ti(e)}}class YE{constructor(e,t,r){this.type="FirstParty",this.user=ti.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class vD{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new YE(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class og{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=o=>{e.enqueueRetryable(()=>{return null!=(l=o).error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`),t(l.token);var l})};const r=o=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?r(o):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Et("string"==typeof t.token),new zy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class zi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.p(r),this.T=r=>t.writeSequenceNumber(r))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function ED(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}zi.I=-1;class QE{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=ED(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%e.length))}return r}}function qt(n,e){return n<e?-1:n>e?1:0}function bd(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function JE(n){return n+"\0"}class Pr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pr.fromMillis(Date.now())}static fromDate(e){return Pr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Pr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qt(this.nanoseconds,e.nanoseconds):qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Pt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Pt(e)}static min(){return new Pt(new Pr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Wy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Au(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ag(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ug{constructor(e,t,r){void 0===t?t=0:t>e.length&&lt(),void 0===r?r=e.length-t:r>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ug.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ug?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=e.get(o),h=t.get(o);if(l<h)return-1;if(l>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nn extends ug{construct(e,t,r){return new nn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new nn(t)}static emptyPath(){return new nn([])}}const wD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class di extends ug{construct(e,t,r){return new di(e,t,r)}static isValidIdentifier(e){return wD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),di.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new di(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(0===r.length)throw new Re(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Re(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Re(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(h=!h,o++):"."!==m||h?(r+=m,o++):(l(),o++)}if(l(),h)throw new Re(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new di(t)}static emptyPath(){return new di([])}}class Yo{constructor(e){this.fields=e,e.sort(di.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Er{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Er(t)}static fromUint8Array(e){const t=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new Er(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Er.EMPTY_BYTE_STRING=new Er("");const Ky=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Su(n){if(Et(!!n),"string"==typeof n){let e=0;const t=Ky.exec(n);if(Et(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tr(n.seconds),nanos:tr(n.nanos)}}function tr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Mu(n){return"string"==typeof n?Er.fromBase64String(n):Er.fromUint8Array(n)}function lg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ID(n){const e=n.mapValue.fields.__previous_value__;return lg(e)?ID(e):e}function sf(n){const e=Su(n.mapValue.fields.__local_write_time__.timestampValue);return new Pr(e.seconds,e.nanos)}function xu(n){return null==n}function of(n){return 0===n&&1/n==-1/0}function ew(n){return"number"==typeof n&&Number.isInteger(n)&&!of(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class at{constructor(e){this.path=e}static fromPath(e){return new at(nn.fromString(e))}static fromName(e){return new at(nn.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===nn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new at(new nn(e.slice()))}}function Pa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lg(n)?4:10:lt()}function vo(n,e){const t=Pa(n);if(t!==Pa(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sf(n).isEqual(sf(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Su(r.timestampValue),h=Su(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Mu(n.bytesValue).isEqual(Mu(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return tr(r.geoPointValue.latitude)===tr(o.geoPointValue.latitude)&&tr(r.geoPointValue.longitude)===tr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return tr(r.integerValue)===tr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=tr(r.doubleValue),h=tr(o.doubleValue);return l===h?of(l)===of(h):isNaN(l)&&isNaN(h)}return!1}(n,e);case 9:return bd(n.arrayValue.values||[],e.arrayValue.values||[],vo);case 10:return function(r,o){const l=r.mapValue.fields||{},h=o.mapValue.fields||{};if(Wy(l)!==Wy(h))return!1;for(const m in l)if(l.hasOwnProperty(m)&&(void 0===h[m]||!vo(l[m],h[m])))return!1;return!0}(n,e);default:return lt()}var o}function Td(n,e){return void 0!==(n.values||[]).find(t=>vo(t,e))}function Ru(n,e){const t=Pa(n),r=Pa(e);if(t!==r)return qt(t,r);switch(t){case 0:return 0;case 1:return qt(n.booleanValue,e.booleanValue);case 2:return function(o,l){const h=tr(o.integerValue||o.doubleValue),m=tr(l.integerValue||l.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return Zy(n.timestampValue,e.timestampValue);case 4:return Zy(sf(n),sf(e));case 5:return qt(n.stringValue,e.stringValue);case 6:return function(o,l){const h=Mu(o),m=Mu(l);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),m=l.split("/");for(let w=0;w<h.length&&w<m.length;w++){const A=qt(h[w],m[w]);if(0!==A)return A}return qt(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const h=qt(tr(o.latitude),tr(l.latitude));return 0!==h?h:qt(tr(o.longitude),tr(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,l){const h=o.values||[],m=l.values||[];for(let w=0;w<h.length&&w<m.length;++w){const A=Ru(h[w],m[w]);if(A)return A}return qt(h.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,l){const h=o.fields||{},m=Object.keys(h),w=l.fields||{},A=Object.keys(w);m.sort(),A.sort();for(let N=0;N<m.length&&N<A.length;++N){const P=qt(m[N],A[N]);if(0!==P)return P;const Z=Ru(h[m[N]],w[A[N]]);if(0!==Z)return Z}return qt(m.length,A.length)}(n.mapValue,e.mapValue);default:throw lt()}}function Zy(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return qt(n,e);const t=Su(n),r=Su(e),o=qt(t.seconds,r.seconds);return 0!==o?o:qt(t.nanos,r.nanos)}function Yy(n){return cg(n)}function cg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Su(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Mu(n.bytesValue).toBase64():"referenceValue"in n?at.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",l=!0;for(const h of r.values||[])l?l=!1:o+=",",o+=cg(h);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let l="{",h=!0;for(const m of o)h?h=!1:l+=",",l+=`${m}:${cg(r.fields[m])}`;return l+"}"}(n.mapValue):lt();var e}function af(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function uf(n){return!!n&&"integerValue"in n}function dg(n){return!!n&&"arrayValue"in n}function tw(n){return!!n&&"nullValue"in n}function nw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hg(n){return!!n&&"mapValue"in n}function Ad(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Au(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ad(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ad(n.arrayValue.values[t]);return e}return Object.assign({},n)}class zr{constructor(e){this.value=e}static empty(){return new zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!hg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ad(t)}setAll(e){let t=di.emptyPath(),r={},o=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}h?r[m.lastSegment()]=Ad(h):o.push(m.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());hg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];hg(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Au(t,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new zr(Ad(this.value))}}function Qy(n){const e=[];return Au(n.fields,(t,r)=>{const o=new di([t]);if(hg(r)){const l=Qy(r.mapValue).fields;if(0===l.length)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new Yo(e)}class Un{constructor(e,t,r,o,l){this.key=e,this.documentType=t,this.version=r,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Un(e,0,Pt.min(),zr.empty(),0)}static newFoundDocument(e,t,r){return new Un(e,1,t,r,0)}static newNoDocument(e,t){return new Un(e,2,t,zr.empty(),0)}static newUnknownDocument(e,t){return new Un(e,3,t,zr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Un(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class rw{constructor(e,t=null,r=[],o=[],l=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=h,this.endAt=m,this.R=null}}function Jy(n,e=null,t=[],r=[],o=null,l=null,h=null){return new rw(n,e,t,r,o,l,h)}function Sd(n){const e=Ke(n);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function(n){return n.field.canonicalString()+n.op.toString()+Yy(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),xu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=hf(e.startAt)),e.endAt&&(t+="|ub:",t+=hf(e.endAt)),e.R=t}return e.R}function lf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!Md(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!vo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lw(n.startAt,e.startAt)&&lw(n.endAt,e.endAt)}function cf(n){return at.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Wi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new CD(e,t,r):"array-contains"===t?new ow(e,r):"in"===t?new TD(e,r):"not-in"===t?new AD(e,r):"array-contains-any"===t?new aw(e,r):new Wi(e,t,r)}static P(e,t,r){return"in"===t?new sw(e,r):new bD(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Ru(t,this.value)):null!==t&&Pa(this.value)===Pa(t)&&this.v(Ru(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class CD extends Wi{constructor(e,t,r){super(e,t,r),this.key=at.fromName(r.referenceValue)}matches(e){const t=at.comparator(e.key,this.key);return this.v(t)}}class sw extends Wi{constructor(e,t){super(e,"in",t),this.keys=wr(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class bD extends Wi{constructor(e,t){super(e,"not-in",t),this.keys=wr(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function wr(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>at.fromName(r.referenceValue))}class ow extends Wi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dg(t)&&Td(t.arrayValue,this.value)}}class TD extends Wi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Td(this.value.arrayValue,t)}}class AD extends Wi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Td(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Td(this.value.arrayValue,t)}}class aw extends Wi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Td(this.value.arrayValue,r))}}class df{constructor(e,t){this.position=e,this.before=t}}function hf(n){return`${n.before?"b":"a"}:${n.position.map(e=>Yy(e)).join(",")}`}class Xl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Md(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function uw(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const l=e[o],h=n.position[o];if(r=l.field.isKeyField()?at.comparator(at.fromName(h.referenceValue),t.key):Ru(h,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function lw(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vo(n.position[t],e.position[t]))return!1;return!0}class Qo{constructor(e,t=null,r=[],o=[],l=null,h="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=h,this.startAt=m,this.endAt=w,this.S=null,this.D=null}}function cw(n,e,t,r,o,l,h,m){return new Qo(n,e,t,r,o,l,h,m)}function ec(n){return new Qo(n)}function Xy(n){return!xu(n.limit)&&"F"===n.limitType}function ff(n){return!xu(n.limit)&&"L"===n.limitType}function pf(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Gs(n){for(const e of n.filters)if(e.V())return e.field;return null}function e_(n){return null!==n.collectionGroup}function xd(n){const e=Ke(n);if(null===e.S){e.S=[];const t=Gs(e),r=pf(e);if(null!==t&&null===r)t.isKeyField()||e.S.push(new Xl(t)),e.S.push(new Xl(di.keyField(),"asc"));else{let o=!1;for(const l of e.explicitOrderBy)e.S.push(l),l.field.isKeyField()&&(o=!0);if(!o){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new Xl(di.keyField(),l))}}}return e.S}function ar(n){const e=Ke(n);if(!e.D)if("F"===e.limitType)e.D=Jy(e.path,e.collectionGroup,xd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of xd(e))t.push(new Xl(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new df(e.endAt.position,!e.endAt.before):null,o=e.startAt?new df(e.startAt.position,!e.startAt.before):null;e.D=Jy(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.D}function qs(n,e,t){return new Qo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ni(n,e){return lf(ar(n),ar(e))&&n.limitType===e.limitType}function t_(n){return`${Sd(ar(n))}|lt:${n.limitType}`}function fg(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Yy(r.value)}`;var r}).join(", ")}]`),xu(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+hf(n.startAt)),n.endAt&&(e+=", endAt: "+hf(n.endAt)),`Target(${e})`}(ar(n))}; limitType=${n.limitType})`}function gf(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):at.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!uw(t.startAt,xd(t),r)||t.endAt&&uw(t.endAt,xd(t),r)));var t,r}function dw(n){return(e,t)=>{let r=!1;for(const o of xd(n)){const l=SD(o,e,t);if(0!==l)return l;r=r||o.field.isKeyField()}return 0}}function SD(n,e,t){const r=n.field.isKeyField()?at.comparator(e.key,t.key):function(o,l,h){const m=l.data.field(o),w=h.data.field(o);return null!==m&&null!==w?Ru(m,w):lt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}function hw(n,e){if(n.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:of(e)?"-0":e}}function pg(n){return{integerValue:""+n}}function Rd(n,e){return ew(e)?pg(e):hw(n,e)}class gg{constructor(){this._=void 0}}function fw(n,e,t){return n instanceof tc?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof Jo?pw(n,e):n instanceof Nu?r_(n,e):function(r,o){const l=n_(r,o),h=mg(l)+mg(r.N);return uf(l)&&uf(r.N)?pg(h):hw(r.k,h)}(n,e)}function MD(n,e,t){return n instanceof Jo?pw(n,e):n instanceof Nu?r_(n,e):t}function n_(n,e){return n instanceof Ou?uf(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class tc extends gg{}class Jo extends gg{constructor(e){super(),this.elements=e}}function pw(n,e){const t=i_(e);for(const r of n.elements)t.some(o=>vo(o,r))||t.push(r);return{arrayValue:{values:t}}}class Nu extends gg{constructor(e){super(),this.elements=e}}function r_(n,e){let t=i_(e);for(const r of n.elements)t=t.filter(o=>!vo(o,r));return{arrayValue:{values:t}}}class Ou extends gg{constructor(e,t){super(),this.k=e,this.N=t}}function mg(n){return tr(n.integerValue||n.doubleValue)}function i_(n){return dg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Nd{constructor(e,t){this.field=e,this.transform=t}}class mw{constructor(e,t){this.version=e,this.transformResults=t}}class ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class yf{}function yw(n,e,t){n instanceof _f?function(r,o,l){const h=r.value.clone(),m=ww(r.fieldTransforms,o,l.transformResults);h.setAll(m),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Pu?function(r,o,l){if(!mf(r.precondition,o))return void o.convertToUnknownDocument(l.version);const h=ww(r.fieldTransforms,o,l.transformResults),m=o.data;m.setAll(Ew(r)),m.setAll(h),o.convertToFoundDocument(l.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function s_(n,e,t){var o;n instanceof _f?function(r,o,l){if(!mf(r.precondition,o))return;const h=r.value.clone(),m=Iw(r.fieldTransforms,l,o);h.setAll(m),o.convertToFoundDocument(vw(o),h).setHasLocalMutations()}(n,e,t):n instanceof Pu?function(r,o,l){if(!mf(r.precondition,o))return;const h=Iw(r.fieldTransforms,l,o),m=o.data;m.setAll(Ew(r)),m.setAll(h),o.convertToFoundDocument(vw(o),m).setHasLocalMutations()}(n,e,t):mf(n.precondition,o=e)&&o.convertToNoDocument(Pt.min())}function xD(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),l=n_(r.transform,o||null);null!=l&&(null==t&&(t=zr.empty()),t.set(r.field,l))}return t||null}function _w(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&bd(t,r,(o,l)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Jo&&r instanceof Jo||t instanceof Nu&&r instanceof Nu?bd(t.elements,r.elements,vo):t instanceof Ou&&r instanceof Ou?vo(t.N,r.N):t instanceof tc&&r instanceof tc);var t,r}(o,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function vw(n){return n.isFoundDocument()?n.version:Pt.min()}class _f extends yf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Pu extends yf{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}}function Ew(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function ww(n,e,t){const r=new Map;Et(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],h=l.transform,m=e.data.field(l.field);r.set(l.field,MD(h,m,t[o]))}return r}function Iw(n,e,t){const r=new Map;for(const o of n){const l=o.transform,h=t.data.field(o.field);r.set(o.field,fw(l,h,e))}return r}class vf extends yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class o_ extends yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class RD{constructor(e){this.count=e}}var Ir,Yt;function Dw(n){switch(n){default:return lt();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function Cw(n){if(void 0===n)return Nr("GRPC error has no .code"),de.UNKNOWN;switch(n){case Ir.OK:return de.OK;case Ir.CANCELLED:return de.CANCELLED;case Ir.UNKNOWN:return de.UNKNOWN;case Ir.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case Ir.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case Ir.INTERNAL:return de.INTERNAL;case Ir.UNAVAILABLE:return de.UNAVAILABLE;case Ir.UNAUTHENTICATED:return de.UNAUTHENTICATED;case Ir.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case Ir.NOT_FOUND:return de.NOT_FOUND;case Ir.ALREADY_EXISTS:return de.ALREADY_EXISTS;case Ir.PERMISSION_DENIED:return de.PERMISSION_DENIED;case Ir.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case Ir.ABORTED:return de.ABORTED;case Ir.OUT_OF_RANGE:return de.OUT_OF_RANGE;case Ir.UNIMPLEMENTED:return de.UNIMPLEMENTED;case Ir.DATA_LOSS:return de.DATA_LOSS;default:return lt()}}(Yt=Ir||(Ir={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";class kr{constructor(e,t){this.comparator=e,this.root=t||Wr.EMPTY}insert(e,t){return new kr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wr.BLACK,null,null))}remove(e){return new kr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yg(this.root,e,this.comparator,!1)}getReverseIterator(){return new yg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yg(this.root,e,this.comparator,!0)}}class yg{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wr{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=null!=r?r:Wr.RED,this.left=null!=o?o:Wr.EMPTY,this.right=null!=l?l:Wr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new Wr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===l?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Wr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Wr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}Wr.EMPTY=null,Wr.RED=!0,Wr.BLACK=!1,Wr.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Wr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zn{constructor(e){this.comparator=e,this.data=new kr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new a_(this.data.getIterator())}getIteratorFrom(e){return new a_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Zn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(o,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Zn(this.comparator);return t.data=e,t}}class a_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const bw=new kr(at.comparator);function vs(){return bw}const Tw=new kr(at.comparator);function _g(){return Tw}const Aw=new kr(at.comparator);function u_(){return Aw}const Sw=new Zn(at.comparator);function vn(...n){let e=Sw;for(const t of n)e=e.add(t);return e}const nc=new Zn(qt);function vg(){return nc}class Ef{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Xo.createSynthesizedTargetChangeForCurrentChange(e,t)),new Ef(Pt.min(),r,vg(),vs(),vn())}}class Xo{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Xo(Er.EMPTY_BYTE_STRING,t,vn(),vn(),vn())}}class l_{constructor(e,t,r,o){this.$=e,this.removedTargetIds=t,this.key=r,this.F=o}}class Eg{constructor(e,t){this.targetId=e,this.O=t}}class ND{constructor(e,t,r=Er.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class c_{constructor(){this.M=0,this.L=gt(),this.B=Er.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=vn(),t=vn(),r=vn();return this.L.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:lt()}}),new Xo(this.B,this.U,e,t,r)}H(){this.q=!1,this.L=gt()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class Mw{constructor(e){this.et=e,this.nt=new Map,this.st=vs(),this.it=OD(),this.rt=new Zn(qt)}ot(e){for(const t of e.$)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ut(e){this.forEachTarget(e,t=>{const r=this.ht(t);switch(e.state){case 0:this.lt(t)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||this.removeTarget(t);break;case 3:this.lt(t)&&(r.tt(),r.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),r.W(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((r,o)=>{this.lt(o)&&t(o)})}dt(e){const t=e.targetId,r=e.O.count,o=this.wt(t);if(o){const l=o.target;if(cf(l))if(0===r){const h=new at(l.path);this.ct(t,h,Un.newNoDocument(h,Pt.min()))}else Et(1===r);else this._t(t)!==r&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((l,h)=>{const m=this.wt(h);if(m){if(l.current&&cf(m.target)){const w=new at(m.target.path);null!==this.st.get(w)||this.yt(h,w)||this.ct(h,w,Un.newNoDocument(w,e))}l.j&&(t.set(h,l.G()),l.H())}});let r=vn();this.it.forEach((l,h)=>{let m=!0;h.forEachWhile(w=>{const A=this.wt(w);return!A||2===A.purpose||(m=!1,!1)}),m&&(r=r.add(l))});const o=new Ef(e,t,this.rt,this.st,r);return this.st=vs(),this.it=OD(),this.rt=new Zn(qt),o}at(e,t){if(!this.lt(e))return;const r=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,r),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.lt(e))return;const o=this.ht(e);this.yt(e,t)?o.J(t,1):o.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),r&&(this.st=this.st.insert(t,r))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new c_,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new Zn(qt),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new c_),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function OD(){return new kr(at.comparator)}function gt(){return new kr(at.comparator)}const PD={asc:"ASCENDING",desc:"DESCENDING"},kD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class FD{constructor(e,t){this.databaseId=e,this.C=t}}function ku(n,e){return n.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xw(n,e){return n.C?e.toBase64():e.toUint8Array()}function wg(n,e){return ku(n,e.toTimestamp())}function lr(n){return Et(!!n),Pt.fromTimestamp(function(e){const t=Su(e);return new Pr(t.seconds,t.nanos)}(n))}function Wn(n,e){return(t=n,new nn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function LD(n){const e=nn.fromString(n);return Et(Uw(e)),e}function Od(n,e){return Wn(n.databaseId,e.path)}function ea(n,e){const t=LD(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new at(f_(t))}function d_(n,e){return Wn(n.databaseId,e)}function h_(n){const e=LD(n);return 4===e.length?nn.emptyPath():f_(e)}function Pd(n){return new nn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function f_(n){return Et(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function p_(n,e,t){return{name:Od(n,e),fields:t.value.mapValue.fields}}function Rw(n,e,t){const r=ea(n,e.name),o=lr(e.updateTime),l=new zr({mapValue:{fields:e.fields}}),h=Un.newFoundDocument(r,o,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Fu(n,e){let t;if(e instanceof _f)t={update:p_(n,e.key,e.value)};else if(e instanceof vf)t={delete:Od(n,e.key)};else if(e instanceof Pu)t={update:p_(n,e.key,e.data),updateMask:Vw(e.fieldMask)};else{if(!(e instanceof o_))return lt();t={verify:Od(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const h=l.transform;if(h instanceof tc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Jo)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Nu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Ou)return{fieldPath:l.field.canonicalString(),increment:h.N};throw lt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:wg(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:lt()),t;var o}function Nw(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?ur.updateTime(lr(o.updateTime)):void 0!==o.exists?ur.exists(o.exists):ur.none():ur.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(l,h){let m=null;"setToServerValue"in h?(Et("REQUEST_TIME"===h.setToServerValue),m=new tc):"appendMissingElements"in h?m=new Jo(h.appendMissingElements.values||[]):"removeAllFromArray"in h?m=new Nu(h.removeAllFromArray.values||[]):"increment"in h?m=new Ou(l,h.increment):lt();const w=di.fromServerFormat(h.fieldPath);return new Nd(w,m)}(n,o)):[];var o;if(e.update){const o=ea(n,e.update.name),l=new zr({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new Yo((e.updateMask.fieldPaths||[]).map(A=>di.fromServerFormat(A)));return new Pu(o,l,h,t,r)}return new _f(o,l,t,r)}if(e.delete){const o=ea(n,e.delete);return new vf(o,t)}if(e.verify){const o=ea(n,e.verify);return new o_(o,t)}return lt()}function Ow(n,e){return{documents:[d_(n,e.path)]}}function wf(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=d_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=d_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(m){if(0===m.length)return;const w=m.map(A=>function(N){if("=="===N.op){if(nw(N.value))return{unaryFilter:{field:Fd(N.field),op:"IS_NAN"}};if(tw(N.value))return{unaryFilter:{field:Fd(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(nw(N.value))return{unaryFilter:{field:Fd(N.field),op:"IS_NOT_NAN"}};if(tw(N.value))return{unaryFilter:{field:Fd(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fd(N.field),op:jD(N.op),value:N.value}}}(A));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);o&&(t.structuredQuery.where=o);const l=function(m){if(0!==m.length)return m.map(w=>{return{field:Fd((A=w).field),direction:If(A.dir)};var A})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=(w=e.limit,n.C||xu(w)?w:{value:w});var w;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=kw(e.startAt)),e.endAt&&(t.structuredQuery.endAt=kw(e.endAt)),t}function g_(n){let e=h_(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Et(1===r);const N=t.from[0];N.allDescendants?o=N.collectionId:e=e.child(N.collectionId)}let l=[];t.where&&(l=m_(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(N=>{return new Xl(Ld((P=N).field),function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction));var P}));let m=null;t.limit&&(m=function(N){let P;return P="object"==typeof N?N.value:N,xu(P)?null:P}(t.limit));let w=null;t.startAt&&(w=kd(t.startAt));let A=null;return t.endAt&&(A=kd(t.endAt)),cw(e,o,h,l,m,"F",w,A)}function m_(n){return n?void 0!==n.unaryFilter?[Lw(n)]:void 0!==n.fieldFilter?[Fw(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>m_(e)).reduce((e,t)=>e.concat(t)):lt():[]}function kw(n){return{before:n.before,values:n.position}}function kd(n){return new df(n.values||[],!!n.before)}function If(n){return PD[n]}function jD(n){return kD[n]}function Fd(n){return{fieldPath:n.canonicalString()}}function Ld(n){return di.fromServerFormat(n.fieldPath)}function Fw(n){return Wi.create(Ld(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}function Lw(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ld(n.unaryFilter.field);return Wi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ld(n.unaryFilter.field);return Wi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ld(n.unaryFilter.field);return Wi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ld(n.unaryFilter.field);return Wi.create(o,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}function Vw(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Uw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function zs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Bw(e)),e=$D(n.get(t),e);return Bw(e)}function $D(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const l=n.charAt(o);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function Bw(n){return n+"\x01\x01"}function Lu(n){const e=n.length;if(Et(e>=2),2===e)return Et("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),nn.emptyPath();const t=e-2,r=[];let o="";for(let l=0;l<e;){const h=n.indexOf("\x01",l);switch((h<0||h>t)&&lt(),n.charAt(h+1)){case"\x01":const m=n.substring(l,h);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(l,h),o+="\0";break;case"\x11":o+=n.substring(l,h+1);break;default:lt()}l=h+2}return new nn(r)}class mT{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Ws{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}Ws.store="owner",Ws.key="owner";class rc{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}rc.store="mutationQueues",rc.keyPath="userId";class kn{constructor(e,t,r,o,l){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=o,this.mutations=l}}kn.store="mutations",kn.keyPath="batchId",kn.userMutationsIndex="userMutationsIndex",kn.userMutationsKeyPath=["userId","batchId"];class Fr{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,zs(t)]}static key(e,t,r){return[e,zs(t),r]}}Fr.store="documentMutations",Fr.PLACEHOLDER=new Fr;class HD{constructor(e,t){this.path=e,this.readTime=t}}class GD{constructor(e,t){this.path=e,this.version=t}}class Yn{constructor(e,t,r,o,l,h){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=o,this.readTime=l,this.parentPath=h}}Yn.store="remoteDocuments",Yn.readTimeIndex="readTimeIndex",Yn.readTimeIndexPath="readTime",Yn.collectionReadTimeIndex="collectionReadTimeIndex",Yn.collectionReadTimeIndexPath=["parentPath","readTime"];class Ki{constructor(e){this.byteSize=e}}Ki.store="remoteDocumentGlobal",Ki.key="remoteDocumentGlobalKey";class Zi{constructor(e,t,r,o,l,h,m){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=o,this.lastListenSequenceNumber=l,this.lastLimboFreeSnapshotVersion=h,this.query=m}}Zi.store="targets",Zi.keyPath="targetId",Zi.queryTargetsIndexName="queryTargetsIndex",Zi.queryTargetsKeyPath=["canonicalId","targetId"];class ni{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}ni.store="targetDocuments",ni.keyPath=["targetId","path"],ni.documentTargetsIndex="documentTargetsIndex",ni.documentTargetsKeyPath=["path","targetId"];class Es{constructor(e,t,r,o){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=o}}Es.key="targetGlobalKey",Es.store="targetGlobal";class ic{constructor(e,t){this.collectionId=e,this.parent=t}}ic.store="collectionParents",ic.keyPath=["collectionId","parent"];class ka{constructor(e,t,r,o){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=o}}ka.store="clientMetadata",ka.keyPath="clientId";class sc{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}sc.store="bundles",sc.keyPath="bundleId";class Vd{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Vd.store="namedQueries",Vd.keyPath="name";const qD=[rc.store,kn.store,Fr.store,Yn.store,Zi.store,Ws.store,Es.store,ni.store,ka.store,Ki.store,ic.store,sc.store,Vd.store],oc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Me((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Me?t:Me.resolve(t)}catch(t){return Me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Me.reject(t)}static resolve(e){return new Me((t,r)=>{t(e)})}static reject(e){return new Me((t,r)=>{r(e)})}static waitFor(e){return new Me((t,r)=>{let o=0,l=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++l,h&&l===o&&t()},w=>r(w))}),h=!0,l===o&&t()})}static or(e){let t=Me.resolve(!1);for(const r of e)t=t.next(o=>o?Me.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,l)=>{r.push(t.call(this,o,l))}),this.waitFor(r)}}class Ig{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new Or,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new Ud(e,t.error)):this.It.resolve()},this.transaction.onerror=r=>{const o=Dg(r.target.error);this.It.reject(new Ud(e,o))}}static open(e,t,r,o){try{return new Ig(t,e.transaction(o,r))}catch(l){throw new Ud(t,l)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new y_(t)}}class Ks{constructor(e,t,r){this.name=e,this.version=t,this.Rt=r,12.2===Ks.Pt((0,jt.z$)())&&Nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),uc(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,jt.hl)())return!1;if(Ks.vt())return!0;const e=(0,jt.z$)(),t=Ks.Pt(e),r=0<t&&t<10,o=Ks.Vt(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,t){return e.store(t)}static Pt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Ct(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=h=>{r(h.target.result)},l.onblocked=()=>{o(new Ud(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=h=>{const m=h.target.error;o("VersionError"===m.name?new Re(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Re(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Ud(e,m))},l.onupgradeneeded=h=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.Rt.Nt(h.target.result,l.transaction,h.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.kt&&(t.db.onversionchange=r=>t.kt(r)),t.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var l=this;return(0,_e.Z)(function*(){const h="readonly"===t;let m=0;for(;;){++m;try{l.db=yield l.Ct(e);const w=Ig.open(l.db,e,h?"readonly":"readwrite",r),A=o(w).catch(N=>(w.abort(N),Me.reject(N))).toPromise();return A.catch(()=>{}),yield w.At,A}catch(w){const A="FirebaseError"!==w.name&&m<3;if(Le("SimpleDb","Transaction failed with error:",w.message,"Retrying:",A),l.close(),!A)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class zD{constructor(e){this.$t=e,this.Ft=!1,this.Ot=null}get isDone(){return this.Ft}get Mt(){return this.Ot}set cursor(e){this.$t=e}done(){this.Ft=!0}Lt(e){this.Ot=e}delete(){return uc(this.$t.delete())}}class Ud extends Re{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ac(n){return"IndexedDbTransactionError"===n.name}class y_{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),uc(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),uc(this.store.add(e))}get(e){return uc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),uc(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),uc(this.store.count())}Bt(e,t){const r=this.cursor(this.options(e,t)),o=[];return this.Ut(r,(l,h)=>{o.push(h)}).next(()=>o)}qt(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Kt=!1;const o=this.cursor(r);return this.Ut(o,(l,h,m)=>m.delete())}jt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Ut(o,t)}Qt(e){const t=this.cursor({});return new Me((r,o)=>{t.onerror=l=>{const h=Dg(l.target.error);o(h)},t.onsuccess=l=>{const h=l.target.result;h?e(h.primaryKey,h.value).next(m=>{m?h.continue():r()}):r()}})}Ut(e,t){const r=[];return new Me((o,l)=>{e.onerror=h=>{l(h.target.error)},e.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const w=new zD(m),A=t(m.primaryKey,m.value,w);if(A instanceof Me){const N=A.catch(P=>(w.done(),Me.reject(P)));r.push(N)}w.isDone?o():null===w.Mt?m.continue():m.continue(w.Mt)}}).next(()=>Me.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Kt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function uc(n){return new Me((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Dg(r.target.error);t(o)}})}let __=!1;function Dg(n){const e=Ks.Pt((0,jt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return __||(__=!0,setTimeout(()=>{throw r},0)),r}}return n}class $w extends jw{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function Yi(n,e){const t=Ke(n);return Ks.Dt(t.Wt,e)}class v_{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&yw(l,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&s_(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&s_(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(Pt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),vn())}isEqual(e){return this.batchId===e.batchId&&bd(this.mutations,e.mutations,(t,r)=>_w(t,r))&&bd(this.baseMutations,e.baseMutations,(t,r)=>_w(t,r))}}class Df{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Et(e.mutations.length===r.length);let o=u_();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,r[h].version);return new Df(e,t,r,o)}}class Vu{constructor(e,t,r,o,l=Pt.min(),h=Pt.min(),m=Er.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m}withSequenceNumber(e){return new Vu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class E_{constructor(e){this.Gt=e}}function w_(n,e){if(e.document)return Rw(n.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=at.fromSegments(e.noDocument.path),r=jd(e.noDocument.readTime),o=Un.newNoDocument(t,r);return e.hasCommittedMutations?o.setHasCommittedMutations():o}if(e.unknownDocument){const t=at.fromSegments(e.unknownDocument.path),r=jd(e.unknownDocument.version);return Un.newUnknownDocument(t,r)}return lt()}function Hw(n,e,t){const r=I_(t),o=e.key.path.popLast().toArray();if(e.isFoundDocument()){const l={name:Od(m=n.Gt,(w=e).key),fields:w.data.value.mapValue.fields,updateTime:ku(m,w.version.toTimestamp())};return new Yn(null,null,l,e.hasCommittedMutations,r,o)}var m,w;if(e.isNoDocument()){const l=e.key.path.toArray(),h=Bd(e.version),m=e.hasCommittedMutations;return new Yn(null,new HD(l,h),null,m,r,o)}if(e.isUnknownDocument()){const l=e.key.path.toArray(),h=Bd(e.version);return new Yn(new GD(l,h),null,null,!0,r,o)}return lt()}function I_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Gw(n){const e=new Pr(n[0],n[1]);return Pt.fromTimestamp(e)}function Bd(n){const e=n.toTimestamp();return new mT(e.seconds,e.nanoseconds)}function jd(n){const e=new Pr(n.seconds,n.nanoseconds);return Pt.fromTimestamp(e)}function $d(n,e){const t=(e.baseMutations||[]).map(l=>Nw(n.Gt,l));for(let l=0;l<e.mutations.length-1;++l){const h=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(h.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>Nw(n.Gt,l)),o=Pr.fromMillis(e.localWriteTimeMs);return new v_(e.batchId,o,t,r)}function Cf(n){const e=jd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?jd(n.lastLimboFreeSnapshotVersion):Pt.min();let r;var o;return void 0!==n.query.documents?(Et(1===(o=n.query).documents.length),r=ar(ec(h_(o.documents[0])))):r=ar(g_(n.query)),new Vu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Er.fromBase64String(n.resumeToken))}function D_(n,e){const t=Bd(e.snapshotVersion),r=Bd(e.lastLimboFreeSnapshotVersion);let o;o=cf(e.target)?Ow(n.Gt,e.target):wf(n.Gt,e.target);const l=e.resumeToken.toBase64();return new Zi(e.targetId,Sd(e.target),t,l,e.sequenceNumber,r,o)}function Cg(n){const e=g_({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?qs(e,e.limit,"L"):e}class WD{getBundleMetadata(e,t){return qw(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:jd(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return qw(e).put({bundleId:(r=t).id,createTime:Bd(lr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return C_(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Cg(o.bundledQuery),readTime:jd(o.readTime)};var o})}saveNamedQuery(e,t){return C_(e).put({name:(r=t).name,readTime:Bd(lr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function qw(n){return Yi(n,sc.store)}function C_(n){return Yi(n,Vd.store)}class KD{constructor(){this.zt=new b_}addToCollectionParentIndex(e,t){return this.zt.add(t),Me.resolve()}getCollectionParents(e,t){return Me.resolve(this.zt.getEntries(t))}}class b_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Zn(nn.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Zn(nn.comparator)).toArray()}}class ZD{constructor(){this.Ht=new b_}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const l={collectionId:r,parent:zs(o)};return bg(e).put(l)}return Me.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[JE(t),""],!1,!0);return bg(e).Bt(o).next(l=>{for(const h of l){if(h.collectionId!==t)break;r.push(Lu(h.parent))}return r})}}function bg(n){return Yi(n,ic.store)}const Tg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Oi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Oi(e,Oi.DEFAULT_COLLECTION_PERCENTILE,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ag(n,e,t){const r=n.store(kn.store),o=n.store(Fr.store),l=[],h=IDBKeyRange.only(t.batchId);let m=0;const w=r.jt({range:h},(N,P,Z)=>(m++,Z.delete()));l.push(w.next(()=>{Et(1===m)}));const A=[];for(const N of t.mutations){const P=Fr.key(e,N.key.path,t.batchId);l.push(o.delete(P)),A.push(N.key)}return Me.waitFor(l).next(()=>A)}function Sg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt();e=n.noDocument}return JSON.stringify(e).length}Oi.DEFAULT_COLLECTION_PERCENTILE=10,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oi.DEFAULT=new Oi(41943040,Oi.DEFAULT_COLLECTION_PERCENTILE,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oi.DISABLED=new Oi(-1,0,0);class T_{constructor(e,t,r,o){this.userId=e,this.k=t,this.Jt=r,this.referenceDelegate=o,this.Yt={}}static Xt(e,t,r,o){Et(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new T_(l,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Uu(e).jt({index:kn.userMutationsIndex,range:r},(o,l,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const l=lc(e),h=Uu(e);return h.add({}).next(m=>{Et("number"==typeof m);const w=new v_(m,t,r,o),A=function(Z,te,Ce){const Ye=Ce.baseMutations.map(Qt=>Fu(Z.Gt,Qt)),et=Ce.mutations.map(Qt=>Fu(Z.Gt,Qt));return new kn(te,Ce.batchId,Ce.localWriteTime.toMillis(),Ye,et)}(this.k,this.userId,w),N=[];let P=new Zn((Z,te)=>qt(Z.canonicalString(),te.canonicalString()));for(const Z of o){const te=Fr.key(this.userId,Z.key.path,m);P=P.add(Z.key.path.popLast()),N.push(h.put(A)),N.push(l.put(te,Fr.PLACEHOLDER))}return P.forEach(Z=>{N.push(this.Jt.addToCollectionParentIndex(e,Z))}),e.addOnCommittedListener(()=>{this.Yt[m]=w.keys()}),Me.waitFor(N).next(()=>w)})}lookupMutationBatch(e,t){return Uu(e).get(t).next(r=>r?(Et(r.userId===this.userId),$d(this.k,r)):null)}Zt(e,t){return this.Yt[t]?Me.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Yt[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Uu(e).jt({index:kn.userMutationsIndex,range:o},(h,m,w)=>{m.userId===this.userId&&(Et(m.batchId>=r),l=$d(this.k,m)),w.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Uu(e).jt({index:kn.userMutationsIndex,range:t,reverse:!0},(o,l,h)=>{r=l.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Uu(e).Bt(kn.userMutationsIndex,t).next(r=>r.map(o=>$d(this.k,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Fr.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(r),l=[];return lc(e).jt({range:o},(h,m,w)=>{const[A,N,P]=h,Z=Lu(N);if(A===this.userId&&t.path.isEqual(Z))return Uu(e).get(P).next(te=>{if(!te)throw lt();Et(te.userId===this.userId),l.push($d(this.k,te))});w.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Zn(qt);const o=[];return t.forEach(l=>{const h=Fr.prefixForPath(this.userId,l.path),m=IDBKeyRange.lowerBound(h),w=lc(e).jt({range:m},(A,N,P)=>{const[Z,te,Ce]=A,Ye=Lu(te);Z===this.userId&&l.path.isEqual(Ye)?r=r.add(Ce):P.done()});o.push(w)}),Me.waitFor(o).next(()=>this.te(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,l=Fr.prefixForPath(this.userId,r),h=IDBKeyRange.lowerBound(l);let m=new Zn(qt);return lc(e).jt({range:h},(w,A,N)=>{const[P,Z,te]=w,Ce=Lu(Z);P===this.userId&&r.isPrefixOf(Ce)?Ce.length===o&&(m=m.add(te)):N.done()}).next(()=>this.te(e,m))}te(e,t){const r=[],o=[];return t.forEach(l=>{o.push(Uu(e).get(l).next(h=>{if(null===h)throw lt();Et(h.userId===this.userId),r.push($d(this.k,h))}))}),Me.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Ag(e.Wt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),Me.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Me.resolve();const r=IDBKeyRange.lowerBound(Fr.prefixForUser(this.userId)),o=[];return lc(e).jt({range:r},(l,h,m)=>{if(l[0]===this.userId){const w=Lu(l[1]);o.push(w)}else m.done()}).next(()=>{Et(0===o.length)})})}containsKey(e,t){return Mg(e,this.userId,t)}ne(e){return zw(e).get(this.userId).next(t=>t||new rc(this.userId,-1,""))}}function Mg(n,e,t){const r=Fr.prefixForPath(e,t.path),o=r[1],l=IDBKeyRange.lowerBound(r);let h=!1;return lc(n).jt({range:l,Kt:!0},(m,w,A)=>{const[N,P,Z]=m;N===e&&P===o&&(h=!0),A.done()}).next(()=>h)}function Uu(n){return Yi(n,kn.store)}function lc(n){return Yi(n,Fr.store)}function zw(n){return Yi(n,rc.store)}class Bu{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new Bu(0)}static re(){return new Bu(-1)}}class YD{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const r=new Bu(t.highestTargetId);return t.highestTargetId=r.next(),this.ae(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(t=>Pt.fromTimestamp(new Pr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.oe(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.ae(e,o)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.oe(e).next(r=>(r.targetCount+=1,this.ue(t,r),this.ae(e,r))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>cc(e).delete(t.targetId)).next(()=>this.oe(e)).next(r=>(Et(r.targetCount>0),r.targetCount-=1,this.ae(e,r)))}removeTargets(e,t,r){let o=0;const l=[];return cc(e).jt((h,m)=>{const w=Cf(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,l.push(this.removeTargetData(e,w)))}).next(()=>Me.waitFor(l)).next(()=>o)}forEachTarget(e,t){return cc(e).jt((r,o)=>{const l=Cf(o);t(l)})}oe(e){return QD(e).get(Es.key).next(t=>(Et(null!==t),t))}ae(e,t){return QD(e).put(Es.key,t)}ce(e,t){return cc(e).put(D_(this.k,t))}ue(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.oe(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Sd(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return cc(e).jt({range:o,index:Zi.queryTargetsIndexName},(h,m,w)=>{const A=Cf(m);lf(t,A.target)&&(l=A,w.done())}).next(()=>l)}addMatchingKeys(e,t,r){const o=[],l=ju(e);return t.forEach(h=>{const m=zs(h.path);o.push(l.put(new ni(r,m))),o.push(this.referenceDelegate.addReference(e,r,h))}),Me.waitFor(o)}removeMatchingKeys(e,t,r){const o=ju(e);return Me.forEach(t,l=>{const h=zs(l.path);return Me.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=ju(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=ju(e);let l=vn();return o.jt({range:r,Kt:!0},(h,m,w)=>{const A=Lu(h[1]),N=new at(A);l=l.add(N)}).next(()=>l)}containsKey(e,t){const r=zs(t.path),o=IDBKeyRange.bound([r],[JE(r)],!1,!0);let l=0;return ju(e).jt({index:ni.documentTargetsIndex,Kt:!0,range:o},([h,m],w,A)=>{0!==h&&(l++,A.done())}).next(()=>l>0)}Et(e,t){return cc(e).get(t).next(r=>r?Cf(r):null)}}function cc(n){return Yi(n,Zi.store)}function QD(n){return Yi(n,Es.store)}function ju(n){return Yi(n,ni.store)}function Eo(n){return A_.apply(this,arguments)}function A_(){return A_=(0,_e.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==oc)throw n;Le("LocalStore","Unexpectedly lost primary lease")}),A_.apply(this,arguments)}function dc([n,e],[t,r]){const o=qt(n,t);return 0===o?qt(e,r):o}class bf{constructor(e){this.he=e,this.buffer=new Zn(dc),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();dc(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class JD{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var t=this;const r=this.we?3e5:6e4;Le("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,_e.Z)(function*(){t._e=null,t.we=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){ac(o)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Eo(o)}yield t.me(e)}))}}class yT{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Me.resolve(zi.I);const r=new bf(t);return this.ge.forEachTarget(e,o=>r.de(o.sequenceNumber)).next(()=>this.ge.pe(e,o=>r.de(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.ge.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),Me.resolve(Tg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tg):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let r,o,l,h,m,w,A;const N=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(P=>(P>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),o=this.params.maximumSequenceNumbersToCollect):o=P,h=Date.now(),this.nthSequenceNumber(e,o))).next(P=>(r=P,m=Date.now(),this.removeTargets(e,r,t))).next(P=>(l=P,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(P=>(A=Date.now(),sg()<=yu.in.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-N}ms\n\tDetermined least recently used ${o} in `+(m-h)+`ms\n\tRemoved ${l} targets in `+(w-m)+`ms\n\tRemoved ${P} documents in `+(A-w)+`ms\nTotal Duration: ${A-N}ms`),Me.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:P})))}}class Ww{constructor(e,t){this.db=e,this.garbageCollector=new yT(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Ee(e){let t=0;return this.pe(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(r,o)=>t(o))}addReference(e,t,r){return xg(e,r)}removeReference(e,t,r){return xg(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return xg(e,t)}Ae(e,t){return function(r,o){let l=!1;return zw(r).Qt(h=>Mg(r,h,o).next(m=>(m&&(l=!0),Me.resolve(!m)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.Ie(e,(h,m)=>{if(m<=t){const w=this.Ae(e,h).next(A=>{if(!A)return l++,r.getEntry(e,h).next(()=>(r.removeEntry(h),ju(e).delete([0,zs(h.path)])))});o.push(w)}}).next(()=>Me.waitFor(o)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return xg(e,t)}Ie(e,t){const r=ju(e);let o,l=zi.I;return r.jt({index:ni.documentTargetsIndex},([h,m],{path:w,sequenceNumber:A})=>{0===h?(l!==zi.I&&t(new at(Lu(o)),l),l=A,o=w):l=zi.I}).next(()=>{l!==zi.I&&t(new at(Lu(o)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xg(n,e){return ju(n).put((r=n.currentSequenceNumber,new ni(0,zs(e.path),r)));var r}class Hd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,l]of r)if(this.equalsFn(o,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0!==o){for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),!0;return!1}forEach(e){Au(this.inner,(t,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return ag(this.inner)}}class Kw{constructor(){this.changes=new Hd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:Pt.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Un.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Me.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class XD{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,r){return ta(e).put(hc(t),r)}removeEntry(e,t){const r=ta(e),o=hc(t);return r.delete(o)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Re(e,r)))}getEntry(e,t){return ta(e).get(hc(t)).next(r=>this.Pe(t,r))}be(e,t){return ta(e).get(hc(t)).next(r=>({document:this.Pe(t,r),size:Sg(r)}))}getEntries(e,t){let r=vs();return this.ve(e,t,(o,l)=>{const h=this.Pe(o,l);r=r.insert(o,h)}).next(()=>r)}Ve(e,t){let r=vs(),o=new kr(at.comparator);return this.ve(e,t,(l,h)=>{const m=this.Pe(l,h);r=r.insert(l,m),o=o.insert(l,Sg(h))}).next(()=>({documents:r,Se:o}))}ve(e,t,r){if(t.isEmpty())return Me.resolve();const o=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),l=t.getIterator();let h=l.getNext();return ta(e).jt({range:o},(m,w,A)=>{const N=at.fromSegments(m);for(;h&&at.comparator(h,N)<0;)r(h,null),h=l.getNext();h&&h.isEqual(N)&&(r(h,w),h=l.hasNext()?l.getNext():null),h?A.Lt(h.path.toArray()):A.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r){let o=vs();const l=t.path.length+1,h={};if(r.isEqual(Pt.min())){const m=t.path.toArray();h.range=IDBKeyRange.lowerBound(m)}else{const m=t.path.toArray(),w=I_(r);h.range=IDBKeyRange.lowerBound([m,w],!0),h.index=Yn.collectionReadTimeIndex}return ta(e).jt(h,(m,w,A)=>{if(m.length!==l)return;const N=w_(this.k,w);t.path.isPrefixOf(N.key.path)?gf(t,N)&&(o=o.insert(N.key,N)):A.done()}).next(()=>o)}newChangeBuffer(e){return new Zw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return S_(e).get(Ki.key).next(t=>(Et(!!t),t))}Re(e,t){return S_(e).put(Ki.key,t)}Pe(e,t){if(t){const r=w_(this.k,t);if(!r.isNoDocument()||!r.version.isEqual(Pt.min()))return r}return Un.newInvalidDocument(e)}}class Zw extends Kw{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new Hd(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Zn((l,h)=>qt(l.canonicalString(),h.canonicalString()));return this.changes.forEach((l,h)=>{const m=this.Ce.get(l);if(h.document.isValidDocument()){const w=Hw(this.De.k,h.document,this.getReadTime(l));o=o.add(l.path.popLast()),r+=Sg(w)-m,t.push(this.De.addEntry(e,l,w))}else if(r-=m,this.trackRemovals){const w=Hw(this.De.k,Un.newNoDocument(l,Pt.min()),this.getReadTime(l));t.push(this.De.addEntry(e,l,w))}else t.push(this.De.removeEntry(e,l))}),o.forEach(l=>{t.push(this.De.Jt.addToCollectionParentIndex(e,l))}),t.push(this.De.updateMetadata(e,r)),Me.waitFor(t)}getFromCache(e,t){return this.De.be(e,t).next(r=>(this.Ce.set(t,r.size),r.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:r,Se:o})=>(o.forEach((l,h)=>{this.Ce.set(l,h)}),r))}}function S_(n){return Yi(n,Ki.store)}function ta(n){return Yi(n,Yn.store)}function hc(n){return n.path.toArray()}class Tf{constructor(e){this.k=e}Nt(e,t,r,o){Et(r<o&&r>=0&&o<=11);const l=new Ig("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore(Ws.store),(m=e).createObjectStore(rc.store,{keyPath:rc.keyPath}),m.createObjectStore(kn.store,{keyPath:kn.keyPath,autoIncrement:!0}).createIndex(kn.userMutationsIndex,kn.userMutationsKeyPath,{unique:!0}),m.createObjectStore(Fr.store),Yw(e),function(m){m.createObjectStore(Yn.store)}(e));let h=Me.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore(ni.store),m.deleteObjectStore(Zi.store),m.deleteObjectStore(Es.store)}(e),Yw(e)),h=h.next(()=>function(m){const w=m.store(Es.store),A=new Es(0,0,Pt.min().toTimestamp(),0);return w.put(Es.key,A)}(l))),r<4&&o>=4&&(0!==r&&(h=h.next(()=>function(m,w){return w.store(kn.store).Bt().next(A=>{m.deleteObjectStore(kn.store),m.createObjectStore(kn.store,{keyPath:kn.keyPath,autoIncrement:!0}).createIndex(kn.userMutationsIndex,kn.userMutationsKeyPath,{unique:!0});const N=w.store(kn.store),P=A.map(Z=>N.put(Z));return Me.waitFor(P)})}(e,l))),h=h.next(()=>{!function(m){m.createObjectStore(ka.store,{keyPath:ka.keyPath})}(e)})),r<5&&o>=5&&(h=h.next(()=>this.Ne(l))),r<6&&o>=6&&(h=h.next(()=>(function(m){m.createObjectStore(Ki.store)}(e),this.ke(l)))),r<7&&o>=7&&(h=h.next(()=>this.xe(l))),r<8&&o>=8&&(h=h.next(()=>this.$e(e,l))),r<9&&o>=9&&(h=h.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e),function(m){const w=m.objectStore(Yn.store);w.createIndex(Yn.readTimeIndex,Yn.readTimeIndexPath,{unique:!1}),w.createIndex(Yn.collectionReadTimeIndex,Yn.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&o>=10&&(h=h.next(()=>this.Fe(l))),r<11&&o>=11&&(h=h.next(()=>{(function(m){m.createObjectStore(sc.store,{keyPath:sc.keyPath})})(e),function(m){m.createObjectStore(Vd.store,{keyPath:Vd.keyPath})}(e)})),h}ke(e){let t=0;return e.store(Yn.store).jt((r,o)=>{t+=Sg(o)}).next(()=>{const r=new Ki(t);return e.store(Ki.store).put(Ki.key,r)})}Ne(e){const t=e.store(rc.store),r=e.store(kn.store);return t.Bt().next(o=>Me.forEach(o,l=>{const h=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.Bt(kn.userMutationsIndex,h).next(m=>Me.forEach(m,w=>{Et(w.userId===l.userId);const A=$d(this.k,w);return Ag(e,l.userId,A).next(()=>{})}))}))}xe(e){const t=e.store(ni.store),r=e.store(Yn.store);return e.store(Es.store).get(Es.key).next(o=>{const l=[];return r.jt((h,m)=>{const w=new nn(h),A=[0,zs(w)];l.push(t.get(A).next(N=>N?Me.resolve():t.put(new ni(0,zs(w),o.highestListenSequenceNumber))))}).next(()=>Me.waitFor(l))})}$e(e,t){e.createObjectStore(ic.store,{keyPath:ic.keyPath});const r=t.store(ic.store),o=new b_,l=h=>{if(o.add(h)){const m=h.lastSegment(),w=h.popLast();return r.put({collectionId:m,parent:zs(w)})}};return t.store(Yn.store).jt({Kt:!0},(h,m)=>{const w=new nn(h);return l(w.popLast())}).next(()=>t.store(Fr.store).jt({Kt:!0},([h,m,w],A)=>{const N=Lu(m);return l(N.popLast())}))}Fe(e){const t=e.store(Zi.store);return t.jt((r,o)=>{const l=Cf(o),h=D_(this.k,l);return t.put(h)})}}function Yw(n){n.createObjectStore(ni.store,{keyPath:ni.keyPath}).createIndex(ni.documentTargetsIndex,ni.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Zi.store,{keyPath:Zi.keyPath}).createIndex(Zi.queryTargetsIndexName,Zi.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Es.store)}const Rg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ng{constructor(e,t,r,o,l,h,m,w,A,N){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Oe=l,this.window=h,this.document=m,this.Me=A,this.Le=N,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=P=>Promise.resolve(),!Ng.bt())throw new Re(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ww(this,o),this.Ge=t+"main",this.k=new E_(w),this.ze=new Ks(this.Ge,11,new Tf(this.k)),this.He=new YD(this.referenceDelegate,this.k),this.Jt=new ZD,this.Je=new XD(this.k,this.Jt),this.Ye=new WD,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===N&&Nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(de.FAILED_PRECONDITION,Rg);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new zi(e,this.Me)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var t=this;return this.We=function(){var r=(0,_e.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Og(e).put(new ka(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.an(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(ac(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return Af(e).get(Ws.key).next(t=>Me.resolve(this.un(t)))}hn(e){return Og(e).delete(this.clientId)}ln(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Yi(r,ka.store);return o.Bt().next(l=>{const h=e.dn(l,18e5),m=l.filter(w=>-1===h.indexOf(w));return Me.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.Xe)for(const r of t)e.Xe.removeItem(e.wn(r.clientId))}})()}nn(){this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?Me.resolve(!0):Af(e).get(Ws.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new Re(de.FAILED_PRECONDITION,Rg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Og(e).Bt().next(r=>void 0===this.dn(r,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[Ws.store,ka.store],t=>{const r=new $w(t,zi.I);return e.an(r).next(()=>e.hn(r))}),e.ze.close(),e.pn()})()}dn(e,t){return e.filter(r=>this.fn(r.updateTimeMs,t)&&!this._n(r.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>Og(e).Bt().next(t=>this.dn(t,18e5).map(r=>r.clientId)))}get started(){return this.Ue}getMutationQueue(e){return T_.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,r){let l;return Le("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===t?"readonly":"readwrite",qD,h=>(l=new $w(h,this.Be?this.Be.next():zi.I),"readwrite-primary"===t?this.rn(l).next(m=>!!m||this.on(l)).next(m=>{if(!m)throw Nr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)),new Re(de.FAILED_PRECONDITION,oc);return r(l)}).next(m=>this.cn(l).next(()=>m)):this.En(l).next(()=>r(l)))).then(h=>(l.raiseOnCommittedEvent(),h))}En(e){return Af(e).get(Ws.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)&&!this.un(t)&&!(this.Le||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(de.FAILED_PRECONDITION,Rg)})}cn(e){const t=new Ws(this.clientId,this.allowTabSynchronization,Date.now());return Af(e).put(Ws.key,t)}static bt(){return Ks.bt()}an(e){const t=Af(e);return t.get(Ws.key).next(r=>this.un(r)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete(Ws.key)):Me.resolve())}fn(e,t){const r=Date.now();return!(e<r-t||e>r&&(Nr(`Detected an update time that is in the future: ${e} > ${r}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,jt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const r=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Nr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){Nr("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Af(n){return Yi(n,Ws.store)}function Og(n){return Yi(n,ka.store)}function M_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class x_{constructor(e,t){this.progress=e,this.In=t}}class Qw{constructor(e,t,r){this.Je=e,this.An=t,this.Jt=r}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Pn(e,t,r))}Pn(e,t,r){return this.Je.getEntry(e,t).next(o=>{for(const l of r)l.applyToLocalView(o);return o})}bn(e,t){e.forEach((r,o)=>{for(const l of t)l.applyToLocalView(o)})}vn(e,t){return this.Je.getEntries(e,t).next(r=>this.Vn(e,r).next(()=>r))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.bn(t,r))}getDocumentsMatchingQuery(e,t,r){return at.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Sn(e,t.path):e_(t)?this.Dn(e,t,r):this.Cn(e,t,r);var o}Sn(e,t){return this.Rn(e,new at(t)).next(r=>{let o=_g();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Dn(e,t,r){const o=t.collectionGroup;let l=_g();return this.Jt.getCollectionParents(e,o).next(h=>Me.forEach(h,m=>{const w=(A=t,N=m.child(o),new Qo(N,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt));var A,N;return this.Cn(e,w,r).next(A=>{A.forEach((N,P)=>{l=l.insert(N,P)})})}).next(()=>l))}Cn(e,t,r){let o,l;return this.Je.getDocumentsMatchingQuery(e,t,r).next(h=>(o=h,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(h=>(l=h,this.Nn(e,l,o).next(m=>{o=m;for(const w of l)for(const A of w.mutations){const N=A.key;let P=o.get(N);null==P&&(P=Un.newInvalidDocument(N),o=o.insert(N,P)),s_(A,P,w.localWriteTime),P.isFoundDocument()||(o=o.remove(N))}}))).next(()=>(o.forEach((h,m)=>{gf(t,m)||(o=o.remove(h))}),o))}Nn(e,t,r){let o=vn();for(const h of t)for(const m of h.mutations)m instanceof Pu&&null===r.get(m.key)&&(o=o.add(m.key));let l=r;return this.Je.getEntries(e,o).next(h=>(h.forEach((m,w)=>{w.isFoundDocument()&&(l=l.insert(m,w))}),l))}}class Jw{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.kn=r,this.xn=o}static $n(e,t){let r=vn(),o=vn();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Jw(e,t.fromCache,r,o)}}class Xw{Fn(e){this.On=e}getDocumentsMatchingQuery(e,t,r,o){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(Pt.min())?this.Mn(e,t):this.On.vn(e,o).next(l=>{const h=this.Ln(t,l);return(Xy(t)||ff(t))&&this.Bn(t.limitType,h,o,r)?this.Mn(e,t):(sg()<=yu.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fg(t)),this.On.getDocumentsMatchingQuery(e,t,r).next(m=>(h.forEach(w=>{m=m.insert(w.key,w)}),m)))});var l}Ln(e,t){let r=new Zn(dw(e));return t.forEach((o,l)=>{gf(e,l)&&(r=r.add(l))}),r}Bn(e,t,r,o){if(r.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Mn(e,t){return sg()<=yu.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",fg(t)),this.On.getDocumentsMatchingQuery(e,t,Pt.min())}}class eC{constructor(e,t,r,o){this.persistence=e,this.Un=t,this.k=o,this.qn=new kr(qt),this.Kn=new Hd(l=>Sd(l),lf),this.jn=Pt.min(),this.An=e.getMutationQueue(r),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new Qw(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function fc(n,e,t,r){return new eC(n,e,t,r)}function R_(n,e){return $u.apply(this,arguments)}function $u(){return $u=(0,_e.Z)(function*(n,e){const t=Ke(n);let r=t.An,o=t.Wn;const l=yield t.persistence.runTransaction("Handle user change","readonly",h=>{let m;return t.An.getAllMutationBatches(h).next(w=>(m=w,r=t.persistence.getMutationQueue(e),o=new Qw(t.Qn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(h))).next(w=>{const A=[],N=[];let P=vn();for(const Z of m){A.push(Z.batchId);for(const te of Z.mutations)P=P.add(te.key)}for(const Z of w){N.push(Z.batchId);for(const te of Z.mutations)P=P.add(te.key)}return o.vn(h,P).next(Z=>({Gn:Z,removedBatchIds:A,addedBatchIds:N}))})});return t.An=r,t.Wn=o,t.Un.Fn(t.Wn),l}),$u.apply(this,arguments)}function _T(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=t.Qn.newChangeBuffer({trackRemovals:!0});return function(h,m,w,A){const N=w.batch,P=N.keys();let Z=Me.resolve();return P.forEach(te=>{Z=Z.next(()=>A.getEntry(m,te)).next(Ce=>{const Ye=w.docVersions.get(te);Et(null!==Ye),Ce.version.compareTo(Ye)<0&&(N.applyToRemoteDocument(Ce,w),Ce.isValidDocument()&&A.addEntry(Ce,w.commitVersion))})}),Z.next(()=>h.An.removeMutationBatch(m,N))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.An.performConsistencyCheck(r)).next(()=>t.Wn.vn(r,o))})}function N_(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.He.getLastRemoteSnapshotVersion(t))}function tC(n,e){const t=Ke(n),r=e.snapshotVersion;let o=t.qn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.Qn.newChangeBuffer({trackRemovals:!0});o=t.qn;const m=[];e.targetChanges.forEach((A,N)=>{const P=o.get(N);if(!P)return;m.push(t.He.removeMatchingKeys(l,A.removedDocuments,N).next(()=>t.He.addMatchingKeys(l,A.addedDocuments,N)));const Z=A.resumeToken;if(Z.approximateByteSize()>0){const te=P.withResumeToken(Z,r).withSequenceNumber(l.currentSequenceNumber);o=o.insert(N,te),Ce=P,et=A,Et((Ye=te).resumeToken.approximateByteSize()>0),(0===Ce.resumeToken.approximateByteSize()||Ye.snapshotVersion.toMicroseconds()-Ce.snapshotVersion.toMicroseconds()>=3e8||et.addedDocuments.size+et.modifiedDocuments.size+et.removedDocuments.size>0)&&m.push(t.He.updateTargetData(l,te))}var Ce,Ye,et});let w=vs();if(e.documentUpdates.forEach((A,N)=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,A))}),m.push(nC(l,h,e.documentUpdates,r,void 0).next(A=>{w=A})),!r.isEqual(Pt.min())){const A=t.He.getLastRemoteSnapshotVersion(l).next(N=>t.He.setTargetsMetadata(l,l.currentSequenceNumber,r));m.push(A)}return Me.waitFor(m).next(()=>h.apply(l)).next(()=>t.Wn.Vn(l,w)).next(()=>w)}).then(l=>(t.qn=o,l))}function nC(n,e,t,r,o){let l=vn();return t.forEach(h=>l=l.add(h)),e.getEntries(n,l).next(h=>{let m=vs();return t.forEach((w,A)=>{const N=h.get(w),P=(null==o?void 0:o.get(w))||r;A.isNoDocument()&&A.version.isEqual(Pt.min())?(e.removeEntry(w,P),m=m.insert(w,A)):!N.isValidDocument()||A.version.compareTo(N.version)>0||0===A.version.compareTo(N.version)&&N.hasPendingWrites?(e.addEntry(A,P),m=m.insert(w,A)):Le("LocalStore","Ignoring outdated watch update for ",w,". Current version:",N.version," Watch version:",A.version)}),m})}function e0(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.An.getNextMutationBatchAfterBatchId(r,e)))}function Sf(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.He.getTargetData(r,e).next(l=>l?(o=l,Me.resolve(o)):t.He.allocateTargetId(r).next(h=>(o=new Vu(e,h,0,r.currentSequenceNumber),t.He.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.qn.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.qn=t.qn.insert(r.targetId,r),t.Kn.set(e,r.targetId)),r})}function pc(n,e,t){return Mf.apply(this,arguments)}function Mf(){return Mf=(0,_e.Z)(function*(n,e,t){const r=Ke(n),o=r.qn.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!ac(h))throw h;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.qn=r.qn.remove(e),r.Kn.delete(o.target)}),Mf.apply(this,arguments)}function Pg(n,e,t){const r=Ke(n);let o=Pt.min(),l=vn();return r.persistence.runTransaction("Execute query","readonly",h=>function(m,w,A){const N=Ke(m),P=N.Kn.get(A);return void 0!==P?Me.resolve(N.qn.get(P)):N.He.getTargetData(w,A)}(r,h,ar(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(h,m.targetId).next(w=>{l=w})}).next(()=>r.Un.getDocumentsMatchingQuery(h,e,t?o:Pt.min(),t?l:vn())).next(m=>({documents:m,zn:l})))}function O_(n,e){const t=Ke(n),r=Ke(t.He),o=t.qn.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",l=>r.Et(l,e).next(h=>h?h.target:null))}function P_(n){const e=Ke(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,o,l){const h=Ke(r);let m=vs(),w=I_(l);const A=ta(o),N=IDBKeyRange.lowerBound(w,!0);return A.jt({index:Yn.readTimeIndex,range:N},(P,Z)=>{const te=w_(h.k,Z);m=m.insert(te.key,te),w=Z.readTime}).next(()=>({In:m,readTime:Gw(w)}))}(e.Qn,t,e.jn)).then(({In:t,readTime:r})=>(e.jn=r,t))}function k_(){return k_=(0,_e.Z)(function*(n){const e=Ke(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const o=ta(r);let l=Pt.min();return o.jt({index:Yn.readTimeIndex,reverse:!0},(h,m,w)=>{m.readTime&&(l=Gw(m.readTime)),w.done()}).next(()=>l)}(t)).then(t=>{e.jn=t})}),k_.apply(this,arguments)}function F_(){return F_=(0,_e.Z)(function*(n,e,t,r){const o=Ke(n);let l=vn(),h=vs(),m=u_();for(const N of t){const P=e.Hn(N.metadata.name);N.document&&(l=l.add(P)),h=h.insert(P,e.Jn(N)),m=m.insert(P,e.Yn(N.metadata.readTime))}const w=o.Qn.newChangeBuffer({trackRemovals:!0}),A=yield Sf(o,(N=r,ar(ec(nn.fromString(`__bundle__/docs/${N}`)))));var N;return o.persistence.runTransaction("Apply bundle documents","readwrite",N=>nC(N,w,h,Pt.min(),m).next(P=>(w.apply(N),P)).next(P=>o.He.removeMatchingKeysForTargetId(N,A.targetId).next(()=>o.He.addMatchingKeys(N,l,A.targetId)).next(()=>o.Wn.Vn(N,P)).next(()=>P)))}),F_.apply(this,arguments)}function sC(n,e){return L_.apply(this,arguments)}function L_(){return L_=(0,_e.Z)(function*(n,e,t=vn()){const r=yield Sf(n,ar(Cg(e.bundledQuery))),o=Ke(n);return o.persistence.runTransaction("Save named query","readwrite",l=>{const h=lr(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o.Ye.saveNamedQuery(l,e);const m=r.withResumeToken(Er.EMPTY_BYTE_STRING,h);return o.qn=o.qn.insert(m.targetId,m),o.He.updateTargetData(l,m).next(()=>o.He.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>o.He.addMatchingKeys(l,t,r.targetId)).next(()=>o.Ye.saveNamedQuery(l,e))})}),L_.apply(this,arguments)}class oC{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return Me.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var r;return this.Xn.set(t.id,{id:(r=t).id,version:r.version,createTime:lr(r.createTime)}),Me.resolve()}getNamedQuery(e,t){return Me.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,{name:(r=t).name,query:Cg(r.bundledQuery),readTime:lr(r.readTime)}),Me.resolve();var r}}class gc{constructor(){this.ts=new Zn(Lr.es),this.ns=new Zn(Lr.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const r=new Lr(e,t);this.ts=this.ts.add(r),this.ns=this.ns.add(r)}rs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.os(new Lr(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new at(new nn([])),r=new Lr(t,e),o=new Lr(t,e+1),l=[];return this.ns.forEachInRange([r,o],h=>{this.os(h),l.push(h.key)}),l}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new at(new nn([])),r=new Lr(t,e),o=new Lr(t,e+1);let l=vn();return this.ns.forEachInRange([r,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new Lr(e,0),r=this.ts.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Lr{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return at.comparator(e.key,t.key)||qt(e.fs,t.fs)}static ss(e,t){return qt(e.fs,t.fs)||at.comparator(e.key,t.key)}}class t0{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new Zn(Lr.es)}checkEmpty(e){return Me.resolve(0===this.An.length)}addMutationBatch(e,t,r,o){const l=this.ds;this.ds++;const h=new v_(l,t,r,o);this.An.push(h);for(const m of o)this.ws=this.ws.add(new Lr(m.key,l)),this.Jt.addToCollectionParentIndex(e,m.key.path.popLast());return Me.resolve(h)}lookupMutationBatch(e,t){return Me.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.gs(t+1),l=o<0?0:o;return Me.resolve(this.An.length>l?this.An[l]:null)}getHighestUnacknowledgedBatchId(){return Me.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return Me.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Lr(t,0),o=new Lr(t,Number.POSITIVE_INFINITY),l=[];return this.ws.forEachInRange([r,o],h=>{const m=this._s(h.fs);l.push(m)}),Me.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Zn(qt);return t.forEach(o=>{const l=new Lr(o,0),h=new Lr(o,Number.POSITIVE_INFINITY);this.ws.forEachInRange([l,h],m=>{r=r.add(m.fs)})}),Me.resolve(this.ys(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;at.isDocumentKey(l)||(l=l.child(""));const h=new Lr(new at(l),0);let m=new Zn(qt);return this.ws.forEachWhile(w=>{const A=w.key.path;return!!r.isPrefixOf(A)&&(A.length===o&&(m=m.add(w.fs)),!0)},h),Me.resolve(this.ys(m))}ys(e){const t=[];return e.forEach(r=>{const o=this._s(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Et(0===this.ps(t.batchId,"removed")),this.An.shift();let r=this.ws;return Me.forEach(t.mutations,o=>{const l=new Lr(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ws=r})}ee(e){}containsKey(e,t){const r=new Lr(t,0),o=this.ws.firstAfterOrEqual(r);return Me.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return Me.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class n0{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new kr(at.comparator),this.size=0}addEntry(e,t,r){const o=t.key,l=this.docs.get(o),h=l?l.size:0,m=this.Ts(t);return this.docs=this.docs.insert(o,{document:t.clone(),size:m,readTime:r}),this.size+=m-h,this.Jt.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Me.resolve(r?r.document.clone():Un.newInvalidDocument(t))}getEntries(e,t){let r=vs();return t.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.clone():Un.newInvalidDocument(o))}),Me.resolve(r)}getDocumentsMatchingQuery(e,t,r){let o=vs();const l=new at(t.path.child("")),h=this.docs.getIteratorFrom(l);for(;h.hasNext();){const{key:m,value:{document:w,readTime:A}}=h.getNext();if(!t.path.isPrefixOf(m.path))break;A.compareTo(r)<=0||gf(t,w)&&(o=o.insert(w.key,w.clone()))}return Me.resolve(o)}Es(e,t){return Me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new r0(this)}getSize(e){return Me.resolve(this.size)}}class r0 extends Kw{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.document.isValidDocument()?t.push(this.De.addEntry(e,o.document,this.getReadTime(r))):this.De.removeEntry(r)}),Me.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class s0{constructor(e){this.persistence=e,this.Is=new Hd(t=>Sd(t),lf),this.lastRemoteSnapshotVersion=Pt.min(),this.highestTargetId=0,this.As=0,this.Rs=new gc,this.targetCount=0,this.Ps=Bu.ie()}forEachTarget(e,t){return this.Is.forEach((r,o)=>t(o)),Me.resolve()}getLastRemoteSnapshotVersion(e){return Me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Me.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.Ps.next(),Me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.As&&(this.As=t),Me.resolve()}ce(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ps=new Bu(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,Me.resolve()}updateTargetData(e,t){return this.ce(t),Me.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,Me.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.Is.forEach((h,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Is.delete(h),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),Me.waitFor(l).next(()=>o)}getTargetCount(e){return Me.resolve(this.targetCount)}getTargetData(e,t){const r=this.Is.get(t)||null;return Me.resolve(r)}addMatchingKeys(e,t,r){return this.Rs.rs(t,r),Me.resolve()}removeMatchingKeys(e,t,r){this.Rs.cs(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),Me.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),Me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Rs.ls(t);return Me.resolve(r)}containsKey(e,t){return Me.resolve(this.Rs.containsKey(t))}}class aC{constructor(e,t){this.bs={},this.Be=new zi(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new s0(this),this.Jt=new KD,this.Je=new n0(this.Jt,r=>this.referenceDelegate.vs(r)),this.k=new E_(t),this.Ye=new oC(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new t0(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const o=new uC(this.Be.next());return this.referenceDelegate.Vs(),r(o).next(l=>this.referenceDelegate.Ss(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ds(e,t){return Me.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class uC extends jw{constructor(e){super(),this.currentSequenceNumber=e}}class V_{constructor(e){this.persistence=e,this.Cs=new gc,this.Ns=null}static ks(e){return new V_(e)}get xs(){if(this.Ns)return this.Ns;throw lt()}addReference(e,t,r){return this.Cs.addReference(r,t),this.xs.delete(r.toString()),Me.resolve()}removeReference(e,t,r){return this.Cs.removeReference(r,t),this.xs.add(r.toString()),Me.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Me.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(o=>this.xs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.xs.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Me.forEach(this.xs,r=>{const o=at.fromPath(r);return this.$s(e,o).next(l=>{l||t.removeEntry(o)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return Me.or([()=>Me.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function o0(n,e){return`firestore_clients_${n}_${e}`}function a0(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function U_(n,e){return`firestore_targets_${n}_${e}`}class kg{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Fs(e,t,r){const o=JSON.parse(r);let l,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(l=new Re(o.error.code,o.error.message))),h?new kg(e,t,o.state,l):(Nr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fa{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Fs(e,t){const r=JSON.parse(t);let o,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(o=new Re(r.error.code,r.error.message))),l?new Fa(e,r.state,o):(Nr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Fs(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,l=vg();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=ew(r.activeTargetIds[h]),l=l.add(r.activeTargetIds[h]);return o?new Fg(e,l):(Nr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class xf{constructor(e,t){this.clientId=e,this.onlineState=t}static Fs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new xf(t.clientId,t.onlineState):(Nr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Zs{constructor(){this.activeTargetIds=vg()}Ms(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class B_{constructor(e,t,r,o,l){this.window=e,this.Oe=t,this.persistenceKey=r,this.Bs=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new kr(qt),this.started=!1,this.js=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Qs=o0(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new Zs),this.Gs=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(m){return`firestore_bundle_loaded_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.Tn();for(const o of t){if(o===e.Bs)continue;const l=e.getItem(o0(e.persistenceKey,o));if(l){const h=Fg.Fs(o,l);h&&(e.Ks=e.Ks.insert(h.clientId,h))}}e.Xs();const r=e.storage.getItem(e.Js);if(r){const o=e.Zs(r);o&&e.ti(o)}for(const o of e.js)e.qs(o);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,r){this.ni(e,t,r),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(U_(this.persistenceKey,e));if(r){const o=Fa.Fs(e,r);o&&(t=o.state)}}return this.ii.Ms(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(U_(this.persistenceKey,e))}updateQueryState(e,t,r){this.ri(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.si(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Qs)return void Nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.Gs.test(r.key)){if(null==r.newValue){const o=t.ci(r.key);return t.ui(o,null)}{const o=t.hi(r.key,r.newValue);if(o)return t.ui(o.clientId,o)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const o=t.li(r.key,r.newValue);if(o)return t.fi(o)}}else if(t.Hs.test(r.key)){if(null!==r.newValue){const o=t.di(r.key,r.newValue);if(o)return t.wi(o)}}else if(r.key===t.Js){if(null!==r.newValue){const o=t.Zs(r.newValue);if(o)return t.ti(o)}}else if(r.key===t.Ws){const o=function(l){let h=zi.I;if(null!=l)try{const m=JSON.parse(l);Et("number"==typeof m),h=m}catch(m){Nr("SharedClientState","Failed to read sequence number from WebStorage",m)}return h}(r.newValue);o!==zi.I&&t.sequenceNumberHandler(o)}else if(r.key===t.Ys)return t.syncEngine._i()}else t.js.push(r)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Os())}ni(e,t,r){const o=new kg(this.currentUser,e,t,r),l=a0(this.persistenceKey,this.currentUser,e);this.setItem(l,o.Os())}si(e){const t=a0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,t,r){const o=U_(this.persistenceKey,e),l=new Fa(e,t,r);this.setItem(o,l.Os())}ai(){this.setItem(this.Ys,"value-not-used")}ci(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const r=this.ci(e);return Fg.Fs(r,t)}li(e,t){const r=this.zs.exec(e),o=Number(r[1]);return kg.Fs(new ti(void 0!==r[2]?r[2]:null),o,t)}di(e,t){const r=this.Hs.exec(e),o=Number(r[1]);return Fa.Fs(o,t)}Zs(e){return xf.Fs(e)}fi(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.mi(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const r=t?this.Ks.insert(e,t):this.Ks.remove(e),o=this.ei(this.Ks),l=this.ei(r),h=[],m=[];return l.forEach(w=>{o.has(w)||h.push(w)}),o.forEach(w=>{l.has(w)||m.push(w)}),this.syncEngine.yi(h,m).then(()=>{this.Ks=r})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=vg();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Lg{constructor(){this.pi=new Zs,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}updateQueryState(e,t,r){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new Zs,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Rf{Ei(e){}shutdown(){}}class u0{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Pi(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const lC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class cC{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Fi(e){this.ki(e)}Oi(e){this.xi(e)}}class Vg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Mi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,r,o,l){const h=this.Ui(e,t);Le("RestConnection","Sending: ",h,r);const m={};return this.qi(m,o,l),this.Ki(e,h,m,r).then(w=>(Le("RestConnection","Received: ",w),w),w=>{throw nf("RestConnection",`${e} failed with error: `,w,"url: ",h,"request:",r),w})}ji(e,t,r,o,l){return this.Bi(e,t,r,o,l)}qi(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Jl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),r&&r.headers.forEach((o,l)=>e[l]=o)}Ui(e,t){return`${this.Mi}/v1/${t}:${lC[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,r,o){return new Promise((l,h)=>{const m=new KE;m.listenOnce(WE.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case rg.NO_ERROR:const A=m.getResponseJson();Le("Connection","XHR received:",JSON.stringify(A)),l(A);break;case rg.TIMEOUT:Le("Connection",'RPC "'+e+'" timed out'),h(new Re(de.DEADLINE_EXCEEDED,"Request time out"));break;case rg.HTTP_ERROR:const N=m.getStatus();if(Le("Connection",'RPC "'+e+'" failed with status:',N,"response text:",m.getResponseText()),N>0){const P=m.getResponseJson().error;if(P&&P.status&&P.message){const Z=function(te){const Ce=te.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(Ce)>=0?Ce:de.UNKNOWN}(P.status);h(new Re(Z,P.message))}else h(new Re(de.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Re(de.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Le("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}Qi(e,t,r){const o=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=qE(),h=zE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new pD({})),this.qi(m.initMessageHeaders,t,r),(0,jt.uI)()||(0,jt.b$)()||(0,jt.d)()||(0,jt.w1)()||(0,jt.Mn)()||(0,jt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");Le("Connection","Creating WebChannel: "+w,m);const A=l.createWebChannel(w,m);let N=!1,P=!1;const Z=new cC({Vi:Ce=>{P?Le("Connection","Not sending because WebChannel is closed:",Ce):(N||(Le("Connection","Opening WebChannel transport."),A.open(),N=!0),Le("Connection","WebChannel sending:",Ce),A.send(Ce))},Si:()=>A.close()}),te=(Ce,Ye,et)=>{Ce.listen(Ye,Qt=>{try{et(Qt)}catch(fn){setTimeout(()=>{throw fn},0)}})};return te(A,ig.EventType.OPEN,()=>{P||Le("Connection","WebChannel transport opened.")}),te(A,ig.EventType.CLOSE,()=>{P||(P=!0,Le("Connection","WebChannel transport closed"),Z.Fi())}),te(A,ig.EventType.ERROR,Ce=>{P||(P=!0,nf("Connection","WebChannel transport errored:",Ce),Z.Fi(new Re(de.UNAVAILABLE,"The operation could not be completed")))}),te(A,ig.EventType.MESSAGE,Ce=>{var Ye;if(!P){const et=Ce.data[0];Et(!!et);const Qt=et,fn=Qt.error||(null===(Ye=Qt[0])||void 0===Ye?void 0:Ye.error);if(fn){Le("Connection","WebChannel received error:",fn);const cr=fn.status;let Bt=function(ja){const vI=Ir[ja];if(void 0!==vI)return Cw(vI)}(cr),Jn=fn.message;void 0===Bt&&(Bt=de.INTERNAL,Jn="Unknown error status: "+cr+" with message "+fn.message),P=!0,Z.Fi(new Re(Bt,Jn)),A.close()}else Le("Connection","WebChannel received:",et),Z.Oi(et)}}),te(h,fD.STAT_EVENT,Ce=>{Ce.stat===qy.PROXY?Le("Connection","Detected buffering proxy"):Ce.stat===qy.NOPROXY&&Le("Connection","Detected no buffering proxy")}),setTimeout(()=>{Z.$i()},0),Z}}function Nf(){return"undefined"!=typeof window?window:null}function Ug(){return"undefined"!=typeof document?document:null}function Of(n){return new FD(n,!0)}class Bg{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Oe=e,this.timerId=t,this.Wi=r,this.Gi=o,this.zi=l,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),o=Math.max(0,t-r);o>0&&Le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,o,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class j_{constructor(e,t,r,o,l,h,m,w){this.Oe=e,this.nr=r,this.sr=o,this.ir=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new Bg(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,_e.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,_e.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.yr(),r.pr(),r.ur.cancel(),r.rr++,4!==e?r.ur.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(Nr(t.toString()),Nr("Using maximum backoff delay to prevent overloading the backend."),r.ur.Xi()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Tr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ni(t)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.rr===t&&this.Ir(r,o)},r=>{e(()=>{const o=new Re(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ar(o)})})}Ir(e,t){const r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{r(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(o=>{r(()=>this.Ar(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}dr(){var e=this;this.state=5,this.ur.Zi((0,_e.Z)(function*(){e.state=0,e.start()}))}Ar(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Oe.enqueueAndForget(()=>this.rr===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $_ extends j_{constructor(e,t,r,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.k=l}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:lt(),o=e.targetChange.targetIds||[],l=function(w,A){return w.C?(Et(void 0===A||"string"==typeof A),Er.fromBase64String(A||"")):(Et(void 0===A||A instanceof Uint8Array),Er.fromUint8Array(A||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(w){const A=void 0===w.code?de.UNKNOWN:Cw(w.code);return new Re(A,w.message||"")}(h);t=new ND(r,o,l,m||null)}else if("documentChange"in e){const r=e.documentChange,o=ea(n,r.document.name),l=lr(r.document.updateTime),h=new zr({mapValue:{fields:r.document.fields}}),m=Un.newFoundDocument(o,l,h);t=new l_(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=ea(n,r.document),l=r.readTime?lr(r.readTime):Pt.min(),h=Un.newNoDocument(o,l);t=new l_([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,o=ea(n,r.document);t=new l_([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return lt();{const r=e.filter,l=new RD(r.count||0);t=new Eg(r.targetId,l)}}var w;return t}(this.k,e),r=function(o){if(!("targetChange"in o))return Pt.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Pt.min():l.readTime?lr(l.readTime):Pt.min()}(e);return this.listener.Pr(t,r)}br(e){const t={};t.database=Pd(this.k),t.addTarget=function(o,l){let h;const m=l.target;return h=cf(m)?{documents:Ow(o,m)}:{query:wf(o,m)},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?h.resumeToken=xw(o,l.resumeToken):l.snapshotVersion.compareTo(Pt.min())>0&&(h.readTime=ku(o,l.snapshotVersion.toTimestamp())),h}(this.k,e);const r=function(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.gr(t)}vr(e){const t={};t.database=Pd(this.k),t.removeTarget=e,this.gr(t)}}class l0 extends j_{constructor(e,t,r,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.k=l,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function(n,e){return n&&n.length>0?(Et(void 0!==e),n.map(t=>function(r,o){let l=lr(r.updateTime?r.updateTime:o);return l.isEqual(Pt.min())&&(l=lr(o)),new mw(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=lr(e.commitTime);return this.listener.Cr(r,t)}return Et(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=Pd(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Fu(this.k,r))};this.gr(t)}}class dC extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=r,this.k=o,this.$r=!1}Fr(){if(this.$r)throw new Re(de.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,r){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.ir.Bi(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(de.UNKNOWN,o.toString())})}ji(e,t,r){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.ir.ji(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(de.UNKNOWN,o.toString())})}terminate(){this.$r=!0}}class hC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(Nr(t),this.Lr=!1):Le("OnlineStateTracker",t)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class vT{constructor(e,t,r,o,l){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=l,this.Hr.Ei(m=>{r.enqueueAndForget((0,_e.Z)(function*(){var w;na(h)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,_e.Z)(function*(A){const N=Ke(A);N.Gr.add(4),yield yc(N),N.Jr.set("Unknown"),N.Gr.delete(4),yield mc(N)}),function(A){return w.apply(this,arguments)})(h))}))}),this.Jr=new hC(r,o)}}function mc(n){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,_e.Z)(function*(n){if(na(n))for(const e of n.zr)yield e(!0)}),Pf.apply(this,arguments)}function yc(n){return kf.apply(this,arguments)}function kf(){return kf=(0,_e.Z)(function*(n){for(const e of n.zr)yield e(!1)}),kf.apply(this,arguments)}function Gd(n,e){const t=Ke(n);t.Wr.has(e.targetId)||(t.Wr.set(e.targetId,e),jg(t)?G_(t):Gu(t).lr()&&H_(t,e))}function Ff(n,e){const t=Ke(n),r=Gu(t);t.Wr.delete(e),r.lr()&&c0(t,e),0===t.Wr.size&&(r.lr()?r._r():na(t)&&t.Jr.set("Unknown"))}function H_(n,e){n.Yr.X(e.targetId),Gu(n).br(e)}function c0(n,e){n.Yr.X(e),Gu(n).vr(e)}function G_(n){n.Yr=new Mw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Wr.get(e)||null}),Gu(n).start(),n.Jr.Br()}function jg(n){return na(n)&&!Gu(n).hr()&&n.Wr.size>0}function na(n){return 0===Ke(n).Gr.size}function q_(n){n.Yr=void 0}function fC(n){return $g.apply(this,arguments)}function $g(){return $g=(0,_e.Z)(function*(n){n.Wr.forEach((e,t)=>{H_(n,e)})}),$g.apply(this,arguments)}function d0(n,e){return z_.apply(this,arguments)}function z_(){return z_=(0,_e.Z)(function*(n,e){q_(n),jg(n)?(n.Jr.Kr(e),G_(n)):n.Jr.set("Unknown")}),z_.apply(this,arguments)}function h0(n,e,t){return Hg.apply(this,arguments)}function Hg(){return Hg=(0,_e.Z)(function*(n,e,t){if(n.Jr.set("Online"),e instanceof ND&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(o,l){const h=l.cause;for(const m of l.targetIds)o.Wr.has(m)&&(yield o.remoteSyncer.rejectListen(m,h),o.Wr.delete(m),o.Yr.removeTarget(m))}),function(o,l){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Gg(n,r)}else if(e instanceof l_?n.Yr.ot(e):e instanceof Eg?n.Yr.dt(e):n.Yr.ut(e),!t.isEqual(Pt.min()))try{const r=yield N_(n.localStore);t.compareTo(r)>=0&&(yield function(o,l){const h=o.Yr.gt(l);return h.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const A=o.Wr.get(w);A&&o.Wr.set(w,A.withResumeToken(m.resumeToken,l))}}),h.targetMismatches.forEach(m=>{const w=o.Wr.get(m);if(!w)return;o.Wr.set(m,w.withResumeToken(Er.EMPTY_BYTE_STRING,w.snapshotVersion)),c0(o,m);const A=new Vu(w.target,m,1,w.sequenceNumber);H_(o,A)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield Gg(n,r)}var r}),Hg.apply(this,arguments)}function Gg(n,e,t){return qg.apply(this,arguments)}function qg(){return qg=(0,_e.Z)(function*(n,e,t){if(!ac(e))throw e;n.Gr.add(1),yield yc(n),n.Jr.set("Offline"),t||(t=()=>N_(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n.Gr.delete(1),yield mc(n)}))}),qg.apply(this,arguments)}function f0(n,e){return e().catch(t=>Gg(n,t,e))}function Dr(n){return Hu.apply(this,arguments)}function Hu(){return Hu=(0,_e.Z)(function*(n){const e=Ke(n),t=_c(e);let r=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;pC(e);)try{const o=yield e0(e.localStore,r);if(null===o){0===e.Qr.length&&t._r();break}r=o.batchId,gC(e,o)}catch(o){yield Gg(e,o)}mC(e)&&qd(e)}),Hu.apply(this,arguments)}function pC(n){return na(n)&&n.Qr.length<10}function gC(n,e){n.Qr.push(e);const t=_c(n);t.lr()&&t.Sr&&t.Dr(e.mutations)}function mC(n){return na(n)&&!_c(n).hr()&&n.Qr.length>0}function qd(n){_c(n).start()}function yC(n){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,_e.Z)(function*(n){_c(n).kr()}),Lf.apply(this,arguments)}function _C(n){return zg.apply(this,arguments)}function zg(){return zg=(0,_e.Z)(function*(n){const e=_c(n);for(const t of n.Qr)e.Dr(t.mutations)}),zg.apply(this,arguments)}function vC(n,e,t){return W_.apply(this,arguments)}function W_(){return W_=(0,_e.Z)(function*(n,e,t){const r=n.Qr.shift(),o=Df.from(r,e,t);yield f0(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Dr(n)}),W_.apply(this,arguments)}function K_(n,e){return Wg.apply(this,arguments)}function Wg(){return Wg=(0,_e.Z)(function*(n,e){var t;e&&_c(n).Sr&&(yield(t=(0,_e.Z)(function*(r,o){if(Dw(l=o.code)&&l!==de.ABORTED){const h=r.Qr.shift();_c(r).wr(),yield f0(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield Dr(r)}var l}),function(r,o){return t.apply(this,arguments)})(n,e)),mC(n)&&qd(n)}),Wg.apply(this,arguments)}function Kg(n,e){return zd.apply(this,arguments)}function zd(){return zd=(0,_e.Z)(function*(n,e){const t=Ke(n);e?(t.Gr.delete(2),yield mc(t)):e||(t.Gr.add(2),yield yc(t),t.Jr.set("Unknown"))}),zd.apply(this,arguments)}function Gu(n){return n.Xr||(n.Xr=function(e,t,r){const o=Ke(e);return o.Fr(),new $_(t,o.ir,o.authCredentials,o.appCheckCredentials,o.k,r)}(n.datastore,n.asyncQueue,{Di:fC.bind(null,n),Ni:d0.bind(null,n),Pr:h0.bind(null,n)}),n.zr.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Xr.wr(),jg(n)?G_(n):n.Jr.set("Unknown")):(yield n.Xr.stop(),q_(n))});return function(t){return e.apply(this,arguments)}}())),n.Xr}function _c(n){return n.Zr||(n.Zr=function(e,t,r){const o=Ke(e);return o.Fr(),new l0(t,o.ir,o.authCredentials,o.appCheckCredentials,o.k,r)}(n.datastore,n.asyncQueue,{Di:yC.bind(null,n),Ni:K_.bind(null,n),Nr:_C.bind(null,n),Cr:vC.bind(null,n)}),n.zr.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Zr.wr(),yield Dr(n)):(yield n.Zr.stop(),n.Qr.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.Qr.length} pending writes`),n.Qr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Zr}class Zg{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,o,l){const h=Date.now()+r,m=new Zg(e,t,h,o,l);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wd(n,e){if(Nr("AsyncQueue",`${e}: ${n}`),ac(n))return new Re(de.UNAVAILABLE,`${e}: ${n}`);throw n}class vc{constructor(e){this.comparator=e?(t,r)=>e(t,r)||at.comparator(t.key,r.key):(t,r)=>at.comparator(t.key,r.key),this.keyedMap=_g(),this.sortedSet=new kr(this.comparator)}static emptySet(e){return new vc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new vc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Vf{constructor(){this.eo=new kr(at.comparator)}track(e){const t=e.doc.key,r=this.eo.get(t);r?0!==e.type&&3===r.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==r.type?this.eo=this.eo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.eo=this.eo.remove(t):1===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):lt():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ec{constructor(e,t,r,o,l,h,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new Ec(e,t,vc.emptySet(t),l,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ni(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class EC{constructor(){this.so=void 0,this.listeners=[]}}class Z_{constructor(){this.queries=new Hd(e=>t_(e),Ni),this.onlineState="Unknown",this.io=new Set}}function Uf(n,e){return Y_.apply(this,arguments)}function Y_(){return Y_=(0,_e.Z)(function*(n,e){const t=Ke(n),r=e.query;let o=!1,l=t.queries.get(r);if(l||(o=!0,l=new EC),o)try{l.so=yield t.onListen(r)}catch(h){const m=Wd(h,`Initialization of query '${fg(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,l),l.listeners.push(e),e.ro(t.onlineState),l.so&&e.oo(l.so)&&J_(t)}),Y_.apply(this,arguments)}function Q_(n,e){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,_e.Z)(function*(n,e){const t=Ke(n),r=e.query;let o=!1;const l=t.queries.get(r);if(l){const h=l.listeners.indexOf(e);h>=0&&(l.listeners.splice(h,1),o=0===l.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),Yg.apply(this,arguments)}function p0(n,e){const t=Ke(n);let r=!1;for(const o of e){const h=t.queries.get(o.query);if(h){for(const m of h.listeners)m.oo(o)&&(r=!0);h.so=o}}r&&J_(t)}function g0(n,e,t){const r=Ke(n),o=r.queries.get(e);if(o)for(const l of o.listeners)l.onError(t);r.queries.delete(e)}function J_(n){n.io.forEach(e=>{e.next()})}class Qg{constructor(e,t,r){this.query=e,this.ao=t,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}oo(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Ec(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.ho(e)&&(this.ao.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.ao.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){return!e.fromCache||!(this.options.wo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=Ec.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}class m0{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class y0{constructor(e){this.k=e}Hn(e){return ea(this.k,e)}Jn(e){return e.metadata.exists?Rw(this.k,e.document,!1):Un.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return lr(e)}}class wC{constructor(e,t,r){this.mo=e,this.localStore=t,this.k=r,this.queries=[],this.documents=[],this.progress=X_(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,r=new y0(this.k);for(const o of e)if(o.metadata.queries){const l=r.Hn(o.metadata.name);for(const h of o.metadata.queries){const m=(t.get(h)||vn()).add(l);t.set(h,m)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function(n,e,t,r){return F_.apply(this,arguments)}(e.localStore,new y0(e.k),e.documents,e.mo.id),r=e.po(e.documents);for(const o of e.queries)yield sC(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",new x_(Object.assign({},e.progress),t)})()}}function X_(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class _0{constructor(e){this.key=e}}class ev{constructor(e){this.key=e}}class tv{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=vn(),this.mutatedKeys=vn(),this.Ao=dw(e),this.Ro=new vc(this.Ao)}get Po(){return this.To}bo(e,t){const r=t?t.vo:new Vf,o=t?t.Ro:this.Ro;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const w=Xy(this.query)&&o.size===this.query.limit?o.last():null,A=ff(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((N,P)=>{const Z=o.get(N),te=gf(this.query,P)?P:null,Ce=!!Z&&this.mutatedKeys.has(Z.key),Ye=!!te&&(te.hasLocalMutations||this.mutatedKeys.has(te.key)&&te.hasCommittedMutations);let et=!1;Z&&te?Z.data.isEqual(te.data)?Ce!==Ye&&(r.track({type:3,doc:te}),et=!0):this.Vo(Z,te)||(r.track({type:2,doc:te}),et=!0,(w&&this.Ao(te,w)>0||A&&this.Ao(te,A)<0)&&(m=!0)):!Z&&te?(r.track({type:0,doc:te}),et=!0):Z&&!te&&(r.track({type:1,doc:Z}),et=!0,(w||A)&&(m=!0)),et&&(te?(h=h.add(te),l=Ye?l.add(N):l.delete(N)):(h=h.delete(N),l=l.delete(N)))}),Xy(this.query)||ff(this.query))for(;h.size>this.query.limit;){const N=Xy(this.query)?h.last():h.first();h=h.delete(N.key),l=l.delete(N.key),r.track({type:1,doc:N})}return{Ro:h,vo:r,Bn:m,mutatedKeys:l}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const l=e.vo.no();l.sort((A,N)=>function(P,Z){const te=Ce=>{switch(Ce){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return te(P)-te(Z)}(A.type,N.type)||this.Ao(A.doc,N.doc)),this.So(r);const h=t?this.Do():[],m=0===this.Io.size&&this.current?1:0,w=m!==this.Eo;return this.Eo=m,0!==l.length||w?{snapshot:new Ec(this.query,e.Ro,o,l,e.mutatedKeys,0===m,w,!1),Co:h}:{Co:h}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new Vf,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(t=>this.To=this.To.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.To=this.To.delete(t)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=vn(),this.Ro.forEach(r=>{this.No(r.key)&&(this.Io=this.Io.add(r.key))});const t=[];return e.forEach(r=>{this.Io.has(r)||t.push(new ev(r))}),this.Io.forEach(r=>{e.has(r)||t.push(new _0(r))}),t}ko(e){this.To=e.zn,this.Io=vn();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return Ec.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class v0{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class E0{constructor(e){this.key=e,this.$o=!1}}class IC{constructor(e,t,r,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Fo={},this.Oo=new Hd(m=>t_(m),Ni),this.Mo=new Map,this.Lo=new Set,this.Bo=new kr(at.comparator),this.Uo=new Map,this.qo=new gc,this.Ko={},this.jo=new Map,this.Qo=Bu.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function DC(n,e){return nv.apply(this,arguments)}function nv(){return nv=(0,_e.Z)(function*(n,e){const t=lv(n);let r,o;const l=t.Oo.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),o=l.view.xo();else{const h=yield Sf(t.localStore,ar(e)),m=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,o=yield Jg(t,e,r,"current"===m),t.isPrimaryClient&&Gd(t.remoteStore,h)}return o}),nv.apply(this,arguments)}function Jg(n,e,t,r){return w0.apply(this,arguments)}function w0(){return w0=(0,_e.Z)(function*(n,e,t,r){n.Go=(N,P,Z)=>{return(te=(0,_e.Z)(function*(Ce,Ye,et,Qt){let fn=Ye.view.bo(et);fn.Bn&&(fn=yield Pg(Ce.localStore,Ye.query,!1).then(({documents:Jn})=>Ye.view.bo(Jn,fn)));const cr=Qt&&Qt.targetChanges.get(Ye.targetId),Bt=Ye.view.applyChanges(fn,Ce.isPrimaryClient,cr);return nm(Ce,Ye.targetId,Bt.Co),Bt.snapshot}),function(Ce,Ye,et,Qt){return te.apply(this,arguments)})(n,N,P,Z);var te};const o=yield Pg(n.localStore,e,!0),l=new tv(e,o.zn),h=l.bo(o.documents),m=Xo.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=l.applyChanges(h,n.isPrimaryClient,m);nm(n,t,w.Co);const A=new v0(e,t,l);return n.Oo.set(e,A),n.Mo.has(t)?n.Mo.get(t).push(e):n.Mo.set(t,[e]),w.snapshot}),w0.apply(this,arguments)}function ET(n,e){return I0.apply(this,arguments)}function I0(){return I0=(0,_e.Z)(function*(n,e){const t=Ke(n),r=t.Oo.get(e),o=t.Mo.get(r.targetId);if(o.length>1)return t.Mo.set(r.targetId,o.filter(l=>!Ni(l,e))),void t.Oo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield pc(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Ff(t.remoteStore,r.targetId),wc(t,r.targetId)}).catch(Eo))):(wc(t,r.targetId),yield pc(t.localStore,r.targetId,!0))}),I0.apply(this,arguments)}function D0(){return D0=(0,_e.Z)(function*(n,e,t){const r=cv(n);try{const o=yield function(l,h){const m=Ke(l),w=Pr.now(),A=h.reduce((P,Z)=>P.add(Z.key),vn());let N;return m.persistence.runTransaction("Locally write mutations","readwrite",P=>m.Wn.vn(P,A).next(Z=>{N=Z;const te=[];for(const Ce of h){const Ye=xD(Ce,N.get(Ce.key));null!=Ye&&te.push(new Pu(Ce.key,Ye,Qy(Ye.value.mapValue),ur.exists(!0)))}return m.An.addMutationBatch(P,w,te,h)})).then(P=>(P.applyToLocalDocumentSet(N),{batchId:P.batchId,changes:N}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(l,h,m){let w=l.Ko[l.currentUser.toKey()];w||(w=new kr(qt)),w=w.insert(h,m),l.Ko[l.currentUser.toKey()]=w}(r,o.batchId,t),yield zu(r,o.changes),yield Dr(r.remoteStore)}catch(o){const l=Wd(o,"Failed to persist write");t.reject(l)}}),D0.apply(this,arguments)}function CC(n,e){return C0.apply(this,arguments)}function C0(){return C0=(0,_e.Z)(function*(n,e){const t=Ke(n);try{const r=yield tC(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Uo.get(l);h&&(Et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.$o=!0:o.modifiedDocuments.size>0?Et(h.$o):o.removedDocuments.size>0&&(Et(h.$o),h.$o=!1))}),yield zu(t,r,e)}catch(r){yield Eo(r)}}),C0.apply(this,arguments)}function bC(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.Oo.forEach((l,h)=>{const m=h.view.ro(e);m.snapshot&&o.push(m.snapshot)}),function(l,h){const m=Ke(l);m.onlineState=h;let w=!1;m.queries.forEach((A,N)=>{for(const P of N.listeners)P.ro(h)&&(w=!0)}),w&&J_(m)}(r.eventManager,e),o.length&&r.Fo.Pr(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Xg(n,e,t){return b0.apply(this,arguments)}function b0(){return b0=(0,_e.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Uo.get(e),l=o&&o.key;if(l){let h=new kr(at.comparator);h=h.insert(l,Un.newNoDocument(l,Pt.min()));const m=vn().add(l),w=new Ef(Pt.min(),new Map,new Zn(qt),h,m);yield CC(r,w),r.Bo=r.Bo.remove(l),r.Uo.delete(e),im(r)}else yield pc(r.localStore,e,!1).then(()=>wc(r,e,t)).catch(Eo)}),b0.apply(this,arguments)}function rv(n,e){return qu.apply(this,arguments)}function qu(){return qu=(0,_e.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const o=yield _T(t.localStore,e);tm(t,r,null),em(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield zu(t,o)}catch(o){yield Eo(o)}}),qu.apply(this,arguments)}function T0(n,e,t){return iv.apply(this,arguments)}function iv(){return iv=(0,_e.Z)(function*(n,e,t){const r=Ke(n);try{const o=yield function(l,h){const m=Ke(l);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let A;return m.An.lookupMutationBatch(w,h).next(N=>(Et(null!==N),A=N.keys(),m.An.removeMutationBatch(w,N))).next(()=>m.An.performConsistencyCheck(w)).next(()=>m.Wn.vn(w,A))})}(r.localStore,e);tm(r,e,t),em(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield zu(r,o)}catch(o){yield Eo(o)}}),iv.apply(this,arguments)}function Bf(){return Bf=(0,_e.Z)(function*(n,e){const t=Ke(n);na(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const h=Ke(l);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>h.An.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.jo.get(r)||[];o.push(e),t.jo.set(r,o)}catch(r){const o=Wd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),Bf.apply(this,arguments)}function em(n,e){(n.jo.get(e)||[]).forEach(t=>{t.resolve()}),n.jo.delete(e)}function tm(n,e,t){const r=Ke(n);let o=r.Ko[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.Ko[r.currentUser.toKey()]=o}}function wc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Mo.get(e))n.Oo.delete(r),t&&n.Fo.zo(r,t);n.Mo.delete(e),n.isPrimaryClient&&n.qo.us(e).forEach(r=>{n.qo.containsKey(r)||AC(n,r)})}function AC(n,e){n.Lo.delete(e.path.canonicalString());const t=n.Bo.get(e);null!==t&&(Ff(n.remoteStore,t),n.Bo=n.Bo.remove(e),n.Uo.delete(t),im(n))}function nm(n,e,t){for(const r of t)r instanceof _0?(n.qo.addReference(r.key,e),rm(n,r)):r instanceof ev?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.qo.removeReference(r.key,e),n.qo.containsKey(r.key)||AC(n,r.key)):lt()}function rm(n,e){const t=e.key,r=t.path.canonicalString();n.Bo.get(t)||n.Lo.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.Lo.add(r),im(n))}function im(n){for(;n.Lo.size>0&&n.Bo.size<n.maxConcurrentLimboResolutions;){const e=n.Lo.values().next().value;n.Lo.delete(e);const t=new at(nn.fromString(e)),r=n.Qo.next();n.Uo.set(r,new E0(t)),n.Bo=n.Bo.insert(t,r),Gd(n.remoteStore,new Vu(ar(ec(t.path)),r,2,zi.I))}}function zu(n,e,t){return A0.apply(this,arguments)}function A0(){return A0=(0,_e.Z)(function*(n,e,t){const r=Ke(n),o=[],l=[],h=[];var m;r.Oo.isEmpty()||(r.Oo.forEach((m,w)=>{h.push(r.Go(w,e,t).then(A=>{if(A){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,A.fromCache?"not-current":"current"),o.push(A);const N=Jw.$n(w.targetId,A);l.push(N)}}))}),yield Promise.all(h),r.Fo.Pr(o),yield(m=(0,_e.Z)(function*(w,A){const N=Ke(w);try{yield N.persistence.runTransaction("notifyLocalViewChanges","readwrite",P=>Me.forEach(A,Z=>Me.forEach(Z.kn,te=>N.persistence.referenceDelegate.addReference(P,Z.targetId,te)).next(()=>Me.forEach(Z.xn,te=>N.persistence.referenceDelegate.removeReference(P,Z.targetId,te)))))}catch(P){if(!ac(P))throw P;Le("LocalStore","Failed to update sequence numbers: "+P)}for(const P of A){const Z=P.targetId;if(!P.fromCache){const te=N.qn.get(Z),Ye=te.withLastLimboFreeSnapshotVersion(te.snapshotVersion);N.qn=N.qn.insert(Z,Ye)}}}),function(w,A){return m.apply(this,arguments)})(r.localStore,l))}),A0.apply(this,arguments)}function IT(n,e){return sv.apply(this,arguments)}function sv(){return sv=(0,_e.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield R_(t.localStore,e);t.currentUser=e,(o=t).jo.forEach(h=>{h.forEach(m=>{m.reject(new Re(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.jo.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield zu(t,r.Gn)}var o}),sv.apply(this,arguments)}function ov(n,e){const t=Ke(n),r=t.Uo.get(e);if(r&&r.$o)return vn().add(r.key);{let o=vn();const l=t.Mo.get(e);if(!l)return o;for(const h of l){const m=t.Oo.get(h);o=o.unionWith(m.view.Po)}return o}}function SC(n,e){return S0.apply(this,arguments)}function S0(){return S0=(0,_e.Z)(function*(n,e){const t=Ke(n),r=yield Pg(t.localStore,e.query,!0),o=e.view.ko(r);return t.isPrimaryClient&&nm(t,e.targetId,o.Co),o}),S0.apply(this,arguments)}function MC(n){return jf.apply(this,arguments)}function jf(){return jf=(0,_e.Z)(function*(n){const e=Ke(n);return P_(e.localStore).then(t=>zu(e,t))}),jf.apply(this,arguments)}function xC(n,e,t,r){return Pi.apply(this,arguments)}function Pi(){return Pi=(0,_e.Z)(function*(n,e,t,r){const o=Ke(n),l=yield function(h,m){const w=Ke(h),A=Ke(w.An);return w.persistence.runTransaction("Lookup mutation documents","readonly",N=>A.Zt(N,m).next(P=>P?w.Wn.vn(N,P):Me.resolve(null)))}(o.localStore,e);var m;null!==l?("pending"===t?yield Dr(o.remoteStore):"acknowledged"===t||"rejected"===t?(tm(o,e,r||null),em(o,e),m=e,Ke(Ke(o.localStore).An).ee(m)):lt(),yield zu(o,l)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)}),Pi.apply(this,arguments)}function $f(){return $f=(0,_e.Z)(function*(n,e){const t=Ke(n);if(lv(t),cv(t),!0===e&&!0!==t.Wo){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield M0(t,r.toArray());t.Wo=!0,yield Kg(t.remoteStore,!0);for(const l of o)Gd(t.remoteStore,l)}else if(!1===e&&!1!==t.Wo){const r=[];let o=Promise.resolve();t.Mo.forEach((l,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(wc(t,h),pc(t.localStore,h,!0))),Ff(t.remoteStore,h)}),yield o,yield M0(t,r),function(l){const h=Ke(l);h.Uo.forEach((m,w)=>{Ff(h.remoteStore,w)}),h.qo.hs(),h.Uo=new Map,h.Bo=new kr(at.comparator)}(t),t.Wo=!1,yield Kg(t.remoteStore,!1)}}),$f.apply(this,arguments)}function M0(n,e,t){return av.apply(this,arguments)}function av(){return av=(0,_e.Z)(function*(n,e,t){const r=Ke(n),o=[],l=[];for(const h of e){let m;const w=r.Mo.get(h);if(w&&0!==w.length){m=yield Sf(r.localStore,ar(w[0]));for(const A of w){const N=r.Oo.get(A),P=yield SC(r,N);P.snapshot&&l.push(P.snapshot)}}else{const A=yield O_(r.localStore,h);m=yield Sf(r.localStore,A),yield Jg(r,sm(A),h,!1)}o.push(m)}return r.Fo.Pr(l),o}),av.apply(this,arguments)}function sm(n){return cw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function x0(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).Tn()}function R0(n,e,t,r){return uv.apply(this,arguments)}function uv(){return uv=(0,_e.Z)(function*(n,e,t,r){const o=Ke(n);if(o.Wo)Le("SyncEngine","Ignoring unexpected query state notification.");else if(o.Mo.has(e))switch(t){case"current":case"not-current":{const l=yield P_(o.localStore),h=Ef.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield zu(o,l,h);break}case"rejected":yield pc(o.localStore,e,!0),wc(o,e,r);break;default:lt()}}),uv.apply(this,arguments)}function N0(n,e,t){return om.apply(this,arguments)}function om(){return om=(0,_e.Z)(function*(n,e,t){const r=lv(n);if(r.Wo){for(const o of e){if(r.Mo.has(o)){Le("SyncEngine","Adding an already active target "+o);continue}const l=yield O_(r.localStore,o),h=yield Sf(r.localStore,l);yield Jg(r,sm(l),h.targetId,!1),Gd(r.remoteStore,h)}for(const o of t)r.Mo.has(o)&&(yield pc(r.localStore,o,!1).then(()=>{Ff(r.remoteStore,o),wc(r,o)}).catch(Eo))}}),om.apply(this,arguments)}function lv(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=CC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ov.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xg.bind(null,e),e.Fo.Pr=p0.bind(null,e.eventManager),e.Fo.zo=g0.bind(null,e.eventManager),e}function cv(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=T0.bind(null,e),e}class Ys{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.k=Of(e.databaseInfo.databaseId),t.sharedClientState=t.Jo(e),t.persistence=t.Yo(e),yield t.persistence.start(),t.gcScheduler=t.Xo(e),t.localStore=t.Zo(e)})()}Xo(e){return null}Zo(e){return fc(this.persistence,new Xw,e.initialUser,this.k)}Yo(e){return new aC(V_.ks,this.k)}Jo(e){return new Lg}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class O0 extends Ys{constructor(e,t,r){super(),this.ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield function(n){return k_.apply(this,arguments)}(r.localStore),yield r.ta.initialize(r,e),yield cv(r.ta.syncEngine),yield Dr(r.ta.remoteStore),yield r.persistence.sn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Zo(e){return fc(this.persistence,new Xw,e.initialUser,this.k)}Xo(e){return new JD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const t=M_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Oi.withCacheSize(this.cacheSizeBytes):Oi.DEFAULT;return new Ng(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Nf(),Ug(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new Lg}}class NC extends O0{constructor(e,t){super(e,t,!1),this.ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const o=r.ta.syncEngine;r.sharedClientState instanceof B_&&(r.sharedClientState.syncEngine={mi:xC.bind(null,o),gi:R0.bind(null,o),yi:N0.bind(null,o),Tn:x0.bind(null,o),_i:MC.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.sn(function(){var l=(0,_e.Z)(function*(h){yield function(n,e){return $f.apply(this,arguments)}(r.ta.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return l.apply(this,arguments)}}())})()}Jo(e){const t=Nf();if(!B_.bt(t))throw new Re(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=M_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new B_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class hv{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>bC(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=IT.bind(null,r.syncEngine),yield Kg(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Z_}createDatastore(e){const t=Of(e.databaseInfo.databaseId),r=new Vg(e.databaseInfo);return new dC(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,l=m=>bC(this.syncEngine,m,0),h=u0.bt()?new u0:new Rf,new vT(t,r,o,l,h);var t,r,o,l,h}createSyncEngine(e,t){return function(r,o,l,h,m,w,A){const N=new IC(r,o,l,h,m,w);return A&&(N.Wo=!0),N}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=Ke(t);Le("RemoteStore","RemoteStore shutting down."),r.Gr.add(5),yield yc(r),r.Hr.shutdown(),r.Jr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function fv(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class am{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ea(this.observer.next,e)}error(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}na(){this.muted=!0}ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class OC{constructor(e,t){this.sa=e,this.k=t,this.metadata=new Or,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(r=>{r&&r._o()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.sa.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.ra()})()}ra(){var e=this;return(0,_e.Z)(function*(){const t=yield e.oa();if(null===t)return null;const r=e.ia.decode(t),o=Number(r);isNaN(o)&&e.aa(`length string (${r}) is not valid number`);const l=yield e.ca(o);return new m0(JSON.parse(l),t.length+o)})()}ua(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oa(){var e=this;return(0,_e.Z)(function*(){for(;e.ua()<0&&!(yield e.ha()););if(0===e.buffer.length)return null;const t=e.ua();t<0&&e.aa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ca(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.ha())&&t.aa("Reached the end of bundle when more is expected.");const r=t.ia.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}aa(e){throw this.sa.cancel(),new Error(`Invalid bundle format: ${e}`)}ha(){var e=this;return(0,_e.Z)(function*(){const t=yield e.sa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class P0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,_e.Z)(function*(l,h){const m=Ke(l),w=Pd(m.k)+"/documents",A={documents:h.map(te=>Od(m.k,te))},N=yield m.ji("BatchGetDocuments",w,A),P=new Map;N.forEach(te=>{const Ce=function(n,e){return"found"in e?function(t,r){Et(!!r.found);const o=ea(t,r.found.name),l=lr(r.found.updateTime),h=new zr({mapValue:{fields:r.found.fields}});return Un.newFoundDocument(o,l,h)}(n,e):"missing"in e?function(t,r){Et(!!r.missing),Et(!!r.readTime);const o=ea(t,r.missing),l=lr(r.readTime);return Un.newNoDocument(o,l)}(n,e):lt()}(m.k,te);P.set(Ce.key.toString(),Ce)});const Z=[];return h.forEach(te=>{const Ce=P.get(te.toString());Et(!!Ce),Z.push(Ce)}),Z}),function(l,h){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new vf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const l=at.fromPath(o);e.mutations.push(new o_(l,e.precondition(l)))}),yield(r=(0,_e.Z)(function*(o,l){const h=Ke(o),m=Pd(h.k)+"/documents",w={writes:l.map(A=>Fu(h.k,A))};yield h.Bi("Commit",m,w)}),function(o,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt();t=Pt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ur.updateTime(t):ur.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Pt.min()))throw new Re(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ur.updateTime(t)}return ur.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class PC{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.la=5,this.ur=new Bg(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){var e=this;this.ur.Zi((0,_e.Z)(function*(){const t=new P0(e.datastore),r=e.da(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(l=>{e.wa(l)}))}).catch(o=>{e.wa(o)})}))}da(e){try{const t=this.updateFunction(e);return!xu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wa(e){this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget(()=>(this.fa(),Promise.resolve()))):this.deferred.reject(e)}_a(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Dw(t)}return!1}}class DT{constructor(e,t,r,o){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=ti.UNAUTHENTICATED,this.clientId=QE.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,_e.Z)(function*(m){Le("FirestoreClient","Received user=",m.uid),yield l.authCredentialListener(m),l.user=m});return function(m){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,()=>Promise.resolve())}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Wd(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function pv(n,e){return um.apply(this,arguments)}function um(){return um=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,_e.Z)(function*(l){r.isEqual(l)||(yield R_(e.localStore,l),r=l)});return function(l){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),um.apply(this,arguments)}function k0(n,e){return gv.apply(this,arguments)}function gv(){return gv=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield lm(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>{return(l=(0,_e.Z)(function*(h,m){const w=Ke(h);w.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const A=na(w);w.Gr.add(3),yield yc(w),A&&w.Jr.set("Unknown"),yield w.remoteSyncer.handleCredentialChange(m),w.Gr.delete(3),yield mc(w)}),function(h,m){return l.apply(this,arguments)})(e.remoteStore,o);var l}),n.onlineComponents=e}),gv.apply(this,arguments)}function lm(n){return Ic.apply(this,arguments)}function Ic(){return Ic=(0,_e.Z)(function*(n){return n.offlineComponents||(Le("FirestoreClient","Using default OfflineComponentProvider"),yield pv(n,new Ys)),n.offlineComponents}),Ic.apply(this,arguments)}function Kd(n){return cm.apply(this,arguments)}function cm(){return cm=(0,_e.Z)(function*(n){return n.onlineComponents||(Le("FirestoreClient","Using default OnlineComponentProvider"),yield k0(n,new hv)),n.onlineComponents}),cm.apply(this,arguments)}function F0(n){return lm(n).then(e=>e.persistence)}function dm(n){return lm(n).then(e=>e.localStore)}function mv(n){return Kd(n).then(e=>e.remoteStore)}function yv(n){return Kd(n).then(e=>e.syncEngine)}function Zd(n){return L0.apply(this,arguments)}function L0(){return L0=(0,_e.Z)(function*(n){const e=yield Kd(n),t=e.eventManager;return t.onListen=DC.bind(null,e.syncEngine),t.onUnlisten=ET.bind(null,e.syncEngine),t}),L0.apply(this,arguments)}function U0(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,l,h,m,w){const A=new am({next:P=>{l.enqueueAndForget(()=>Q_(o,N));const Z=P.docs.has(h);!Z&&P.fromCache?w.reject(new Re(de.UNAVAILABLE,"Failed to get document because the client is offline.")):Z&&P.fromCache&&m&&"server"===m.source?w.reject(new Re(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(P)},error:P=>w.reject(P)}),N=new Qg(ec(h.path),A,{includeMetadataChanges:!0,wo:!0});return Uf(o,N)}(yield Zd(n),n.asyncQueue,e,t,r)})),r.promise}function LC(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,l,h,m,w){const A=new am({next:P=>{l.enqueueAndForget(()=>Q_(o,N)),P.fromCache&&"server"===m.source?w.reject(new Re(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(P)},error:P=>w.reject(P)}),N=new Qg(h,A,{includeMetadataChanges:!0,wo:!0});return Uf(o,N)}(yield Zd(n),n.asyncQueue,e,t,r)})),r.promise}class VC{constructor(e,t,r,o,l,h,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class La{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof La&&e.projectId===this.projectId&&e.database===this.database}}const B0=new Map;function _v(n,e,t){if(!t)throw new Re(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function vv(n,e,t,r){if(!0===e&&!0===r)throw new Re(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Wu(n){if(!at.isDocumentKey(n))throw new Re(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ev(n){if(at.isDocumentKey(n))throw new Re(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Yd(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function zt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Yd(n);throw new Re(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function j0(n,e){if(e<=0)throw new Re(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class hm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,vv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dc{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hm({}),this._settingsFrozen=!1,e instanceof La?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Re(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new La(o.options.projectId)}(e))}get app(){if(!this._app)throw new Re(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new yD;switch(t.type){case"gapi":const r=t.client;return Et(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new vD(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=B0.get(e);t&&(Le("ComponentProvider","Removing Datastore"),B0.delete(e),t.terminate())}(this),Promise.resolve()}}class Fn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Va(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fn(this.firestore,e,this._key)}}class ki{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ki(this.firestore,e,this._query)}}class Va extends ki{constructor(e,t,r){super(e,t,ec(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fn(this.firestore,null,new at(e))}withConverter(e){return new Va(this.firestore,e,this._path)}}function UC(n,e,...t){if(n=(0,jt.m9)(n),_v("collection","path",e),n instanceof Dc){const r=nn.fromString(e,...t);return Ev(r),new Va(n,null,r)}{if(!(n instanceof Fn||n instanceof Va))throw new Re(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return Ev(r),new Va(n.firestore,null,r)}}function wv(n,e,...t){if(n=(0,jt.m9)(n),1===arguments.length&&(e=QE.A()),_v("doc","path",e),n instanceof Dc){const r=nn.fromString(e,...t);return Wu(r),new Fn(n,null,new at(r))}{if(!(n instanceof Fn||n instanceof Va))throw new Re(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return Wu(r),new Fn(n.firestore,n instanceof Va?n.converter:null,new at(r))}}function BC(n,e){return n=(0,jt.m9)(n),e=(0,jt.m9)(e),(n instanceof Fn||n instanceof Va)&&(e instanceof Fn||e instanceof Va)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function jC(n,e){return n=(0,jt.m9)(n),e=(0,jt.m9)(e),n instanceof ki&&e instanceof ki&&n.firestore===e.firestore&&Ni(n._query,e._query)&&n.converter===e.converter}class H0{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new Bg(this,"async_queue_retry"),this.Ra=()=>{const t=Ug();t&&Le("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const e=Ug();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pa(),this.ba(e)}enterRestrictedMode(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;const t=Ug();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}enqueue(e){if(this.Pa(),this.ya)return new Promise(()=>{});const t=new Or;return this.ba(()=>this.ya&&this.Ia?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ga.push(e),this.va()))}va(){var e=this;return(0,_e.Z)(function*(){if(0!==e.ga.length){try{yield e.ga[0](),e.ga.shift(),e.ur.reset()}catch(t){if(!ac(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.ga.length>0&&e.ur.Zi(()=>e.va())}})()}ba(e){const t=this.ma.then(()=>(this.Ea=!0,e().catch(r=>{throw this.Ta=r,this.Ea=!1,Nr("INTERNAL UNHANDLED ERROR: ",function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),h}(r)),r}).then(r=>(this.Ea=!1,r))));return this.ma=t,t}enqueueAfterDelay(e,t,r){this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);const o=Zg.createAndSchedule(this,e,t,r,l=>this.Va(l));return this.pa.push(o),o}Pa(){this.Ta&&lt()}verifyOperationInProgress(){}Sa(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.ma,yield t}while(t!==e.ma)})()}Da(e){for(const t of this.pa)if(t.timerId===e)return!0;return!1}Ca(e){return this.Sa().then(()=>{this.pa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.pa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sa()})}Na(e){this.Aa.push(e)}Va(e){const t=this.pa.indexOf(e);this.pa.splice(t,1)}}function Iv(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class $C{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Qn extends Dc{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new H0,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||G0(this),this._firestoreClient.terminate()}}function Cr(n){return n._firestoreClient||G0(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function G0(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new VC(n._databaseId,l,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var l,m;n._firestoreClient=new DT(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Hf(n,e,t){const r=new Or;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield pv(n,t),yield k0(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(l=o).name?l.code===de.FAILED_PRECONDITION||l.code===de.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var l})).then(()=>r.promise)}function QC(n){if(n._initialized||n._terminated)throw new Re(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ua{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new di(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ra{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ra(Er.fromBase64String(e))}catch(t){throw new Re(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ra(Er.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Cc{constructor(e){this._methodName=e}}class pm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qt(this._lat,e._lat)||qt(this._long,e._long)}}const JC=/^__.*__$/;class XC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Pu(e,this.data,this.fieldMask,t,this.fieldTransforms):new _f(e,this.data,t,this.fieldTransforms)}}class W0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Pu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class Dv{constructor(e,t,r,o,l,h){this.settings=e,this.databaseId=t,this.k=r,this.ignoreUndefinedProperties=o,void 0===l&&this.ka(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(e){return new Dv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.$a({path:r,Oa:!1});return o.Ma(e),o}La(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.$a({path:r,Oa:!1});return o.ka(),o}Ba(e){return this.$a({path:void 0,Oa:!0})}Ua(e){return k(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ka(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}Ma(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(eb(this.xa)&&JC.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}class NT{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=r||Of(e)}ja(e,t,r,o=!1){return new Dv({xa:e,methodName:t,Ka:r,path:di.emptyPath(),Oa:!1,qa:o},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function Qd(n){const e=n._freezeSettings(),t=Of(n._databaseId);return new NT(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Cv(n,e,t,r,o,l={}){const h=n.ja(l.merge||l.mergeFields?2:0,e,t,o);E("Data must be an object, but it was:",h,r);const m=f(r,h);let w,A;if(l.merge)w=new Yo(h.fieldMask),A=h.fieldTransforms;else if(l.mergeFields){const N=[];for(const P of l.mergeFields){const Z=I(e,P,t);if(!h.contains(Z))throw new Re(de.INVALID_ARGUMENT,`Field '${Z}' is specified in your field mask but missing from your input data.`);$(N,Z)||N.push(Z)}w=new Yo(N),A=h.fieldTransforms.filter(P=>w.covers(P.field))}else w=null,A=h.fieldTransforms;return new XC(new zr(m),w,A)}class Gf extends Cc{_toFieldTransform(e){if(2!==e.xa)throw e.Ua(1===e.xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gf}}function tb(n,e,t){return new Dv({xa:3,Ka:e.settings.Ka,methodName:n._methodName,Oa:t},e.databaseId,e.k,e.ignoreUndefinedProperties)}class K0 extends Cc{_toFieldTransform(e){return new Nd(e.path,new tc)}isEqual(e){return e instanceof K0}}class OT extends Cc{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=tb(this,e,!0),r=this.Qa.map(l=>c(l,t)),o=new Jo(r);return new Nd(e.path,o)}isEqual(e){return this===e}}class PT extends Cc{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=tb(this,e,!0),r=this.Qa.map(l=>c(l,t)),o=new Nu(r);return new Nd(e.path,o)}isEqual(e){return this===e}}class i extends Cc{constructor(e,t){super(e),this.Wa=t}_toFieldTransform(e){const t=new Ou(e.k,Rd(e.k,this.Wa));return new Nd(e.path,t)}isEqual(e){return this===e}}function s(n,e,t,r){const o=n.ja(1,e,t);E("Data must be an object, but it was:",o,r);const l=[],h=zr.empty();Au(r,(w,A)=>{const N=S(e,w,t);A=(0,jt.m9)(A);const P=o.La(N);if(A instanceof Gf)l.push(N);else{const Z=c(A,P);null!=Z&&(l.push(N),h.set(N,Z))}});const m=new Yo(l);return new W0(h,m,o.fieldTransforms)}function a(n,e,t,r,o,l){const h=n.ja(1,e,t),m=[I(e,r,t)],w=[o];if(l.length%2!=0)throw new Re(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Z=0;Z<l.length;Z+=2)m.push(I(e,l[Z])),w.push(l[Z+1]);const A=[],N=zr.empty();for(let Z=m.length-1;Z>=0;--Z)if(!$(A,m[Z])){const te=m[Z];let Ce=w[Z];Ce=(0,jt.m9)(Ce);const Ye=h.La(te);if(Ce instanceof Gf)A.push(te);else{const et=c(Ce,Ye);null!=et&&(A.push(te),N.set(te,et))}}const P=new Yo(A);return new W0(N,P,h.fieldTransforms)}function u(n,e,t,r=!1){return c(t,n.ja(r?4:3,e))}function c(n,e){if(y(n=(0,jt.m9)(n)))return E("Unsupported field value:",e,n),f(n,e);if(n instanceof Cc)return function(t,r){if(!eb(r.xa))throw r.Ua(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ua(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Oa&&4!==e.xa)throw e.Ua("Nested arrays are not supported");return function(t,r){const o=[];let l=0;for(const h of t){let m=c(h,r.Ba(l));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),l++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,jt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Rd(r.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Pr.fromDate(t);return{timestampValue:ku(r.k,o)}}if(t instanceof Pr){const o=new Pr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ku(r.k,o)}}if(t instanceof pm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ra)return{bytesValue:xw(r.k,t._byteString)};if(t instanceof Fn){const o=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(o))throw r.Ua(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Wn(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ua(`Unsupported field value: ${Yd(t)}`)}(n,e)}function f(n,e){const t={};return ag(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Au(n,(r,o)=>{const l=c(o,e.Fa(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function y(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Pr||n instanceof pm||n instanceof ra||n instanceof Fn||n instanceof Cc)}function E(n,e,t){if(!y(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Yd(t);throw e.Ua("an object"===r?n+" a custom object":n+" "+r)}var r}function I(n,e,t){if((e=(0,jt.m9)(e))instanceof Ua)return e._internalPath;if("string"==typeof e)return S(n,e);throw k("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const b=new RegExp("[~\\*/\\[\\]]");function S(n,e,t){if(e.search(b)>=0)throw k(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ua(...e.split("."))._internalPath}catch(r){throw k(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function k(n,e,t,r,o){const l=r&&!r.isEmpty(),h=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(l||h)&&(w+=" (found",l&&(w+=` in field ${r}`),h&&(w+=` in document ${o}`),w+=")"),new Re(de.INVALID_ARGUMENT,m+n+w)}function $(n,e){return n.some(t=>t.isEqual(e))}class Q{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Fn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new me(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Pe("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class me extends Q{data(){return super.data()}}function Pe(n,e){return"string"==typeof e?S(n,e):e instanceof Ua?e._internalPath:e._delegate._internalPath}class Be{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qe extends Q{constructor(e,t,r,o,l,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new be(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Pe("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class be extends Qe{data(e={}){return super.data(e)}}class ot{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Be(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new be(this._firestore,this._userDataWriter,r.key,r,new Be(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new be(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Be(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const m=new be(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Be(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,A=-1;return 0!==h.type&&(w=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),1!==h.type&&(l=l.add(h.doc),A=l.indexOf(h.doc.key)),{type:$t(h.type),doc:m,oldIndex:w,newIndex:A}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function $t(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function hn(n,e){return n instanceof Qe&&e instanceof Qe?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ot&&e instanceof ot&&n._firestore===e._firestore&&jC(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Qi(n){if(ff(n)&&0===n.explicitOrderBy.length)throw new Re(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wo{}function ia(n,...e){for(const t of e)n=t._apply(n);return n}class bv extends wo{constructor(e,t,r){super(),this.Ga=e,this.za=t,this.Ha=r,this.type="where"}_apply(e){const t=Qd(e.firestore),r=function(o,l,h,m,w,A,N){let P;if(w.isKeyField()){if("array-contains"===A||"array-contains-any"===A)throw new Re(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on FieldPath.documentId().`);if("in"===A||"not-in"===A){VT(N,A);const te=[];for(const Ce of N)te.push(LT(m,o,Ce));P={arrayValue:{values:te}}}else P=LT(m,o,N)}else"in"!==A&&"not-in"!==A&&"array-contains-any"!==A||VT(N,A),P=u(h,"where",N,"in"===A||"not-in"===A);const Z=Wi.create(w,A,P);return function(te,Ce){if(Ce.V()){const et=Gs(te);if(null!==et&&!et.isEqual(Ce.field))throw new Re(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${et.toString()}' and '${Ce.field.toString()}'`);const Qt=pf(te);null!==Qt&&UT(0,Ce.field,Qt)}const Ye=function(et,Qt){for(const fn of et.filters)if(Qt.indexOf(fn.op)>=0)return fn.op;return null}(te,function(et){switch(et){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Ce.op));if(null!==Ye)throw new Re(de.INVALID_ARGUMENT,Ye===Ce.op?`Invalid query. You cannot use more than one '${Ce.op.toString()}' filter.`:`Invalid query. You cannot use '${Ce.op.toString()}' filters with '${Ye.toString()}' filters.`)}(o,Z),Z}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new ki(e.firestore,e.converter,function(o,l){const h=o.filters.concat([l]);return new Qo(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class Av extends wo{constructor(e,t){super(),this.Ga=e,this.Ja=t,this.type="orderBy"}_apply(e){const t=function(r,o,l){if(null!==r.startAt)throw new Re(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new Xl(o,l);return function(m,w){if(null===pf(m)){const A=Gs(m);null!==A&&UT(0,A,w.field)}}(r,h),h}(e._query,this.Ga,this.Ja);return new ki(e.firestore,e.converter,function(r,o){const l=r.explicitOrderBy.concat([o]);return new Qo(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class gm extends wo{constructor(e,t,r){super(),this.type=e,this.Ya=t,this.Xa=r}_apply(e){return new ki(e.firestore,e.converter,qs(e._query,this.Ya,this.Xa))}}class mm extends wo{constructor(e,t,r){super(),this.type=e,this.Za=t,this.tc=r}_apply(e){const t=FT(e,this.type,this.Za,this.tc);return new ki(e.firestore,e.converter,(o=t,new Qo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class kT extends wo{constructor(e,t,r){super(),this.type=e,this.Za=t,this.tc=r}_apply(e){const t=FT(e,this.type,this.Za,this.tc);return new ki(e.firestore,e.converter,(o=t,new Qo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function FT(n,e,t,r){if(t[0]=(0,jt.m9)(t[0]),t[0]instanceof Q)return function(o,l,h,m,w){if(!m)throw new Re(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const A=[];for(const N of xd(o))if(N.field.isKeyField())A.push(af(l,m.key));else{const P=m.data.field(N.field);if(lg(P))throw new Re(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+N.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===P){const Z=N.field.canonicalString();throw new Re(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Z}' (used as the orderBy) does not exist.`)}A.push(P)}return new df(A,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Qd(n.firestore);return function(l,h,m,w,A,N){const P=l.explicitOrderBy;if(A.length>P.length)throw new Re(de.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Z=[];for(let te=0;te<A.length;te++){const Ce=A[te];if(P[te].field.isKeyField()){if("string"!=typeof Ce)throw new Re(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof Ce}`);if(!e_(l)&&-1!==Ce.indexOf("/"))throw new Re(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${w}() must be a plain document ID, but '${Ce}' contains a slash.`);const Ye=l.path.child(nn.fromString(Ce));if(!at.isDocumentKey(Ye))throw new Re(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${w}() must result in a valid document path, but '${Ye}' is not because it contains an odd number of segments.`);const et=new at(Ye);Z.push(af(h,et))}else{const Ye=u(m,w,Ce);Z.push(Ye)}}return new df(Z,N)}(n._query,n.firestore._databaseId,o,e,t,r)}}function LT(n,e,t){if("string"==typeof(t=(0,jt.m9)(t))){if(""===t)throw new Re(de.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!e_(e)&&-1!==t.indexOf("/"))throw new Re(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(nn.fromString(t));if(!at.isDocumentKey(r))throw new Re(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return af(n,new at(r))}if(t instanceof Fn)return af(n,t._key);throw new Re(de.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yd(t)}.`)}function VT(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function UT(n,e,t){if(!t.isEqual(e))throw new Re(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class nb{convertValue(e,t="none"){switch(Pa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){const r={};return Au(e.fields,(o,l)=>{r[o]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new pm(tr(e.latitude),tr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ID(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sf(e));default:return null}}convertTimestamp(e){const t=Su(e);return new Pr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=nn.fromString(e);Et(Uw(r));const o=new La(r.get(1),r.get(3)),l=new at(r.popFirst(5));return o.isEqual(t)||Nr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Z0(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class qS extends nb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ra(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,t)}}class BT{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qd(e)}set(e,t,r){this._verifyNotCommitted();const o=Jd(e,this._firestore),l=Z0(o.converter,t,r),h=Cv(this._dataReader,"WriteBatch.set",o._key,l,null!==o.converter,r);return this._mutations.push(h.toMutation(o._key,ur.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const l=Jd(e,this._firestore);let h;return h="string"==typeof(t=(0,jt.m9)(t))||t instanceof Ua?a(this._dataReader,"WriteBatch.update",l._key,t,r,o):s(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Jd(e,this._firestore);return this._mutations=this._mutations.concat(new vf(t._key,ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Jd(n,e){if((n=(0,jt.m9)(n)).firestore!==e)throw new Re(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class qf extends nb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ra(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,t)}}function jT(n,e,t){n=zt(n,Fn);const r=zt(n.firestore,Qn),o=Z0(n.converter,e,t);return ym(r,[Cv(Qd(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,ur.none())])}function $T(n,e,t,...r){n=zt(n,Fn);const o=zt(n.firestore,Qn),l=Qd(o);let h;return h="string"==typeof(e=(0,jt.m9)(e))||e instanceof Ua?a(l,"updateDoc",n._key,e,t,r):s(l,"updateDoc",n._key,e),ym(o,[h.toMutation(n._key,ur.exists(!0))])}function HT(n,...e){var t,r,o;n=(0,jt.m9)(n);let l={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||Iv(e[h])||(l=e[h],h++);const m={includeMetadataChanges:l.includeMetadataChanges};if(Iv(e[h])){const P=e[h];e[h]=null===(t=P.next)||void 0===t?void 0:t.bind(P),e[h+1]=null===(r=P.error)||void 0===r?void 0:r.bind(P),e[h+2]=null===(o=P.complete)||void 0===o?void 0:o.bind(P)}let w,A,N;if(n instanceof Fn)A=zt(n.firestore,Qn),N=ec(n._key.path),w={next:P=>{e[h]&&e[h](rb(A,n,P))},error:e[h+1],complete:e[h+2]};else{const P=zt(n,ki);A=zt(P.firestore,Qn),N=P._query;const Z=new qf(A);w={next:te=>{e[h]&&e[h](new ot(A,Z,P,te))},error:e[h+1],complete:e[h+2]},Qi(n._query)}return function(P,Z,te,Ce){const Ye=new am(Ce),et=new Qg(Z,Ye,te);return P.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return Uf(yield Zd(P),et)})),()=>{Ye.na(),P.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return Q_(yield Zd(P),et)}))}}(Cr(A),N,m,w)}function ym(n,e){return function(t,r){const o=new Or;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(n,e,t){return D0.apply(this,arguments)}(yield yv(t),r,o)})),o.promise}(Cr(n),e)}function rb(n,e,t){const r=t.docs.get(e._key),o=new qf(n);return new Qe(n,o,e._key,r,new Be(t.hasPendingWrites,t.fromCache),e.converter)}class tM extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Qd(e)}get(e){const t=Jd(e,this._firestore),r=new qS(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return lt();const l=o[0];if(l.isFoundDocument())return new Q(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new Q(this._firestore,r,t._key,null,t.converter);throw lt()})}set(e,t,r){const o=Jd(e,this._firestore),l=Z0(o.converter,t,r),h=Cv(this._dataReader,"Transaction.set",o._key,l,null!==o.converter,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const l=Jd(e,this._firestore);let h;return h="string"==typeof(t=(0,jt.m9)(t))||t instanceof Ua?a(this._dataReader,"Transaction.update",l._key,t,r,o):s(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,h),this}delete(e){const t=Jd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Jd(e,this._firestore),r=new qf(this._firestore);return super.get(e).then(o=>new Qe(this._firestore,r,t._key,o._document,new Be(!1,!1),t.converter))}}function ib(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function GT(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function qT(){if("undefined"==typeof atob)throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Jl=Fl.SDK_VERSION,(0,Fl._registerComponent)(new Oh.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),l=new Qn(o,new _D(t.getProvider("auth-internal")),new og(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC")),(0,Fl.registerVersion)(ZE,"3.4.1",n),(0,Fl.registerVersion)(ZE,"3.4.1","esm2017")}();class Rv{constructor(e){this._delegate=e}static fromBase64String(e){return qT(),new Rv(ra.fromBase64String(e))}static fromUint8Array(e){return GT(),new Rv(ra.fromUint8Array(e))}toBase64(){return qT(),this._delegate.toBase64()}toUint8Array(){return GT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function sb(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class dM{enableIndexedDbPersistence(e,t){return function(n,e){QC(n=zt(n,Qn));const t=Cr(n),r=n._freezeSettings(),o=new hv;return Hf(t,o,new O0(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){QC(n=zt(n,Qn));const e=Cr(n),t=n._freezeSettings(),r=new hv;return Hf(e,r,new NC(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Re(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!Ks.bt())return Promise.resolve();const o=r+"main";yield Ks.delete(o)}),function(r){return t.apply(this,arguments)})(M_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class zT{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof La||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&nf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var o;const l=(n=zt(n,Dc))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&nf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=ti.MOCK_USER;else{h=(0,jt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Re(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ti(w)}n._authCredentials=new Cd(new mD(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield F0(n),t=yield mv(n);return e.setNetworkEnabled(!0),function(r){const o=Ke(r);return o.Gr.delete(0),mc(o)}(t)}))}(Cr(n=zt(n,Qn)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield F0(n),t=yield mv(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(o){const l=Ke(o);l.Gr.add(0),yield yc(l),l.Jr.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Cr(n=zt(n,Qn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,vv("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Or;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(n,e){return Bf.apply(this,arguments)}(yield yv(e),t)})),t.promise}(Cr(n=zt(n,Qn)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new am(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Zd(n),o=t,Ke(r).io.add(o),void o.next();var r,o})),()=>{t.na(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Zd(n),o=t,void Ke(r).io.delete(o);var r,o}))}}(Cr(n=zt(n,Qn)),Iv(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new _m(this,UC(this._delegate,e))}catch(t){throw ws(t,"collection()","Firestore.collection()")}}doc(e){try{return new sa(this,wv(this._delegate,e))}catch(t){throw ws(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Is(this,function(n,e){if(n=zt(n,Dc),_v("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ki(n,null,(t=e,new Qo(nn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ws(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const r=yield(o=n,Kd(o).then(l=>l.datastore));var o;new PC(n.asyncQueue,r,e,t).run()})),t.promise}(Cr(n=zt(n,Qn)),t=>e(new tM(n,t)))}(this._delegate,t=>e(new WT(this,t)))}batch(){return Cr(this._delegate),new KT(new BT(this._delegate,e=>ym(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Cr(n=zt(n,Qn)),r=new $C;return function(n,e,t,r){const o=function(l,h){let m;return m="string"==typeof l?(new TextEncoder).encode(l):l,w=function(w,A){if(w instanceof Uint8Array)return fv(w,A);if(w instanceof ArrayBuffer)return fv(new Uint8Array(w),A);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new OC(w,h);var w}(t,Of(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function(n,e,t){const r=Ke(n);var o;(o=(0,_e.Z)(function*(l,h,m){try{const w=yield h.getMetadata();if(yield function(Z,te){const Ce=Ke(Z),Ye=lr(te.createTime);return Ce.persistence.runTransaction("hasNewerBundle","readonly",et=>Ce.Ye.getBundleMetadata(et,te.id)).then(et=>!!et&&et.createTime.compareTo(Ye)>=0)}(l.localStore,w))return yield h.close(),void m._completeWith((Z=w,{taskState:"Success",documentsLoaded:Z.totalDocuments,bytesLoaded:Z.totalBytes,totalDocuments:Z.totalDocuments,totalBytes:Z.totalBytes}));m._updateProgress(X_(w));const A=new wC(w,l.localStore,h.k);let N=yield h.Ho();for(;N;){const Z=yield A.yo(N);Z&&m._updateProgress(Z),N=yield h.Ho()}const P=yield A.complete();yield zu(l,P.In,void 0),yield function(Z,te){const Ce=Ke(Z);return Ce.persistence.runTransaction("Save bundle","readwrite",Ye=>Ce.Ye.saveBundleMetadata(Ye,te))}(l.localStore,w),m._completeWith(P.progress)}catch(w){nf("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w)}var Z}),function(l,h,m){return o.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield yv(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const o=Ke(t);return o.persistence.runTransaction("Get named query","readonly",l=>o.Ye.getNamedQuery(l,r))}(yield dm(n),e)}))}(Cr(n=zt(n,Qn)),e).then(t=>t?new ki(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Is(this,t):null)}}class Y0 extends nb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rv(new ra(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return sa.forKey(t,this.firestore,null)}}class WT{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Y0(e)}get(e){const t=Wf(e);return this._delegate.get(t).then(r=>new Nv(this._firestore,new Qe(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Wf(e);return r?(ib("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=Wf(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=Wf(e);return this._delegate.delete(t),this}}class KT{constructor(e){this._delegate=e}set(e,t,r){const o=Wf(e);return r?(ib("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=Wf(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=Wf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class zf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new be(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ov(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=zf.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let l=o.get(t);return l||(l=new zf(e,new Y0(e),t),o.set(t,l)),l}}zf.INSTANCES=new WeakMap;class sa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Y0(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new sa(t,new Fn(t._delegate,r,new at(e)))}static forKey(e,t,r){return new sa(t,new Fn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new _m(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new _m(this.firestore,UC(this._delegate,e))}catch(t){throw ws(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,jt.m9)(e))instanceof Fn&&BC(this._delegate,e)}set(e,t){t=ib("DocumentReference.set",t);try{return t?jT(this._delegate,e,t):jT(this._delegate,e)}catch(r){throw ws(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?$T(this._delegate,e):$T(this._delegate,e,t,...r)}catch(o){throw ws(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return ym(zt(n.firestore,Qn),[new vf(n._key,ur.none())])}(this._delegate)}onSnapshot(...e){const t=ZT(e),r=YT(e,o=>new Nv(this.firestore,new Qe(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return HT(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=zt(n,Fn);const e=zt(n.firestore,Qn),t=Cr(e),r=new qf(e);return function(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,l,h){try{const m=yield function(w,A){const N=Ke(w);return N.persistence.runTransaction("read document","readonly",P=>N.Wn.Rn(P,A))}(o,l);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new Re(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Wd(m,`Failed to get document '${l} from cache`);h.reject(w)}}),function(o,l,h){return r.apply(this,arguments)})(yield dm(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Qe(e,r,n._key,o,new Be(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=zt(n,Fn);const e=zt(n.firestore,Qn);return U0(Cr(e),n._key,{source:"server"}).then(t=>rb(e,n,t))}(this._delegate):function(n){n=zt(n,Fn);const e=zt(n.firestore,Qn);return U0(Cr(e),n._key).then(t=>rb(e,n,t))}(this._delegate),t.then(r=>new Nv(this.firestore,new Qe(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new sa(this.firestore,this._delegate.withConverter(e?zf.getInstance(this.firestore,e):null))}}function ws(n,e,t){return n.message=n.message.replace(e,t),n}function ZT(n){for(const e of n)if("object"==typeof e&&!sb(e))return e;return{}}function YT(n,e){var t,r;let o;return o=sb(n[0])?n[0]:sb(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{o.next&&o.next(e(l))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Nv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new sa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return hn(this._delegate,e._delegate)}}class Ov extends Nv{data(e){const t=this._delegate.data(e);return function(n,e){n||lt()}(void 0!==t),t}}class Is{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Y0(e)}where(e,t,r){try{return new Is(this.firestore,ia(this._delegate,function(n,e,t){const r=e,o=Pe("where",n);return new bv(o,r,t)}(e,t,r)))}catch(o){throw ws(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Is(this.firestore,ia(this._delegate,function(n,e="asc"){const t=e,r=Pe("orderBy",n);return new Av(r,t)}(e,t)))}catch(r){throw ws(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Is(this.firestore,ia(this._delegate,function(n){return j0("limit",n),new gm("limit",n,"F")}(e)))}catch(t){throw ws(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Is(this.firestore,ia(this._delegate,function(n){return j0("limitToLast",n),new gm("limitToLast",n,"L")}(e)))}catch(t){throw ws(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Is(this.firestore,ia(this._delegate,function(...n){return new mm("startAt",n,!0)}(...e)))}catch(t){throw ws(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Is(this.firestore,ia(this._delegate,function(...n){return new mm("startAfter",n,!1)}(...e)))}catch(t){throw ws(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Is(this.firestore,ia(this._delegate,function(...n){return new kT("endBefore",n,!0)}(...e)))}catch(t){throw ws(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Is(this.firestore,ia(this._delegate,function(...n){return new kT("endAt",n,!1)}(...e)))}catch(t){throw ws(t,"endAt()","Query.endAt()")}}isEqual(e){return jC(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=zt(n,ki);const e=zt(n.firestore,Qn),t=Cr(e),r=new qf(e);return function(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,l,h){try{const m=yield Pg(o,l,!0),w=new tv(l,m.zn),A=w.bo(m.documents),N=w.applyChanges(A,!1);h.resolve(N.snapshot)}catch(m){const w=Wd(m,`Failed to execute query '${l} against cache`);h.reject(w)}}),function(o,l,h){return r.apply(this,arguments)})(yield dm(n),e,t);var r})),t.promise}(t,n._query).then(o=>new ot(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=zt(n,ki);const e=zt(n.firestore,Qn),t=Cr(e),r=new qf(e);return LC(t,n._query,{source:"server"}).then(o=>new ot(e,r,n,o))}(this._delegate):function(n){n=zt(n,ki);const e=zt(n.firestore,Qn),t=Cr(e),r=new qf(e);return Qi(n._query),LC(t,n._query).then(o=>new ot(e,r,n,o))}(this._delegate),t.then(r=>new ob(this.firestore,new ot(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=ZT(e),r=YT(e,o=>new ob(this.firestore,new ot(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return HT(this._delegate,t,r)}withConverter(e){return new Is(this.firestore,this._delegate.withConverter(e?zf.getInstance(this.firestore,e):null))}}class fM{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ov(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ob{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Is(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ov(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new fM(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ov(this._firestore,r))})}isEqual(e){return hn(this._delegate,e._delegate)}}class _m extends Is{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new sa(this.firestore,e):null}doc(e){try{return new sa(this.firestore,void 0===e?wv(this._delegate):wv(this._delegate,e))}catch(t){throw ws(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=zt(n.firestore,Qn),r=wv(n),o=Z0(n.converter,e);return ym(t,[Cv(Qd(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,ur.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new sa(this.firestore,t))}isEqual(e){return BC(this._delegate,e._delegate)}withConverter(e){return new _m(this.firestore,this._delegate.withConverter(e?zf.getInstance(this.firestore,e):null))}}function Wf(n){return zt(n,Fn)}class ab{constructor(...e){this._delegate=new Ua(...e)}static documentId(){return new ab(di.keyField().canonicalString())}isEqual(e){return(e=(0,jt.m9)(e))instanceof Ua&&this._delegate._internalPath.isEqual(e._internalPath)}}class Kf{constructor(e){this._delegate=e}static serverTimestamp(){const e=new K0("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Kf(e)}static delete(){const e=new Gf("deleteField");return e._methodName="FieldValue.delete",new Kf(e)}static arrayUnion(...e){const t=function(...n){return new OT("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Kf(t)}static arrayRemove(...e){const t=function(...n){return new PT("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Kf(t)}static increment(e){const t=function(n){return new i("increment",n)}(e);return t._methodName="FieldValue.increment",new Kf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const pM={Firestore:zT,GeoPoint:pm,Timestamp:Pr,Blob:Rv,Transaction:WT,WriteBatch:KT,DocumentReference:sa,DocumentSnapshot:Nv,Query:Is,QueryDocumentSnapshot:Ov,QuerySnapshot:ob,CollectionReference:_m,FieldPath:ab,FieldValue:Kf,setLogLevel:function(n){!function(n){Tu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new Oh.wA("firestore-compat",t=>((e,t)=>new zT(e,t,new dM))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},pM)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.10")}(rT.Z);var yM=O(8264),Q0=O(8985),_M=O(2991);class vM extends Bi.x{constructor(e=1/0,t=1/0,r=_M.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:l,_windowTime:h}=this;t||(r.push(e),!o&&r.push(l.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,l=o.slice();for(let h=0;h<l.length&&!e.closed;h+=r?1:2)e.next(l[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,l=(o?1:2)*e;if(e<1/0&&l<r.length&&r.splice(0,r.length-l),!o){const h=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=h;w+=2)m=w;m&&r.splice(0,m+1)}}}var EM=O(9452);function QT(n,e,t){var r,o;let l,h=!1;return n&&"object"==typeof n?(l=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(o=n.windowTime)&&void 0!==o?o:1/0,h=!!n.refCount,t=n.scheduler):l=null!=n?n:1/0,(0,EM.B)({connector:()=>new vM(l,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:h})}function JT(n,e){return(0,au.m)(e)?sr(()=>n,e):sr(()=>n)}var ub=O(5649);O(7334);const eA=new Map,bM={activated:!1,tokenObservers:[]},TM={initialized:!1,enabled:!1};function hi(n){return eA.get(n)||bM}function Ba(n,e){eA.set(n,e)}function X0(){return TM}class RM{constructor(e,t,r,o,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=o,o>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new jt.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new jt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ds=new jt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function nA(n){if(!hi(n).activated)throw Ds.create("use-before-activation",{appName:n.name})}function hb(n,e){return fb.apply(this,arguments)}function fb(){return fb=(0,_e.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});o&&(r["X-Firebase-Client"]=o.getPlatformInfoString());const l={method:"POST",body:JSON.stringify(e),headers:r};let h,m;try{h=yield fetch(n,l)}catch(P){throw Ds.create("fetch-network-error",{originalErrorMessage:P.message})}if(200!==h.status)throw Ds.create("fetch-status-error",{httpStatus:h.status});try{m=yield h.json()}catch(P){throw Ds.create("fetch-parse-error",{originalErrorMessage:P.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Ds.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const A=1e3*Number(w[1]),N=Date.now();return{token:m.attestationToken,expireTimeMillis:N+A,issuedAtTimeMillis:N}}),fb.apply(this,arguments)}function LM(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Pv="firebase-app-check-store";let nI=null;function iA(){return nI||(nI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Ds.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Pv,{keyPath:"compositeKey"})}}catch(t){e(Ds.create("storage-open",{originalErrorMessage:t.message}))}}),nI)}function pb(){return pb=(0,_e.Z)(function*(n,e){const r=(yield iA()).transaction(Pv,"readwrite"),l=r.objectStore(Pv).put({compositeKey:n,value:e});return new Promise((h,m)=>{l.onsuccess=w=>{h()},r.onerror=w=>{var A;m(Ds.create("storage-set",{originalErrorMessage:null===(A=w.target.error)||void 0===A?void 0:A.message}))}})}),pb.apply(this,arguments)}const kv=new yu.Yd("@firebase/app-check");function uA(n,e){return(0,jt.hl)()?function(n,e){return function(n,e){return pb.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{kv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function lA(){return X0().enabled}function cA(){return _b.apply(this,arguments)}function _b(){return _b=(0,_e.Z)(function*(){const n=X0();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),_b.apply(this,arguments)}const WM={error:"UNKNOWN_ERROR"};function KM(n){return jt.US.encodeString(JSON.stringify(n),!1)}function rI(n){return vb.apply(this,arguments)}function vb(){return vb=(0,_e.Z)(function*(n,e=!1){const t=n.app;nA(t);const r=hi(t);let l,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&iI(w)&&(o=w)}if(!e&&o&&iI(o))return{token:o.token};let m,h=!1;if(lA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=hb(LM(t,yield cA()),n.platformLoggerProvider).then(A=>(r.exchangeTokenPromise=void 0,A)),h=!0);const w=yield r.exchangeTokenPromise;return yield uA(t,w),Ba(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),h=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?kv.warn(w.message):kv.error(w),l=w}return o?(m={token:o.token},Ba(t,Object.assign(Object.assign({},r),{token:o})),yield uA(t,o)):m=YM(l),h&&hA(t,m),m}),vb.apply(this,arguments)}function wb(n,e){const t=hi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ba(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function dA(n){const{app:e}=n,t=hi(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new RM((0,_e.Z)(function*(){let r;if(r=hi(e).token?yield rI(n,!0):yield rI(n),r.error)throw r.error}),()=>!0,()=>{const t=hi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ba(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function hA(n,e){const t=hi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function iI(n){return n.expireTimeMillis-Date.now()>0}function YM(n){return{token:KM(WM),error:n}}class QM{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=hi(this.app);for(const t of e)wb(this.app,t.next);return Promise.resolve()}}const EA="app-check-internal";(0,Fl._registerComponent)(new Oh.wA("app-check",n=>function(n,e){return new QM(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(EA).initialize()})),(0,Fl._registerComponent)(new Oh.wA(EA,n=>function(n){return{getToken:e=>rI(n,e),addTokenListener:e=>function(n,e,t,r){const{app:o}=n,l=hi(o),h={next:t,error:r,type:e};if(Ba(o,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,h]})),l.token&&iI(l.token)){const m=l.token;Promise.resolve().then(()=>{t({token:m.token}),dA(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>dA(n))}(n,"INTERNAL",e),removeTokenListener:e=>wb(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Fl.registerVersion)("@firebase/app-check","0.5.2");class bb{constructor(){return(0,Rr.vb)("app-check")}}"undefined"!=typeof window&&window;var IA=O(6543);const DA=new g.OlP("angularfire2.auth.use-emulator"),CA=new g.OlP("angularfire2.auth.settings"),bA=new g.OlP("angularfire2.auth.tenant-id"),TA=new g.OlP("angularfire2.auth.langugage-code"),AA=new g.OlP("angularfire2.auth.use-device-language"),SA=new g.OlP("angularfire.auth.persistence"),MA=(n,e,t,r,o,l,h,m)=>(0,ms.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,l&&w.useDeviceLanguage(),h)for(const[A,N]of Object.entries(h))w.settings[A]=N;return m&&w.setPersistence(m),w},[t,r,o,l,h,m]);let oI=(()=>{class n{constructor(t,r,o,l,h,m,w,A,N,P,Z,te){const Ce=new Bi.x,Ye=it(void 0).pipe((0,Q0.Q)(h.outsideAngular),sr(()=>l.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,7727)))),(0,bt.U)(()=>(0,ms.on)(t,l,r)),(0,bt.U)(et=>MA(et,l,m,A,N,P,w,Z)),QT({bufferSize:1,refCount:!1}));if(Yr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=it(null);else{Ye.pipe(ho()).subscribe();const Qt=Ye.pipe(sr(Bt=>Bt.getRedirectResult().then(Jn=>Jn,()=>null)),Rr.iC,QT({bufferSize:1,refCount:!1})),fn=Ye.pipe(sr(Bt=>new li.y(Jn=>({unsubscribe:l.runOutsideAngular(()=>Bt.onAuthStateChanged(ja=>Jn.next(ja),ja=>Jn.error(ja),()=>Jn.complete()))})))),cr=Ye.pipe(sr(Bt=>new li.y(Jn=>({unsubscribe:l.runOutsideAngular(()=>Bt.onIdTokenChanged(ja=>Jn.next(ja),ja=>Jn.error(ja),()=>Jn.complete()))}))));this.authState=Qt.pipe(JT(fn),(0,ub.R)(h.outsideAngular),(0,Q0.Q)(h.insideAngular)),this.user=Qt.pipe(JT(cr),(0,ub.R)(h.outsideAngular),(0,Q0.Q)(h.insideAngular)),this.idToken=this.user.pipe(sr(Bt=>Bt?(0,In.D)(Bt.getIdToken()):it(null))),this.idTokenResult=this.user.pipe(sr(Bt=>Bt?(0,In.D)(Bt.getIdTokenResult()):it(null))),this.credential=(0,yM.T)(Qt,Ce,this.authState.pipe(Ar(Bt=>!Bt))).pipe((0,bt.U)(Bt=>(null==Bt?void 0:Bt.user)?Bt:null),(0,ub.R)(h.outsideAngular),(0,Q0.Q)(h.insideAngular))}return(0,ms.pX)(this,Ye,l,{spy:{apply:(et,Qt,fn)=>{(et.startsWith("signIn")||et.startsWith("createUser"))&&fn.then(cr=>Ce.next(cr))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ms.Dh),g.LFG(ms.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Rr.HU),g.LFG(DA,8),g.LFG(CA,8),g.LFG(bA,8),g.LFG(TA,8),g.LFG(AA,8),g.LFG(SA,8),g.LFG(bb,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),yx=(()=>{class n{constructor(){IA.Z.registerVersion("angularfire",Rr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[oI]}),n})();function xA(n,e){return function(n,e=$I.z){return new li.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Ab(n,e){return xA(n,e).pipe((0,bt.U)(t=>({payload:t,type:"query"})))}function aI(n,e){return Ab(n,e).pipe(ds(void 0),sy(),(0,bt.U)(([t,r])=>{const o=r.payload.docChanges(),l=o.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,m)=>{const w=o.find(N=>N.doc.ref.isEqual(h.ref)),A=null==t?void 0:t.payload.docs.find(N=>N.ref.isEqual(h.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(h.metadata)||!w&&A&&JSON.stringify(A.metadata)===JSON.stringify(h.metadata)||l.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:h}})}),l}))}function RA(n,e,t){return aI(n,t).pipe(Ci((r,o)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Sb(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Sb(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Sb(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(l=>l.payload),e),[]),function(n,e=ao.y){return n=null!=n?n:eE,(0,Gt.e)((t,r)=>{let o,l=!0;t.subscribe(new er.Q(r,h=>{const m=e(h);(l||!n(o,m))&&(l=!1,o=m,r.next(h))}))})}(),(0,bt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function Sb(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function NA(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class OA{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=aI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,bt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(ds(void 0),sy(),Ar(([r,o])=>o.length>0||!r),(0,bt.U)(([r,o])=>o),Rr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ci((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=NA(e);return RA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Rr.iC)}valueChanges(e={}){return Ab(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Rr.iC)}get(e){return(0,In.D)(this.query.get(e)).pipe(Rr.iC)}add(e){return this.ref.add(e)}doc(e){return new PA(this.ref.doc(e),this.afs)}}class PA{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:l}=LA(r,t);return new OA(o,l,this.afs)}snapshotChanges(){return function(n,e){return xA(n,e).pipe(ds(void 0),sy(),(0,bt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Rr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,bt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,In.D)(this.ref.get(e)).pipe(Rr.iC)}}class Ix{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?aI(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ar(t=>t.length>0),Rr.iC):aI(this.query,this.afs.schedulers.outsideAngular).pipe(Rr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ci((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=NA(e);return RA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Rr.iC)}valueChanges(e={}){return Ab(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Rr.iC)}get(e){return(0,In.D)(this.query.get(e)).pipe(Rr.iC)}}const kA=new g.OlP("angularfire2.enableFirestorePersistence"),FA=new g.OlP("angularfire2.firestore.persistenceSettings"),Dx=new g.OlP("angularfire2.firestore.settings"),Cx=new g.OlP("angularfire2.firestore.use-emulator");function LA(n,e=(t=>t)){return{query:e(n),ref:n}}let Mb=(()=>{class n{constructor(t,r,o,l,h,m,w,A,N,P,Z,te,Ce,Ye,et,Qt,fn){this.schedulers=w;const cr=(0,ms.on)(t,m,r),Bt=N;P&&MA(cr,m,Z,Ce,Ye,et,te,Qt),[this.firestore,this.persistenceEnabled$]=(0,ms.cc)(`${cr.name}.firestore`,"AngularFirestore",cr.name,()=>{const Jn=m.runOutsideAngular(()=>cr.firestore());if(l&&Jn.settings(l),Bt&&Jn.useEmulator(...Bt),o&&!Yr(h)){const ja=()=>{try{return(0,In.D)(Jn.enablePersistence(A||void 0).then(()=>!0,()=>!1))}catch(vI){return"undefined"!=typeof console&&console.warn(vI),it(!1)}};return[Jn,m.runOutsideAngular(ja)]}return[Jn,it(!1)]},[l,Bt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:h}=LA(o,r),m=this.schedulers.ngZone.run(()=>l);return new OA(m,h,this)}collectionGroup(t,r){const o=r||(h=>h),l=this.firestore.collectionGroup(t);return new Ix(o(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new PA(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ms.Dh),g.LFG(ms.xv,8),g.LFG(kA,8),g.LFG(Dx,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Rr.HU),g.LFG(FA,8),g.LFG(Cx,8),g.LFG(oI,8),g.LFG(DA,8),g.LFG(CA,8),g.LFG(bA,8),g.LFG(TA,8),g.LFG(AA,8),g.LFG(SA,8),g.LFG(bb,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),bx=(()=>{class n{constructor(){IA.Z.registerVersion("angularfire",Rr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:kA,useValue:!0},{provide:FA,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[Mb]}),n})();var VA=O(2755);let xb=(()=>{class n{constructor(t,r){this.afs=t,this.afAuth=r,this.chats=[],this.usuario={},this.afAuth.authState.subscribe(o=>{!o||(this.usuario.nombre=o.displayName,this.usuario.uid=o.uid)})}login(t){"google"===t?this.afAuth.signInWithPopup(new VA.N):"facebook"===t&&this.afAuth.signInWithPopup(new VA.M)}logout(){this.usuario={},this.afAuth.signOut()}cargarMensajes(){return this.itemsCollection=this.afs.collection("chats",t=>t.orderBy("fecha","desc").limit(5)),this.itemsCollection.valueChanges().pipe((0,bt.U)(t=>{this.chats=[];for(const r of t)this.chats.unshift(r);return this.chats}))}agregarMensaje(t){let r={nombre:this.usuario.nombre,mensaje:t,fecha:(new Date).getTime(),uid:this.usuario.uid};return this.itemsCollection.add(r)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Mb),g.LFG(oI))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Tx=(()=>{class n{constructor(t){this.chatSvc=t}ngOnInit(){}ingresar(t){this.chatSvc.login(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(xb))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-login"]],decls:11,vars:0,consts:[[1,"row"],[1,"col-md-12","text-center"],[1,"col-8","offset-2"],[1,"fb","btn",3,"click"],[1,"fab","fa-facebook","fa-fw"],[1,"google","btn",3,"click"],[1,"fab","fa-google","fa-fw"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"p"),g._uU(3,"Ingrese al chat con su cuenta favorita"),g.qZA(),g.TgZ(4,"div",2),g.TgZ(5,"button",3),g.NdJ("click",function(){return r.ingresar("facebook")}),g._UZ(6,"i",4),g._uU(7," Facebook "),g.qZA(),g.TgZ(8,"button",5),g.NdJ("click",function(){return r.ingresar("google")}),g._UZ(9,"i",6),g._uU(10," Google "),g.qZA(),g.qZA(),g.qZA(),g.qZA())},styles:['body[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif}*[_ngcontent-%COMP%]{box-sizing:border-box}.container[_ngcontent-%COMP%]{position:relative;border-radius:5px;background-color:#f2f2f2;padding:20px 0 30px}input[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{width:100%;padding:12px;border:none;border-radius:4px;margin:5px 0;opacity:.85;display:inline-block;font-size:17px;line-height:20px;text-decoration:none}input[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:hover{opacity:1}.fb[_ngcontent-%COMP%]{background-color:#3b5998;color:#fff}.google[_ngcontent-%COMP%]{background-color:#dd4b39;color:#fff}input[type=submit][_ngcontent-%COMP%]{background-color:#04aa6d;color:#fff;cursor:pointer}input[type=submit][_ngcontent-%COMP%]:hover{background-color:#45a049}.col[_ngcontent-%COMP%]{float:left;width:50%;margin:6px auto auto;padding:0 50px}.row[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}.vl[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);border:2px solid #ddd;height:175px}.vl-innertext[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translate(-50%,-50%);background-color:#f1f1f1;border:1px solid #ccc;border-radius:50%;padding:8px 10px}.hide-md-lg[_ngcontent-%COMP%]{display:none}.bottom-container[_ngcontent-%COMP%]{text-align:center;background-color:#666;border-radius:0 0 4px 4px}@media screen and (max-width: 650px){.col[_ngcontent-%COMP%]{width:100%;margin-top:0}.vl[_ngcontent-%COMP%]{display:none}.hide-md-lg[_ngcontent-%COMP%]{display:block;text-align:center}}']}),n})(),UA=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),Zf=(()=>{class n extends UA{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Ku=new g.OlP("NgValueAccessor"),Mx={provide:Ku,useExisting:(0,g.Gpc)(()=>uI),multi:!0},Rx=new g.OlP("CompositionEventMode");let uI=(()=>{class n extends UA{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=R()?R().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(Rx,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[g._Bn([Mx]),g.qOj]}),n})();const Ji=new g.OlP("NgValidators"),eh=new g.OlP("NgAsyncValidators");function YA(n){return null!=n}function QA(n){const e=(0,g.QGY)(n)?(0,In.D)(n):n;return(0,g.CqO)(e),e}function JA(n){let e={};return n.forEach(t=>{e=null!=t?vt(vt({},e),t):e}),0===Object.keys(e).length?null:e}function XA(n,e){return e.map(t=>t(n))}function eS(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function Rb(n){return null!=n?function(n){if(!n)return null;const e=n.filter(YA);return 0==e.length?null:function(t){return JA(XA(t,e))}}(eS(n)):null}function Nb(n){return null!=n?function(n){if(!n)return null;const e=n.filter(YA);return 0==e.length?null:function(t){return function(...n){const e=(0,so.jO)(n),{args:t,keys:r}=wi(n),o=new li.y(l=>{const{length:h}=t;if(!h)return void l.complete();const m=new Array(h);let w=h,A=h;for(let N=0;N<h;N++){let P=!1;(0,Di.Xf)(t[N]).subscribe(new er.Q(l,Z=>{P||(P=!0,A--),m[N]=Z},()=>w--,void 0,()=>{(!w||!P)&&(A||l.next(r?Fo(r,m):m),l.complete())}))}});return e?o.pipe(ks(e)):o}(XA(t,e).map(QA)).pipe((0,bt.U)(JA))}}(eS(n)):null}function rS(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ob(n){return n?Array.isArray(n)?n:[n]:[]}function lI(n,e){return Array.isArray(n)?n.includes(e):n===e}function oS(n,e){const t=Ob(e);return Ob(n).forEach(o=>{lI(t,o)||t.push(o)}),t}function aS(n,e){return Ob(e).filter(t=>!lI(n,t))}class uS{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Rb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Nb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Cs extends uS{get formDirective(){return null}get path(){return null}}class th extends uS{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let cS=(()=>{class n extends class{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null==(t=this._cd)?void 0:t.submitted):!!(null==(o=null==(r=this._cd)?void 0:r.control)?void 0:o[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(th,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[g.qOj]}),n})();function Lv(n,e){(function(n,e){const t=function(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(rS(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(rS(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();fI(e._rawValidators,o),fI(e._rawAsyncValidators,o)})(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&dS(n,e)})}(n,e),function(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&dS(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function fI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function dS(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function gI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Vv="VALID",mI="INVALID",vm="PENDING",Uv="DISABLED";function Ub(n){return(jb(n)?n.validators:n)||null}function pS(n){return Array.isArray(n)?Rb(n):n||null}function Bb(n,e){return(jb(e)?e.asyncValidators:n)||null}function gS(n){return Array.isArray(n)?Nb(n):n||null}function jb(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class $b{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=pS(this._rawValidators),this._composedAsyncValidatorFn=gS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Vv}get invalid(){return this.status===mI}get pending(){return this.status==vm}get disabled(){return this.status===Uv}get enabled(){return this.status!==Uv}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=pS(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=gS(e)}addValidators(e){this.setValidators(oS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(oS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(aS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(aS(e,this._rawAsyncValidators))}hasValidator(e){return lI(this._rawValidators,e)}hasAsyncValidator(e){return lI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=vm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Uv,this.errors=null,this._forEachChild(r=>{r.disable(fi(vt({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(fi(vt({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Vv,this._forEachChild(r=>{r.enable(fi(vt({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(fi(vt({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vv||this.status===vm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Uv:Vv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=vm,this._hasOwnPendingAsyncValidator=!0;const t=QA(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=r instanceof Hb?r.controls.hasOwnProperty(o)?r.controls[o]:null:r instanceof zx&&r.at(o)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Uv:this.errors?mI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vm)?vm:this._anyControlsHaveStatus(mI)?mI:Vv}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){jb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class yI extends $b{constructor(e=null,t,r){super(Ub(t),Bb(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Hb extends $b{constructor(e,t,r){super(Ub(t),Bb(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof yI?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,l)=>{r=t(r,o,l)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class zx extends $b{constructor(e,t,r){super(Ub(t),Bb(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof yI?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Zx={provide:th,useExisting:(0,g.Gpc)(()=>qb)},_S=(()=>Promise.resolve(null))();let qb=(()=>{class n extends th{constructor(t,r,o,l){super(),this.control=new yI,this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(l=>{l.constructor===uI?t=l:function(n){return Object.getPrototypeOf(n.constructor)===Zf}(l)?r=l:o=l}),o||r||t||null}(0,l)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Lv(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){_S.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;_S.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Cs,9),g.Y36(Ji,10),g.Y36(eh,10),g.Y36(Ku,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([Zx]),g.qOj,g.TTD]}),n})(),ES=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),ER=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[ES]]}),n})(),wR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[ER]}),n})();const IR=function(n){return{"text-end":n}},DR=function(n,e){return{"bg-primary":n,"bg-success":e}};function CR(n,e){if(1&n&&(g.TgZ(0,"div",3),g.TgZ(1,"span",4),g._uU(2),g.qZA(),g.TgZ(3,"p"),g._uU(4),g.qZA(),g.qZA()),2&n){const t=e.$implicit,r=g.oxw();g.Q6J("ngClass",g.VKq(4,IR,r.chatSvc.usuario.uid==t.uid)),g.xp6(1),g.Q6J("ngClass",g.WLB(6,DR,r.chatSvc.usuario.uid==t.uid,r.chatSvc.usuario.uid!==t.uid)),g.xp6(1),g.Oqu(t.nombre),g.xp6(2),g.Oqu(t.mensaje)}}let bR=(()=>{class n{constructor(t){this.chatSvc=t,this.mensaje="",this.chatSvc.cargarMensajes().subscribe(()=>{setTimeout(()=>{this.elemento.scrollTop=this.elemento.scrollHeight},20)})}ngOnInit(){this.elemento=document.getElementById("app-mensajes")}enviar_mensaje(){0!==this.mensaje.length&&this.chatSvc.agregarMensaje(this.mensaje).then(()=>this.mensaje="").catch(t=>console.log("Error al enviar el mensaje",t))}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(xb))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-chat"]],decls:6,vars:2,consts:[["id","app-mensajes",1,"app-mensajes"],[3,"ngClass",4,"ngFor","ngForOf"],["type","text","name","mensaje","placeholder","Enviar mensaje",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],[3,"ngClass"],[1,"badge",3,"ngClass"]],template:function(t,r){1&t&&(g.TgZ(0,"h1"),g._uU(1,"Chat"),g.qZA(),g._UZ(2,"hr"),g.TgZ(3,"div",0),g.YNc(4,CR,5,9,"div",1),g.qZA(),g.TgZ(5,"input",2),g.NdJ("ngModelChange",function(l){return r.mensaje=l})("keyup.enter",function(){return r.enviar_mensaje()}),g.qZA()),2&t&&(g.xp6(4),g.Q6J("ngForOf",r.chatSvc.chats),g.xp6(1),g.Q6J("ngModel",r.mensaje))},directives:[aa,uI,cS,qb,Zr],styles:[""]}),n})();function TR(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",4),g.TgZ(1,"button",5),g.NdJ("click",function(){return g.CHM(t),g.oxw().chatSvc.logout()}),g._uU(2,"Salir"),g.qZA(),g.qZA()}}function AR(n,e){1&n&&g._UZ(0,"app-login")}function SR(n,e){1&n&&(g.TgZ(0,"div",6),g._UZ(1,"app-chat"),g.qZA())}let MR=(()=>{class n{constructor(t,r){this.chatSvc=r,this.chats=t.collection("chats").valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Mb),g.Y36(xb))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:6,vars:3,consts:[[1,"container","main-container"],["class","col-md-12 text-end",4,"ngIf"],[4,"ngIf"],["class","chat-window",4,"ngIf"],[1,"col-md-12","text-end"],[1,"btn","btn-outline-danger",3,"click"],[1,"chat-window"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"h1"),g._uU(2,"Firechat"),g.qZA(),g.YNc(3,TR,3,0,"div",1),g.YNc(4,AR,1,0,"app-login",2),g.YNc(5,SR,2,0,"div",3),g.qZA()),2&t&&(g.xp6(3),g.Q6J("ngIf",r.chatSvc.usuario.uid),g.xp6(1),g.Q6J("ngIf",!r.chatSvc.usuario.uid),g.xp6(1),g.Q6J("ngIf",r.chatSvc.usuario.uid))},directives:[Ss,Tx,bR],styles:[""]}),n})();const VS_firebase={apiKey:"AIzaSyDNsR2J3IoD9cHzvsrXhdWG0BD4YqKdqlU",authDomain:"firechat-b5c96.firebaseapp.com",projectId:"firechat-b5c96",storageBucket:"firechat-b5c96.appspot.com",messagingSenderId:"482829919391",appId:"1:482829919391:web:7b11e5aa72388b97e02eaa",measurementId:"G-PHXNB5XVV7"};let xR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[MR]}),n.\u0275inj=g.cJS({providers:[],imports:[[ol,Nh,ms.hO.initializeApp(VS_firebase),bx,yx,wR]]}),n})();(0,g.G48)(),Xa().bootstrapModule(xR).catch(n=>console.error(n))},1921:(Je,ye,O)=>{"use strict";function g(R,re,ie,fe,oe,se,le){try{var j=R[se](le),U=j.value}catch(ee){return void ie(ee)}j.done?re(U):Promise.resolve(U).then(fe,oe)}function L(R){return function(){var re=this,ie=arguments;return new Promise(function(fe,oe){var se=R.apply(re,ie);function le(U){g(se,fe,oe,le,j,"next",U)}function j(U){g(se,fe,oe,le,j,"throw",U)}le(void 0)})}}O.d(ye,{Z:()=>L})},614:(Je,ye,O)=>{"use strict";O.d(ye,{Z:()=>Ve});var g=O(9842),L=O(7817),R=O(2646),re=O(4516);class ie{constructor(ue,Y){this._delegate=ue,this.firebase=Y,(0,R._addComponent)(ue,new L.wA("app-compat",()=>this,"PUBLIC")),this.container=ue.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ue){this._delegate.automaticDataCollectionEnabled=ue}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ue=>{this._delegate.checkDestroyed(),ue()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,R.deleteApp)(this._delegate)))}_getService(ue,Y=R._DEFAULT_ENTRY_NAME){var ae;this._delegate.checkDestroyed();const Ie=this._delegate.container.getProvider(ue);return!Ie.isInitialized()&&"EXPLICIT"===(null===(ae=Ie.getComponent())||void 0===ae?void 0:ae.instantiationMode)&&Ie.initialize(),Ie.getImmediate({identifier:Y})}_removeServiceInstance(ue,Y=R._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ue).clearInstance(Y)}_addComponent(ue){(0,R._addComponent)(this._delegate,ue)}_addOrOverwriteComponent(ue){(0,R._addOrOverwriteComponent)(this._delegate,ue)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function le(){const Ue=function(Ue){const ue={},Y={__esModule:!0,initializeApp:function(We,ct={}){const ne=R.initializeApp(We,ct);if((0,g.r3)(ue,ne.name))return ue[ne.name];const ce=new Ue(ne,Y);return ue[ne.name]=ce,ce},app:Ie,registerVersion:R.registerVersion,setLogLevel:R.setLogLevel,onLog:R.onLog,apps:null,SDK_VERSION:R.SDK_VERSION,INTERNAL:{registerComponent:function(We){const ct=We.name,ne=ct.replace("-compat","");if(R._registerComponent(We)&&"PUBLIC"===We.type){const ce=(ge=Ie())=>{if("function"!=typeof ge[ne])throw oe.create("invalid-app-argument",{appName:ct});return ge[ne]()};void 0!==We.serviceProps&&(0,g.ZB)(ce,We.serviceProps),Y[ne]=ce,Ue.prototype[ne]=function(...ge){return this._getService.bind(this,ct).apply(this,We.multipleInstances?ge:[])}}return"PUBLIC"===We.type?Y[ne]:null},removeApp:function(We){delete ue[We]},useAsService:function(We,ct){return"serverAuth"===ct?null:ct},modularAPIs:R}};function Ie(We){if(!(0,g.r3)(ue,We=We||R._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:We});return ue[We]}return Y.default=Y,Object.defineProperty(Y,"apps",{get:function(){return Object.keys(ue).map(We=>ue[We])}}),Ie.App=Ue,Y}(ie);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function(Y){(0,g.ZB)(Ue,Y)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Ue}(),U=new re.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){U.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&U.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ve=j;(0,R.registerVersion)("@firebase/app-compat","0.1.12",undefined)},2646:(Je,ye,O)=>{"use strict";O.r(ye),O.d(ye,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>ri,_DEFAULT_ENTRY_NAME:()=>Bn,_addComponent:()=>ln,_addOrOverwriteComponent:()=>dr,_apps:()=>It,_clearComponents:()=>pn,_components:()=>Dt,_getProvider:()=>Jt,_registerComponent:()=>hr,_removeServiceInstance:()=>Xi,deleteApp:()=>jn,getApp:()=>Ne,getApps:()=>gn,initializeApp:()=>pi,onLog:()=>Vt,registerVersion:()=>tt,setLogLevel:()=>nr});var g=O(1921),L=O(7817),R=O(4516),re=O(9842);class ie{constructor(dt){this.container=dt}getPlatformInfoString(){return this.container.getProviders().map(xt=>{if(function(ht){const dt=ht.getComponent();return"VERSION"===(null==dt?void 0:dt.type)}(xt)){const Nt=xt.getImmediate();return`${Nt.library}/${Nt.version}`}return null}).filter(xt=>xt).join(" ")}}const oe="@firebase/app",le=new R.Yd("@firebase/app"),Bn="[DEFAULT]",wt={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},It=new Map,Dt=new Map;function ln(ht,dt){try{ht.container.addComponent(dt)}catch(xt){le.debug(`Component ${dt.name} failed to register with FirebaseApp ${ht.name}`,xt)}}function dr(ht,dt){ht.container.addOrOverwriteComponent(dt)}function hr(ht){const dt=ht.name;if(Dt.has(dt))return le.debug(`There were multiple attempts to register component ${dt}.`),!1;Dt.set(dt,ht);for(const xt of It.values())ln(xt,ht);return!0}function Jt(ht,dt){return ht.container.getProvider(dt)}function Xi(ht,dt,xt=Bn){Jt(ht,dt).clearInstance(xt)}function pn(){Dt.clear()}const Wt=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class es{constructor(dt,xt,Nt){this._isDeleted=!1,this._options=Object.assign({},dt),this._config=Object.assign({},xt),this._name=xt.name,this._automaticDataCollectionEnabled=xt.automaticDataCollectionEnabled,this._container=Nt,this.container.addComponent(new L.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(dt){this.checkDestroyed(),this._automaticDataCollectionEnabled=dt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(dt){this._isDeleted=dt}checkDestroyed(){if(this.isDeleted)throw Wt.create("app-deleted",{appName:this._name})}}const ri="9.6.1";function pi(ht,dt={}){"object"!=typeof dt&&(dt={name:dt});const xt=Object.assign({name:Bn,automaticDataCollectionEnabled:!1},dt),Nt=xt.name;if("string"!=typeof Nt||!Nt)throw Wt.create("bad-app-name",{appName:String(Nt)});const Hn=It.get(Nt);if(Hn){if((0,re.vZ)(ht,Hn.options)&&(0,re.vZ)(xt,Hn.config))return Hn;throw Wt.create("duplicate-app",{appName:Nt})}const Kt=new L.H0(Nt);for(const ut of Dt.values())Kt.addComponent(ut);const He=new es(ht,xt,Kt);return It.set(Nt,He),He}function Ne(ht=Bn){const dt=It.get(ht);if(!dt)throw Wt.create("no-app",{appName:ht});return dt}function gn(){return Array.from(It.values())}function jn(ht){return ii.apply(this,arguments)}function ii(){return(ii=(0,g.Z)(function*(ht){const dt=ht.name;It.has(dt)&&(It.delete(dt),yield Promise.all(ht.container.getProviders().map(xt=>xt.delete())),ht.isDeleted=!0)})).apply(this,arguments)}function tt(ht,dt,xt){var Nt;let Hn=null!==(Nt=wt[ht])&&void 0!==Nt?Nt:ht;xt&&(Hn+=`-${xt}`);const Kt=Hn.match(/\s|\//),He=dt.match(/\s|\//);if(Kt||He){const ut=[`Unable to register library "${Hn}" with version "${dt}":`];return Kt&&ut.push(`library name "${Hn}" contains illegal characters (whitespace or "/")`),Kt&&He&&ut.push("and"),He&&ut.push(`version name "${dt}" contains illegal characters (whitespace or "/")`),void le.warn(ut.join(" "))}hr(new L.wA(`${Hn}-version`,()=>({library:Hn,version:dt}),"VERSION"))}function Vt(ht,dt){if(null!==ht&&"function"!=typeof ht)throw Wt.create("invalid-log-argument");(0,R.Am)(ht,dt)}function nr(ht){(0,R.Ub)(ht)}hr(new L.wA("platform-logger",dt=>new ie(dt),"PRIVATE")),tt(oe,"0.7.11",""),tt(oe,"0.7.11","esm2017"),tt("fire-js","")},7817:(Je,ye,O)=>{"use strict";O.d(ye,{wA:()=>R,H0:()=>se});var g=O(1921),L=O(9842);class R{constructor(j,U,ee){this.name=j,this.instanceFactory=U,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const re="[DEFAULT]";class ie{constructor(j,U){this.name=j,this.container=U,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const U=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(U)){const ee=new L.BH;if(this.instancesDeferred.set(U,ee),this.isInitialized(U)||this.shouldAutoInitialize())try{const ke=this.getOrInitializeService({instanceIdentifier:U});ke&&ee.resolve(ke)}catch(ke){}}return this.instancesDeferred.get(U).promise}getImmediate(j){var U;const ee=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),ke=null!==(U=null==j?void 0:j.optional)&&void 0!==U&&U;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Te){if(ke)return null;throw Te}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if("EAGER"===j.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:re})}catch(U){}for(const[U,ee]of this.instancesDeferred.entries()){const ke=this.normalizeInstanceIdentifier(U);try{const Te=this.getOrInitializeService({instanceIdentifier:ke});ee.resolve(Te)}catch(Te){}}}}clearInstance(j=re){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,g.Z)(function*(){const U=Array.from(j.instances.values());yield Promise.all([...U.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...U.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=re){return this.instances.has(j)}getOptions(j=re){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:U={}}=j,ee=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ke=this.getOrInitializeService({instanceIdentifier:ee,options:U});for(const[Te,Ve]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Te)&&Ve.resolve(ke);return ke}onInit(j,U){var ee;const ke=this.normalizeInstanceIdentifier(U),Te=null!==(ee=this.onInitCallbacks.get(ke))&&void 0!==ee?ee:new Set;Te.add(j),this.onInitCallbacks.set(ke,Te);const Ve=this.instances.get(ke);return Ve&&j(Ve,ke),()=>{Te.delete(j)}}invokeOnInitCallbacks(j,U){const ee=this.onInitCallbacks.get(U);if(ee)for(const ke of ee)try{ke(j,U)}catch(Te){}}getOrInitializeService({instanceIdentifier:j,options:U={}}){let ee=this.instances.get(j);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(le=j,le===re?void 0:le),options:U}),this.instances.set(j,ee),this.instancesOptions.set(j,U),this.invokeOnInitCallbacks(ee,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,ee)}catch(ke){}var le;return ee||null}normalizeInstanceIdentifier(j=re){return this.component?this.component.multipleInstances?j:re:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class se{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const U=this.getProvider(j.name);if(U.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);U.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const U=new ie(j,this);return this.providers.set(j,U),U}getProviders(){return Array.from(this.providers.values())}}},4516:(Je,ye,O)=>{"use strict";O.d(ye,{in:()=>L,Yd:()=>oe,Ub:()=>se,Am:()=>le});const g=[];var L=(()=>{return(j=L||(L={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",L;var j})();const R={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},re=L.INFO,ie={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},fe=(j,U,...ee)=>{if(U<j.logLevel)return;const ke=(new Date).toISOString(),Te=ie[U];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${U})`);console[Te](`[${ke}]  ${j.name}:`,...ee)};class oe{constructor(U){this.name=U,this._logLevel=re,this._logHandler=fe,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(U){if(!(U in L))throw new TypeError(`Invalid value "${U}" assigned to \`logLevel\``);this._logLevel=U}setLogLevel(U){this._logLevel="string"==typeof U?R[U]:U}get logHandler(){return this._logHandler}set logHandler(U){if("function"!=typeof U)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=U}get userLogHandler(){return this._userLogHandler}set userLogHandler(U){this._userLogHandler=U}debug(...U){this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...U),this._logHandler(this,L.DEBUG,...U)}log(...U){this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...U),this._logHandler(this,L.VERBOSE,...U)}info(...U){this._userLogHandler&&this._userLogHandler(this,L.INFO,...U),this._logHandler(this,L.INFO,...U)}warn(...U){this._userLogHandler&&this._userLogHandler(this,L.WARN,...U),this._logHandler(this,L.WARN,...U)}error(...U){this._userLogHandler&&this._userLogHandler(this,L.ERROR,...U),this._logHandler(this,L.ERROR,...U)}}function se(j){g.forEach(U=>{U.setLogLevel(j)})}function le(j,U){for(const ee of g){let ke=null;U&&U.level&&(ke=R[U.level]),ee.userLogHandler=null===j?null:(Te,Ve,...Ue)=>{const ue=Ue.map(Y=>{if(null==Y)return null;if("string"==typeof Y)return Y;if("number"==typeof Y||"boolean"==typeof Y)return Y.toString();if(Y instanceof Error)return Y.message;try{return JSON.stringify(Y)}catch(ae){return null}}).filter(Y=>Y).join(" ");Ve>=(null!=ke?ke:Te.logLevel)&&j({level:L[Ve].toLowerCase(),message:ue,args:Ue,type:Te.name})}}}},3668:(Je,ye,O)=>{"use strict";O.d(ye,{deG:()=>Uo,tb:()=>wc,AFp:()=>T0,ip1:()=>rv,CZH:()=>qu,hGG:()=>W0,z2F:()=>Ic,sBO:()=>kC,Sil:()=>ov,_Vd:()=>Eo,EJc:()=>im,SBq:()=>bf,qLn:()=>Mh,vpe:()=>Zs,tBr:()=>_n,XFs:()=>tt,OlP:()=>An,zs3:()=>_s,ZZ4:()=>Hf,aQg:()=>fm,soG:()=>rm,YKP:()=>R_,h0i:()=>fc,PXZ:()=>am,R0b:()=>Pi,FiY:()=>gr,Lbi:()=>tm,g9A:()=>em,Qsj:()=>xg,FYo:()=>Ww,JOm:()=>zo,tp0:()=>mr,Rgc:()=>Rf,dDg:()=>N0,q4F:()=>S_,GfV:()=>Zw,s_b:()=>Nf,ifc:()=>He,eFA:()=>P0,G48:()=>Zd,Gpc:()=>U,X6Q:()=>yv,_c5:()=>Ua,VLi:()=>cv,c2e:()=>nm,zSh:()=>Ra,wAp:()=>gt,vHH:()=>Ve,cg1:()=>Eg,kL8:()=>c_,dqk:()=>Ht,sIi:()=>Cu,CqO:()=>Td,QGY:()=>Pa,F4k:()=>vo,RDi:()=>tl,AaK:()=>se,qOj:()=>eg,TTD:()=>Fi,_Bn:()=>lc,xp6:()=>tE,uIk:()=>ef,ekj:()=>pf,Suo:()=>$g,Xpm:()=>On,lG2:()=>kt,Yz7:()=>Jt,cJS:()=>pn,oAB:()=>De,Yjl:()=>Tt,Y36:()=>Yo,_UZ:()=>lg,qZA:()=>Mu,TgZ:()=>tr,EpF:()=>at,n5z:()=>Vo,LFG:()=>W,$8M:()=>cs,$Z:()=>XE,NdJ:()=>Ru,CRH:()=>d0,oxw:()=>dg,Q6J:()=>Er,VKq:()=>O_,WLB:()=>P_,iGM:()=>q_,CHM:()=>Ui,LSH:()=>x,YNc:()=>qy,_uU:()=>r_,Oqu:()=>Ou});var g=O(7396),L=O(5414),R=O(9105),re=O(8264),ie=O(9452);function fe(i){for(let s in i)if(i[s]===fe)return s;throw Error("Could not find renamed property on target object.")}function oe(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function se(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(se).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function le(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const j=fe({__forward_ref__:fe});function U(i){return i.__forward_ref__=U,i.toString=function(){return se(this())},i}function ee(i){return ke(i)?i():i}function ke(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===U}class Ve extends Error{constructor(s,a){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,a)),this.code=s}}function Y(i){return"string"==typeof i?i:null==i?"":String(i)}function ae(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Y(i)}function xe(i,s){const a=s?` in ${s}`:"";throw new Ve("201",`No provider for ${ae(i)} found${a}`)}function It(i,s){null==i&&function(i,s,a,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${a} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function Jt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function pn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Dn(i){return Wt(i,Ne)||Wt(i,jn)}function Wt(i,s){return i.hasOwnProperty(s)?i[s]:null}function pi(i){return i&&(i.hasOwnProperty(gn)||i.hasOwnProperty(ii))?i[gn]:null}const Ne=fe({\u0275prov:fe}),gn=fe({\u0275inj:fe}),jn=fe({ngInjectableDef:fe}),ii=fe({ngInjectorDef:fe});var tt=(()=>((tt=tt||{})[tt.Default=0]="Default",tt[tt.Host=1]="Host",tt[tt.Self=2]="Self",tt[tt.SkipSelf=4]="SkipSelf",tt[tt.Optional=8]="Optional",tt))();let Vt;function $n(i){const s=Vt;return Vt=i,s}function ht(i,s,a){const u=Dn(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&tt.Optional?null:void 0!==s?s:void xe(se(i),"Injector")}function xt(i){return{toString:i}.toString()}var Nt=(()=>((Nt=Nt||{})[Nt.OnPush=0]="OnPush",Nt[Nt.Default=1]="Default",Nt))(),He=(()=>{return(i=He||(He={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",He;var i})();const ut="undefined"!=typeof globalThis&&globalThis,oa="undefined"!=typeof window&&window,sn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ht=ut||"undefined"!=typeof global&&global||oa||sn,B={},V=[],H=fe({\u0275cmp:fe}),Ee=fe({\u0275dir:fe}),X=fe({\u0275pipe:fe}),Xe=fe({\u0275mod:fe}),st=fe({\u0275fac:fe}),Xt=fe({__NG_ELEMENT_ID__:fe});let Gn=0;function On(i){return xt(()=>{const a={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Nt.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||V,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||He.Emulated,id:"c",styles:i.styles||V,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,f=i.features,y=i.pipes;return u.id+=Gn++,u.inputs=mt(i.inputs,a),u.outputs=mt(i.outputs),f&&f.forEach(E=>E(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(J):null,u.pipeDefs=y?()=>("function"==typeof y?y():y).map(q):null,u})}function J(i){return Ft(i)||function(i){return i[Ee]||null}(i)}function q(i){return function(i){return i[X]||null}(i)}const G={};function De(i){return xt(()=>{const s={type:i.type,bootstrap:i.bootstrap||V,declarations:i.declarations||V,imports:i.imports||V,exports:i.exports||V,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(G[i.id]=i.type),s})}function mt(i,s){if(null==i)return B;const a={};for(const u in i)if(i.hasOwnProperty(u)){let c=i[u],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),a[c]=u,s&&(s[c]=f)}return a}const kt=On;function Tt(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Ft(i){return i[H]||null}function yt(i,s){const a=i[Xe]||null;if(!a&&!0===s)throw new Error(`Type ${se(i)} does not have '\u0275mod' property.`);return a}function rs(i){return Array.isArray(i)&&"object"==typeof i[1]}function wn(i){return Array.isArray(i)&&!0===i[1]}function Tc(i){return 0!=(8&i.flags)}function Ms(i){return 2==(2&i.flags)}function Ha(i){return 1==(1&i.flags)}function mi(i){return null!==i.template}function Ac(i){return 0!=(512&i[2])}function Rs(i,s){return i.hasOwnProperty(st)?i[st]:null}class la{constructor(s,a,u){this.previousValue=s,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function Fi(){return Li}function Li(i){return i.type.prototype.ngOnChanges&&(i.setInput=rh),Fc}function Fc(){const i=Xs(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===B)i.previous=s;else for(let u in s)a[u]=s[u];i.current=null,this.ngOnChanges(s)}}function rh(i,s,a,u){const c=Xs(i)||function(i,s){return i[yi]=s}(i,{previous:B,current:null}),f=c.current||(c.current={}),y=c.previous,E=this.declaredInputs[a],I=y[E];f[E]=new la(I&&I.currentValue,s,y===B),i[u]=s}Fi.ngInherit=!0;const yi="__ngSimpleChanges__";function Xs(i){return i[yi]||null}let za;function tl(i){za=i}function un(i){return!!i.listen}const eo={createRenderer:(i,s)=>void 0!==za?za:"undefined"!=typeof document?document:void 0};function xn(i){for(;Array.isArray(i);)i=i[0];return i}function Vi(i,s){return xn(s[i])}function br(i,s){return xn(s[i.index])}function Co(i,s){return i.data[s]}function Ut(i,s){const a=s[i];return rs(a)?a:a[0]}function Wa(i){return 4==(4&i[2])}function Ns(i){return 128==(128&i[2])}function Ur(i,s){return null==s?null:i[s]}function To(i){i[18]=0}function ir(i,s){i[5]+=s;let a=i,u=i[3];for(;null!==u&&(1===s&&1===a[5]||-1===s&&0===a[5]);)u[5]+=s,a=u,u=u[3]}const ft={lFrame:ha(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Za(){return ft.bindingsEnabled}function Ae(){return ft.lFrame.lView}function Lt(){return ft.lFrame.tView}function Ui(i){return ft.lFrame.contextLView=i,i[8]}function Rn(){let i=Qa();for(;null!==i&&64===i.type;)i=i.parent;return i}function Qa(){return ft.lFrame.currentTNode}function Tr(i,s){const a=ft.lFrame;a.currentTNode=i,a.isParent=s}function ca(){return ft.lFrame.isParent}function Ao(){return ft.isInCheckNoChangesMode}function So(i){ft.isInCheckNoChangesMode=i}function Xn(){const i=ft.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Mo(){return ft.lFrame.bindingIndex++}function Ro(i,s){const a=ft.lFrame;a.bindingIndex=a.bindingRootIndex=i,io(s)}function io(i){ft.lFrame.currentDirectiveIndex=i}function No(){return ft.lFrame.currentQueryIndex}function ol(i){ft.lFrame.currentQueryIndex=i}function eu(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function al(i,s,a){if(a&tt.SkipSelf){let c=s,f=i;for(;!(c=c.parent,null!==c||a&tt.Host||(c=eu(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;s=c,i=f}const u=ft.lFrame=ul();return u.currentTNode=s,u.lView=i,!0}function da(i){const s=ul(),a=i[1];ft.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function ul(){const i=ft.lFrame,s=null===i?null:i.child;return null===s?ha(i):s}function ha(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function ll(){const i=ft.lFrame;return ft.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const tu=ll;function cl(){const i=ll();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function bn(){return ft.lFrame.selectedIndex}function Ps(i){ft.lFrame.selectedIndex=i}function yn(){const i=ft.lFrame;return Co(i.tView,i.selectedIndex)}function Oo(i,s){for(let a=s.directiveStart,u=s.directiveEnd;a<u;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:b,ngOnDestroy:S}=f;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),b&&((i.viewHooks||(i.viewHooks=[])).push(a,b),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,b)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function Po(i,s,a){ah(i,s,3,a)}function fl(i,s,a,u){(3&i[2])===a&&ah(i,s,a,u)}function ru(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function ah(i,s,a,u){const f=null!=u?u:-1,y=s.length-1;let E=0;for(let I=void 0!==u?65535&i[18]:0;I<y;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=u&&E>=u)break}else s[I]<0&&(i[18]+=65536),(E<f||-1==f)&&(iu(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function iu(i,s,a,u){const c=a[u]<0,f=a[u+1],E=i[c?-a[u]:a[u]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class pa{constructor(s,a,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function In(i,s,a){const u=un(i);let c=0;for(;c<a.length;){const f=a[c];if("number"==typeof f){if(0!==f)break;c++;const y=a[c++],E=a[c++],I=a[c++];u?i.setAttribute(s,E,I,y):s.setAttributeNS(y,E,I)}else{const y=f,E=a[++c];it(y)?u&&i.setProperty(s,y,E):u?i.setAttribute(s,y,E):s.setAttribute(y,E),c++}}return c}function so(i){return 3===i||4===i||6===i}function it(i){return 64===i.charCodeAt(0)}function Bi(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let u=0;u<s.length;u++){const c=s[u];"number"==typeof c?a=c:0===a||Ei(i,a,c,null,-1===a||2===a?s[++u]:null)}}return i}function Ei(i,s,a,u,c){let f=0,y=i.length;if(-1===s)y=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===s){y=-1;break}if(E>s){y=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===u)return void(null!==c&&(i[f+1]=c));if(u===i[f+1])return void(i[f+2]=c)}f++,null!==u&&f++,null!==c&&f++}-1!==y&&(i.splice(y,0,s),f=y+1),i.splice(f++,0,a),null!==u&&i.splice(f++,0,u),null!==c&&i.splice(f++,0,c)}function li(i){return-1!==i}function ko(i){return 32767&i}function ga(i,s){let a=function(i){return i>>16}(i),u=s;for(;a>0;)u=u[15],a--;return u}let oo=!0;function wi(i){const s=oo;return oo=i,s}let ch=0;function ks(i,s){const a=er(i,s);if(-1!==a)return a;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,Fo(u.data,i),Fo(s,null),Fo(u.blueprint,null));const c=uo(i,s),f=i.injectorIndex;if(li(c)){const y=ko(c),E=ga(c,s),I=E[1].data;for(let b=0;b<8;b++)s[f+b]=E[y+b]|I[y+b]}return s[f+8]=c,f}function Fo(i,s){i.push(0,0,0,0,0,0,0,0,s)}function er(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function uo(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,u=null,c=s;for(;null!==c;){const f=c[1],y=f.type;if(u=2===y?f.declTNode:1===y?c[6]:null,null===u)return-1;if(a++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return-1}function lo(i,s,a){!function(i,s,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(Xt)&&(u=a[Xt]),null==u&&(u=a[Xt]=ch++);const c=255&u;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Ii(i,s,a){if(a&tt.Optional)return i;xe(s,"NodeInjector")}function pl(i,s,a,u){if(a&tt.Optional&&void 0===u&&(u=null),0==(a&(tt.Self|tt.Host))){const c=i[9],f=$n(void 0);try{return c?c.get(s,u,a&tt.Optional):ht(s,u,a&tt.Optional)}finally{$n(f)}}return Ii(u,s,a)}function ma(i,s,a,u=tt.Default,c){if(null!==i){const f=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Xt)?i[Xt]:void 0;return"number"==typeof s?s>=0?255&s:fh:s}(a);if("function"==typeof f){if(!al(s,i,u))return u&tt.Host?Ii(c,a,u):pl(s,a,u,c);try{const y=f(u);if(null!=y||u&tt.Optional)return y;xe(a)}finally{tu()}}else if("number"==typeof f){let y=null,E=er(i,s),I=-1,b=u&tt.Host?s[16][6]:null;for((-1===E||u&tt.SkipSelf)&&(I=-1===E?uo(i,s):s[E+8],-1!==I&&Gt(u,!1)?(y=s[1],E=ko(I),s=ga(I,s)):E=-1);-1!==E;){const S=s[1];if(gl(f,E,S.data)){const k=Lo(E,s,a,y,u,b);if(k!==us)return k}I=s[E+8],-1!==I&&Gt(u,s[1].data[E+8]===b)&&gl(f,E,s)?(y=S,E=ko(I),s=ga(I,s)):E=-1}}}return pl(s,a,u,c)}const us={};function fh(){return new co(Rn(),Ae())}function Lo(i,s,a,u,c,f){const y=s[1],E=y.data[i+8],S=Di(E,y,a,null==u?Ms(E)&&oo:u!=y&&0!=(3&E.type),c&tt.Host&&f===E);return null!==S?Fs(s,y,S,E):us}function Di(i,s,a,u,c){const f=i.providerIndexes,y=s.data,E=1048575&f,I=i.directiveStart,S=f>>20,$=c?E+S:i.directiveEnd;for(let Q=u?E:E+S;Q<$;Q++){const me=y[Q];if(Q<I&&a===me||Q>=I&&me.type===a)return Q}if(c){const Q=y[I];if(Q&&mi(Q)&&Q.type===a)return I}return null}function Fs(i,s,a,u){let c=i[a];const f=s.data;if(function(i){return i instanceof pa}(c)){const y=c;y.resolving&&function(i,s){throw new Ve("200",`Circular dependency in DI detected for ${i}`)}(ae(f[a]));const E=wi(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?$n(y.injectImpl):null;al(i,u,tt.Default);try{c=i[a]=y.factory(void 0,f,i,u),s.firstCreatePass&&a>=u.directiveStart&&function(i,s,a){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:f}=s.type.prototype;if(u){const y=Li(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&$n(I),wi(E),y.resolving=!1,tu()}}return c}function gl(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Gt(i,s){return!(i&tt.Self||i&tt.Host&&s)}class co{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,u){return ma(this._tNode,this._lView,s,u,a)}}function Vo(i){return xt(()=>{const s=i.prototype.constructor,a=s[st]||sr(s),u=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==u;){const f=c[st]||sr(c);if(f&&f!==a)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function sr(i){return ke(i)?()=>{const s=sr(ee(i));return s&&s()}:Rs(i)}function cs(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const u=a.length;let c=0;for(;c<u;){const f=a[c];if(so(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<u&&"string"==typeof a[c];)c++;else{if(f===s)return a[c+1];c+=2}}}return null}(Rn(),i)}const Ls="__parameters__";function Tn(i,s,a){return xt(()=>{const u=function(i){return function(...a){if(i){const u=i(...a);for(const c in u)this[c]=u[c]}}}(s);function c(...f){if(this instanceof c)return u.apply(this,f),this;const y=new c(...f);return E.annotation=y,E;function E(I,b,S){const k=I.hasOwnProperty(Ls)?I[Ls]:Object.defineProperty(I,Ls,{value:[]})[Ls];for(;k.length<=S;)k.push(null);return(k[S]=k[S]||[]).push(y),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class An{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Jt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Uo=new An("AnalyzeForEntryComponents");function bi(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let u=i[a];Array.isArray(u)?(s===i&&(s=i.slice(0,a)),bi(u,s)):s!==i&&s.push(u)}return s}function Ti(i,s){i.forEach(a=>Array.isArray(a)?Ti(a,s):s(a))}function yl(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function _a(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Sr(i,s,a){let u=jo(i,s);return u>=0?i[1|u]=a:(u=~u,function(i,s,a,u){let c=i.length;if(c==s)i.push(a,u);else if(1===c)i.push(u,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=u}}(i,u,s,a)),u}function ji(i,s){const a=jo(i,s);if(a>=0)return i[1|a]}function jo(i,s){return function(i,s,a){let u=0,c=i.length>>a;for(;c!==u;){const f=u+(c-u>>1),y=i[f<<a];if(s===y)return f<<a;y>s?c=f:u=f+1}return~(c<<a)}(i,s,1)}const $o={},Da="__NG_DI_FLAG__",Bs="ngTempTokenPath",vl=/\n/gm,D="__source",C=fe({provide:String,useValue:fe});let M;function F(i){const s=M;return M=i,s}function K(i,s=tt.Default){if(void 0===M)throw new Error("inject() must be called from an injection context");return null===M?ht(i,void 0,s):M.get(i,s&tt.Optional?null:void 0,s)}function W(i,s=tt.Default){return(Vt||K)(ee(i),s)}function ze(i){const s=[];for(let a=0;a<i.length;a++){const u=ee(i[a]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let c,f=tt.Default;for(let y=0;y<u.length;y++){const E=u[y],I=cn(E);"number"==typeof I?-1===I?c=E.token:f|=I:c=E}s.push(W(c,f))}else s.push(W(u))}return s}function Ot(i,s){return i[Da]=s,i.prototype[Da]=s,i}function cn(i){return i[Da]}const _n=Ot(Tn("Inject",i=>({token:i})),-1),gr=Ot(Tn("Optional"),8),mr=Ot(Tn("SkipSelf"),4);class Jc{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Go(i){return i instanceof Jc?i.changingThisBreaksApplicationSecurity:i}const dp=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,km=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var p=(()=>((p=p||{})[p.NONE=0]="NONE",p[p.HTML=1]="HTML",p[p.STYLE=2]="STYLE",p[p.SCRIPT=3]="SCRIPT",p[p.URL=4]="URL",p[p.RESOURCE_URL=5]="RESOURCE_URL",p))();function x(i){const s=function(){const i=Ae();return i&&i[12]}();return s?s.sanitize(p.URL,i)||"":function(i,s){const a=function(i){return i instanceof Jc&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Go(i):function(i){return(i=String(i)).match(dp)||i.match(km)?i:"unsafe:"+i}(Y(i))}const td="__ngContext__";function yr(i,s){i[td]=s}function nd(i){const s=function(i){return i[td]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Vm(i){return i.ngOriginalError}function bI(i,...s){i.error(...s)}class Mh{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),u=(i=s)&&i.ngErrorLogger||bI;var i;u(this._console,"ERROR",s),a&&u(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Vm(s);for(;a&&Vm(a);)a=Vm(a);return a||null}}const Gv=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ht))();function mo(i){return i instanceof Function?i():i}var zo=(()=>((zo=zo||{})[zo.Important=1]="Important",zo[zo.DashCase=2]="DashCase",zo))();function xh(i,s){return undefined(i,s)}function Rh(i){const s=i[3];return wn(s)?s[3]:s}function $m(i){return Zv(i[13])}function Hm(i){return Zv(i[4])}function Zv(i){for(;null!==i&&!wn(i);)i=i[4];return i}function Pl(i,s,a,u,c){if(null!=u){let f,y=!1;wn(u)?f=u:rs(u)&&(y=!0,u=u[0]);const E=xn(u);0===i&&null!==a?null==c?Qv(s,a,E):kl(s,a,E,c||null,!0):1===i&&null!==a?kl(s,a,E,c||null,!0):2===i?function(i,s,a){const u=Ap(i,s);u&&function(i,s,a,u){un(i)?i.removeChild(s,a,u):s.removeChild(a)}(i,u,s,a)}(s,E,y):3===i&&s.destroyNode(E),null!=f&&function(i,s,a,u,c){const f=a[7];f!==xn(a)&&Pl(s,i,u,f,c);for(let E=10;E<a.length;E++){const I=a[E];Nh(I[1],I,i,s,u,f)}}(s,i,f,a,c)}}function qm(i,s,a){return un(i)?i.createElement(s,a):null===a?i.createElement(s):i.createElementNS(a,s)}function Km(i,s){const a=i[9],u=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,ir(c,-1)),a.splice(u,1)}function Zm(i,s){if(i.length<=10)return;const a=10+s,u=i[a];if(u){const c=u[17];null!==c&&c!==i&&Km(c,u),s>0&&(i[a-1][4]=u[4]);const f=_a(i,10+s);!function(i,s){Nh(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const y=f[19];null!==y&&y.detachView(f[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function Ym(i,s){if(!(256&s[2])){const a=s[11];un(a)&&a.destroyNode&&Nh(i,s,a,3,null,null),function(i){let s=i[13];if(!s)return Tp(i[1],i);for(;s;){let a=null;if(rs(s))a=s[13];else{const u=s[10];u&&(a=u)}if(!a){for(;s&&!s[4]&&s!==i;)rs(s)&&Tp(s[1],s),s=s[3];null===s&&(s=i),rs(s)&&Tp(s[1],s),a=s&&s[4]}s=a}}(s)}}function Tp(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let u=0;u<a.length;u+=2){const c=s[a[u]];if(!(c instanceof pa)){const f=a[u+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const E=c[f[y]],I=f[y+1];try{I.call(E)}finally{}}else try{f.call(c)}finally{}}}}(i,s),function(i,s){const a=i.cleanup,u=s[7];let c=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+1],E="function"==typeof y?y(s):xn(s[y]),I=u[c=a[f+2]],b=a[f+3];"boolean"==typeof b?E.removeEventListener(a[f],I,b):b>=0?u[c=b]():u[c=-b].unsubscribe(),f+=2}else{const y=u[c=a[f+1]];a[f].call(y)}if(null!==u){for(let f=c+1;f<u.length;f++)u[f]();s[7]=null}}(i,s),1===s[1].type&&un(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&wn(s[3])){a!==s[3]&&Km(a,s);const u=s[19];null!==u&&u.detachView(i)}}}function mu(i,s,a){return function(i,s,a){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return a[0];if(2&u.flags){const c=i.data[u.directiveStart].encapsulation;if(c===He.None||c===He.Emulated)return null}return br(u,a)}(i,s.parent,a)}function kl(i,s,a,u,c){un(i)?i.insertBefore(s,a,u,c):s.insertBefore(a,u,c)}function Qv(i,s,a){un(i)?i.appendChild(s,a):s.appendChild(a)}function Xm(i,s,a,u,c){null!==u?kl(i,s,a,u,c):Qv(i,s,a)}function Ap(i,s){return un(i)?i.parentNode(s):s.parentNode}let Xv=function(i,s,a){return 40&i.type?br(i,a):null};function Mp(i,s,a,u){const c=mu(i,u,s),f=s[11],E=function(i,s,a){return Xv(i,s,a)}(u.parent||s[6],u,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)Xm(f,c,a[I],E,!1);else Xm(f,c,a,E,!1)}function xp(i,s){if(null!==s){const a=s.type;if(3&a)return br(s,i);if(4&a)return ry(-1,i[s.index]);if(8&a){const u=s.child;if(null!==u)return xp(i,u);{const c=i[s.index];return wn(c)?ry(-1,c):xn(c)}}if(32&a)return xh(s,i)()||xn(i[s.index]);{const u=ny(i,s);return null!==u?Array.isArray(u)?u[0]:xp(Rh(i[16]),u):xp(i,s.next)}}return null}function ny(i,s){return null!==s?i[16][6].projection[s.projection]:null}function ry(i,s){const a=10+i+1;if(a<s.length){const u=s[a],c=u[1].firstChild;if(null!==c)return xp(u,c)}return s[7]}function iy(i,s,a,u,c,f,y){for(;null!=a;){const E=u[a.index],I=a.type;if(y&&0===s&&(E&&yr(xn(E),u),a.flags|=4),64!=(64&a.flags))if(8&I)iy(i,s,a.child,u,c,f,!1),Pl(s,i,c,E,f);else if(32&I){const b=xh(a,u);let S;for(;S=b();)Pl(s,i,c,S,f);Pl(s,i,c,E,f)}else 16&I?Rr(i,s,u,a,c,f):Pl(s,i,c,E,f);a=y?a.projectionNext:a.next}}function Nh(i,s,a,u,c,f){iy(a,u,i.firstChild,s,c,f,!1)}function Rr(i,s,a,u,c,f){const y=a[16],I=y[6].projection[u.projection];if(Array.isArray(I))for(let b=0;b<I.length;b++)Pl(s,i,c,I[b],f);else iy(i,s,I,y[3],c,f,!0)}function eE(i,s,a){un(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function ms(i,s,a){un(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function GI(i,s,a){let u=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const f=s.length;if(c+f===u||i.charCodeAt(c+f)<=32)return c}a=c+1}}const _e="ng-template";function Fl(i,s,a){let u=0;for(;u<i.length;){let c=i[u++];if(a&&"class"===c){if(c=i[u],-1!==GI(c.toLowerCase(),s,0))return!0}else if(1===c){for(;u<i.length&&"string"==typeof(c=i[u++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function Oh(i){return 4===i.type&&i.value!==_e}function yu(i,s,a){return s===(4!==i.type||a?i.value:_e)}function jt(i,s,a){let u=4;const c=i.attrs||[],f=function(i){for(let s=0;s<i.length;s++)if(so(i[s]))return s;return i.length}(c);let y=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!y)if(4&u){if(u=2|1&u,""!==I&&!yu(i,I,a)||""===I&&1===s.length){if(yo(u))return!1;y=!0}}else{const b=8&u?I:s[++E];if(8&u&&null!==i.attrs){if(!Fl(i.attrs,b,a)){if(yo(u))return!1;y=!0}continue}const k=Ma(8&u?"class":I,c,Oh(i),a);if(-1===k){if(yo(u))return!1;y=!0;continue}if(""!==b){let $;$=k>f?"":c[k+1].toLowerCase();const Q=8&u?$:null;if(Q&&-1!==GI(Q,b,0)||2&u&&b!==$){if(yo(u))return!1;y=!0}}}}else{if(!y&&!yo(u)&&!yo(I))return!1;if(y&&yo(I))continue;y=!1,u=I|1&u}}return yo(u)||y}function yo(i){return 0==(1&i)}function Ma(i,s,a,u){if(null===s)return-1;let c=0;if(u||!a){let f=!1;for(;c<s.length;){const y=s[c];if(y===i)return c;if(3===y||6===y)f=!0;else{if(1===y||2===y){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===y)break;if(0===y){c+=4;continue}}c+=f?1:2}return-1}return function(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const u=i[a];if("number"==typeof u)return-1;if(u===s)return a;a++}return-1}(s,i)}function rt(i,s,a=!1){for(let u=0;u<s.length;u++)if(jt(i,s[u],a))return!0;return!1}function sd(i,s){return i?":not("+s.trim()+")":s}function qI(i){let s=i[0],a=1,u=2,c="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&u){const E=i[++a];c+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&u?c+="."+y:4&u&&(c+=" "+y);else""!==c&&!yo(y)&&(s+=sd(f,c),c=""),u=y,f=f||!yo(u);a++}return""!==c&&(s+=sd(f,c)),s}const Mt={};function tE(i){jr(Lt(),Ae(),bn()+i,Ao())}function jr(i,s,a,u){if(!u)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Po(s,f,a)}else{const f=i.preOrderHooks;null!==f&&fl(s,f,0,a)}Ps(a)}function _r(i,s){return i<<17|s<<2}function $r(i){return i>>17&32767}function Np(i){return 2|i}function Wo(i){return(131068&i)>>2}function ly(i,s){return-131069&i|s<<2}function kh(i){return 1|i}function mE(i,s){const a=i.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const c=a[u],f=a[u+1];if(-1!==f){const y=i.data[f];ol(c),y.contentQueries(2,s[f],f)}}}function Ll(i,s,a,u,c,f,y,E,I,b){const S=s.blueprint.slice();return S[0]=c,S[2]=140|u,To(S),S[3]=S[15]=i,S[8]=a,S[10]=y||i&&i[10],S[11]=E||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=b||i&&i[9]||null,S[6]=f,S[16]=2==s.type?i[16]:S,S}function Vl(i,s,a,u,c){let f=i.data[s];if(null===f)f=function(i,s,a,u,c){const f=Qa(),y=ca(),I=i.data[s]=function(i,s,a,u,c,f){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,s,u,c);return null===i.firstChild&&(i.firstChild=I),null!==f&&(y?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,a,u,c),ft.lFrame.inI18n&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=u,f.attrs=c;const y=function(){const i=ft.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Tr(f,!0),f}function _u(i,s,a,u){if(0===a)return-1;const c=s.length;for(let f=0;f<a;f++)s.push(u),i.blueprint.push(u),i.data.push(null);return c}function Ul(i,s,a){da(s);try{const u=i.viewQuery;null!==u&&qp(1,u,a);const c=i.template;null!==c&&qr(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&mE(i,s),i.staticViewQueries&&qp(2,i.viewQuery,a);const f=i.components;null!==f&&function(i,s){for(let a=0;a<s.length;a++)My(i,s[a])}(s,f)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,cl()}}function vu(i,s,a,u){const c=s[2];if(256==(256&c))return;da(s);const f=Ao();try{To(s),function(i){ft.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&qr(i,s,a,2,u);const y=3==(3&c);if(!f)if(y){const b=i.preOrderCheckHooks;null!==b&&Po(s,b,null)}else{const b=i.preOrderHooks;null!==b&&fl(s,b,0,null),ru(s,0)}if(function(i){for(let s=$m(i);null!==s;s=Hm(s)){if(!s[2])continue;const a=s[9];for(let u=0;u<a.length;u++){const c=a[u],f=c[3];0==(1024&c[2])&&ir(f,1),c[2]|=1024}}}(s),function(i){for(let s=$m(i);null!==s;s=Hm(s))for(let a=10;a<s.length;a++){const u=s[a],c=u[1];Ns(u)&&vu(c,u,c.template,u[8])}}(s),null!==i.contentQueries&&mE(i,s),!f)if(y){const b=i.contentCheckHooks;null!==b&&Po(s,b)}else{const b=i.contentHooks;null!==b&&fl(s,b,1),ru(s,1)}!function(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const c=a[u];if(c<0)Ps(~c);else{const f=c,y=a[++u],E=a[++u];Ro(y,f),E(2,s[f])}}}finally{Ps(-1)}}(i,s);const E=i.components;null!==E&&function(i,s){for(let a=0;a<s.length;a++)Sy(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&qp(2,I,u),!f)if(y){const b=i.viewCheckHooks;null!==b&&Po(s,b)}else{const b=i.viewHooks;null!==b&&fl(s,b,2),ru(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),f||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,ir(s[3],-1))}finally{cl()}}function Gr(i,s,a,u){const c=s[10],f=!Ao(),y=Wa(s);try{f&&!y&&c.begin&&c.begin(),y&&Ul(i,s,u),vu(i,s,a,u)}finally{f&&!y&&c.end&&c.end()}}function qr(i,s,a,u,c){const f=bn(),y=2&u;try{Ps(-1),y&&s.length>20&&jr(i,s,20,Ao()),a(u,c)}finally{Ps(f)}}function jh(i,s,a){!Za()||(function(i,s,a,u){const c=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||ks(a,s),yr(u,s);const y=a.initialInputs;for(let E=c;E<f;E++){const I=i.data[E],b=mi(I);b&&xi(s,a,I);const S=Fs(s,i,E,a);yr(S,s),null!==y&&jp(0,E-c,S,I,0,y),b&&(Ut(a.index,s)[8]=S)}}(i,s,a,br(a,s)),128==(128&a.flags)&&function(i,s,a){const u=a.directiveStart,c=a.directiveEnd,y=a.index,E=ft.lFrame.currentDirectiveIndex;try{Ps(y);for(let I=u;I<c;I++){const b=i.data[I],S=s[I];io(I),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&TE(b,S)}}finally{Ps(-1),io(E)}}(i,s,a))}function Ey(i,s,a=br){const u=s.localNames;if(null!==u){let c=s.index+1;for(let f=0;f<u.length;f+=2){const y=u[f+1],E=-1===y?a(s,i):i[y];i[c++]=E}}}function vE(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=$h(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function $h(i,s,a,u,c,f,y,E,I,b){const S=20+u,k=S+c,$=function(i,s){const a=[];for(let u=0;u<s;u++)a.push(u<i?null:Mt);return a}(S,k),Q="function"==typeof b?b():b;return $[1]={type:i,blueprint:$,template:a,queries:null,viewQuery:E,declTNode:s,data:$.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:Q,incompleteFirstPass:!1}}function IE(i,s,a,u){const c=xy(s);null===a?c.push(u):(c.push(a),i.firstCreatePass&&Wh(i).push(u,c.length-1))}function Iy(i,s,a){for(let u in i)if(i.hasOwnProperty(u)){const c=i[u];(a=null===a?{}:a).hasOwnProperty(u)?a[u].push(s,c):a[u]=[s,c]}return a}function ld(i,s,a,u){let c=!1;if(Za()){const f=function(i,s,a){const u=i.directiveRegistry;let c=null;if(u)for(let f=0;f<u.length;f++){const y=u[f];rt(a,y.selectors,!1)&&(c||(c=[]),lo(ks(a,s),i,y.type),mi(y)?(by(i,a),c.unshift(y)):c.push(y))}return c}(i,s,a),y=null===u?null:{"":-1};if(null!==f){c=!0,dd(a,i.data.length,f.length);for(let S=0;S<f.length;S++){const k=f[S];k.providersResolver&&k.providersResolver(k)}let E=!1,I=!1,b=_u(i,s,f.length,null);for(let S=0;S<f.length;S++){const k=f[S];a.mergedAttrs=Bi(a.mergedAttrs,k.hostAttrs),Ty(i,a,s,b,k),AE(b,k,y),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const $=k.type.prototype;!E&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&($.ngOnChanges||$.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),b++}!function(i,s){const u=s.directiveEnd,c=i.data,f=s.attrs,y=[];let E=null,I=null;for(let b=s.directiveStart;b<u;b++){const S=c[b],k=S.inputs,$=null===f||Oh(s)?null:SE(k,f);y.push($),E=Iy(k,b,E),I=Iy(S.outputs,b,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=E,s.outputs=I}(i,a)}y&&function(i,s,a){if(s){const u=i.localNames=[];for(let c=0;c<s.length;c+=2){const f=a[s[c+1]];if(null==f)throw new Ve("301",`Export of name '${s[c+1]}' not found!`);u.push(s[c],f)}}}(a,u,y)}return a.mergedAttrs=Bi(a.mergedAttrs,a.attrs),c}function bE(i,s,a,u,c,f){const y=f.hostBindings;if(y){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(u,c,y)}}function TE(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function by(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function AE(i,s,a){if(a){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)a[s.exportAs[u]]=i;mi(s)&&(a[""]=i)}}function dd(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Ty(i,s,a,u,c){i.data[u]=c;const f=c.factory||(c.factory=Rs(c.type)),y=new pa(f,mi(c),null);i.blueprint[u]=y,a[u]=y,bE(i,s,0,u,_u(i,a,c.hostVars,Mt),c)}function xi(i,s,a){const u=br(s,i),c=vE(a),f=i[10],y=Eu(i,Ll(i,c,null,a.onPush?64:16,u,s,f,f.createRenderer(u,a),null,null));i[s.index]=y}function _o(i,s,a,u,c,f){const y=br(i,s);!function(i,s,a,u,c,f,y){if(null==f)un(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==y?Y(f):y(f,u||"",c);un(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],y,f,i.value,a,u,c)}function jp(i,s,a,u,c,f){const y=f[s];if(null!==y){const E=u.setInput;for(let I=0;I<y.length;){const b=y[I++],S=y[I++],k=y[I++];null!==E?u.setInput(a,k,b,S):a[S]=k}}}function SE(i,s){let a=null,u=0;for(;u<s.length;){const c=s[u];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[u+1])),u+=2}else u+=2;else u+=4}return a}function Ay(i,s,a,u){return new Array(i,!0,!1,s,null,0,u,a,null,null)}function Sy(i,s){const a=Ut(s,i);if(Ns(a)){const u=a[1];80&a[2]?vu(u,a,u.template,a[8]):a[5]>0&&Gh(a)}}function Gh(i){for(let u=$m(i);null!==u;u=Hm(u))for(let c=10;c<u.length;c++){const f=u[c];if(1024&f[2]){const y=f[1];vu(y,f,y.template,f[8])}else f[5]>0&&Gh(f)}const a=i[1].components;if(null!==a)for(let u=0;u<a.length;u++){const c=Ut(a[u],i);Ns(c)&&c[5]>0&&Gh(c)}}function My(i,s){const a=Ut(s,i),u=a[1];(function(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(u,a),Ul(u,a,a[8])}function Eu(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Hp(i){for(;i;){i[2]|=64;const s=Rh(i);if(Ac(i)&&!s)return i;i=s}return null}function hd(i,s,a){const u=s[10];u.begin&&u.begin();try{vu(i,s,i.template,a)}catch(c){throw wu(s,c),c}finally{u.end&&u.end()}}function Gp(i){!function(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],u=nd(a),c=u[1];Gr(c,u,c.template,a)}}(i[8])}function qp(i,s,a){ol(0),s(i,a)}const zh=(()=>Promise.resolve(null))();function xy(i){return i[7]||(i[7]=[])}function Wh(i){return i.cleanup||(i.cleanup=[])}function wu(i,s){const a=i[9],u=a?a.get(Mh,null):null;u&&u.handleError(s)}function zp(i,s,a,u,c){for(let f=0;f<a.length;){const y=a[f++],E=a[f++],I=s[y],b=i.data[y];null!==b.setInput?b.setInput(I,c,u,E):I[E]=c}}function xa(i,s,a){const u=Vi(s,i);!function(i,s,a){un(i)?i.setValue(s,a):s.textContent=a}(i[11],u,a)}function pd(i,s,a){let u=a?i.styles:null,c=a?i.classes:null,f=0;if(null!==s)for(let y=0;y<s.length;y++){const E=s[y];"number"==typeof E?f=E:1==f?c=le(c,E):2==f&&(u=le(u,E+": "+s[++y]+";"))}a?i.styles=u:i.stylesWithoutHost=u,a?i.classes=c:i.classesWithoutHost=c}const Wp=new An("INJECTOR",-1);class OE{get(s,a=$o){if(a===$o){const u=new Error(`NullInjectorError: No provider for ${se(s)}!`);throw u.name="NullInjectorError",u}return a}}const Ra=new An("Set Injector scope."),ys={},Kp={};let yd;function Kh(){return void 0===yd&&(yd=new OE),yd}function Ny(i,s=null,a=null,u){const c=Vn(i,s,a,u);return c._resolveInjectorDefTypes(),c}function Vn(i,s=null,a=null,u){return new Zp(i,a,s||Kh(),u)}class Zp{constructor(s,a,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&Ti(a,E=>this.processProvider(E,s,a)),Ti([s],E=>this.processInjectorType(E,[],f)),this.records.set(Wp,vd(void 0,this));const y=this.records.get(Ra);this.scope=null!=y?y.value:null,this.source=c||("object"==typeof s?null:se(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=$o,u=tt.Default){this.assertNotDestroyed();const c=F(this),f=$n(void 0);try{if(!(u&tt.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=("function"==typeof(i=s)||"object"==typeof i&&i instanceof An)&&Dn(s);E=I&&this.injectableDefInScope(I)?vd(Oy(s),ys):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(u&tt.Self?Kh():this.parent).get(s,a=u&tt.Optional&&a===$o?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Bs]=y[Bs]||[]).unshift(se(s)),c)throw y;return function(i,s,a,u){const c=i[Bs];throw s[D]&&c.unshift(s[D]),i.message=function(i,s,a,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=se(s);if(Array.isArray(s))c=s.map(se).join(" -> ");else if("object"==typeof s){let f=[];for(let y in s)if(s.hasOwnProperty(y)){let E=s[y];f.push(y+":"+("string"==typeof E?JSON.stringify(E):se(E)))}c=`{${f.join(", ")}}`}return`${a}${u?"("+u+")":""}[${c}]: ${i.replace(vl,"\n  ")}`}("\n"+i.message,c,a,u),i.ngTokenPath=c,i[Bs]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{$n(f),F(c)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,c)=>s.push(se(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,a,u){if(!(s=ee(s)))return!1;let c=pi(s);const f=null==c&&s.ngModule||void 0,y=void 0===f?s:f,E=-1!==u.indexOf(y);if(void 0!==f&&(c=pi(f)),null==c)return!1;if(null!=c.imports&&!E){let S;u.push(y);try{Ti(c.imports,k=>{this.processInjectorType(k,a,u)&&(void 0===S&&(S=[]),S.push(k))})}finally{}if(void 0!==S)for(let k=0;k<S.length;k++){const{ngModule:$,providers:Q}=S[k];Ti(Q,me=>this.processProvider(me,$,Q||V))}}this.injectorDefTypes.add(y);const I=Rs(y)||(()=>new y);this.records.set(y,vd(I,ys));const b=c.providers;if(null!=b&&!E){const S=s;Ti(b,k=>this.processProvider(k,S,b))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,u){let c=Ed(s=ee(s))?s:ee(s&&s.provide);const f=(i=s,Py(i)?vd(void 0,i.useValue):vd(_d(i),ys));var i;if(Ed(s)||!0!==s.multi)this.records.get(c);else{let y=this.records.get(c);y||(y=vd(void 0,ys,!0),y.factory=()=>ze(y.multi),this.records.set(c,y)),c=s,y.multi.push(s)}this.records.set(c,f)}hydrate(s,a){return a.value===ys&&(a.value=Kp,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(i=a.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const a=ee(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Oy(i){const s=Dn(i),a=null!==s?s.factory:Rs(i);if(null!==a)return a;if(i instanceof An)throw new Error(`Token ${se(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const u=function(i,s){const a=[];for(let u=0;u<i;u++)a.push(s);return a}(s,"?");throw new Error(`Can't resolve all parameters for ${se(i)}: (${u.join(", ")}).`)}const a=function(i){const s=i&&(i[Ne]||i[jn]);if(s){const a=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Error("unreachable")}function _d(i,s,a){let u;if(Ed(i)){const c=ee(i);return Rs(c)||Oy(c)}if(Py(i))u=()=>ee(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...ze(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))u=()=>W(ee(i.useExisting));else{const c=ee(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return Rs(c)||Oy(c);u=()=>new c(...ze(i.deps))}return u}function vd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Py(i){return null!==i&&"object"==typeof i&&C in i}function Ed(i){return"function"==typeof i}let _s=(()=>{class i{static create(a,u){var c;if(Array.isArray(a))return Ny({name:""},u,a,"");{const f=null!=(c=a.name)?c:"";return Ny({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=$o,i.NULL=new OE,i.\u0275prov=Jt({token:i,providedIn:"any",factory:()=>W(Wp)}),i.__NG_ELEMENT_ID__=-1,i})();function dD(i,s){Oo(nd(i)[1],Rn())}function eg(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const u=[i];for(;s;){let c;if(mi(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");c=s.\u0275dir}if(c){if(a){u.push(c);const y=i;y.inputs=tg(i.inputs),y.declaredInputs=tg(i.declaredInputs),y.outputs=tg(i.outputs);const E=c.hostBindings;E&&Na(i,E);const I=c.viewQuery,b=c.contentQueries;if(I&&ng(i,I),b&&$E(i,b),oe(i.inputs,c.inputs),oe(i.declaredInputs,c.declaredInputs),oe(i.outputs,c.outputs),mi(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let y=0;y<f.length;y++){const E=f[y];E&&E.ngInherit&&E(i),E===eg&&(a=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,a=null;for(let u=i.length-1;u>=0;u--){const c=i[u];c.hostVars=s+=c.hostVars,c.hostAttrs=Bi(c.hostAttrs,a=Bi(a,c.hostAttrs))}}(u)}function tg(i){return i===B?{}:i===V?[]:i}function ng(i,s){const a=i.viewQuery;i.viewQuery=a?(u,c)=>{s(u,c),a(u,c)}:s}function $E(i,s){const a=i.contentQueries;i.contentQueries=a?(u,c,f)=>{s(u,c,f),a(u,c,f)}:s}function Na(i,s){const a=i.hostBindings;i.hostBindings=a?(u,c)=>{s(u,c),a(u,c)}:s}let Du=null;function Hl(){if(!Du){const i=Ht.Symbol;if(i&&i.iterator)Du=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const u=s[a];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Du=u)}}}return Du}function Cu(i){return!!Id(i)&&(Array.isArray(i)||!(i instanceof Map)&&Hl()in i)}function Id(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Zo(i,s,a){return i[s]=a}function vr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function ef(i,s,a,u){const c=Ae();return vr(c,Mo(),s)&&(Lt(),_o(yn(),c,i,s,a,u)),ef}function qy(i,s,a,u,c,f,y,E){const I=Ae(),b=Lt(),S=i+20,k=b.firstCreatePass?function(i,s,a,u,c,f,y,E,I){const b=s.consts,S=Vl(s,i,4,y||null,Ur(b,E));ld(s,a,S,Ur(b,I)),Oo(s,S);const k=S.tViews=$h(2,S,u,c,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,b);return null!==s.queries&&(s.queries.template(s,S),k.queries=s.queries.embeddedTView(S)),S}(S,b,I,s,a,u,c,f,y):b.data[S];Tr(k,!1);const $=I[11].createComment("");Mp(b,I,$,k),yr($,I),Eu(I,I[S]=Ay($,I,$,k)),Ha(k)&&jh(b,I,k),null!=y&&Ey(I,k,E)}function Yo(i,s=tt.Default){const a=Ae();return null===a?W(i,s):ma(Rn(),a,ee(i),s)}function XE(){throw new Error("invalid")}function Er(i,s,a){const u=Ae();return vr(u,Mo(),s)&&function(i,s,a,u,c,f,y,E){const I=br(s,a);let S,b=s.inputs;!E&&null!=b&&(S=b[u])?(zp(i,a,S,u,c),Ms(s)&&function(i,s){const a=Ut(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(u=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),c=null!=y?y(c,s.value||"",u):c,un(f)?f.setProperty(I,u,c):it(u)||(I.setProperty?I.setProperty(u,c):I[u]=c))}(Lt(),yn(),u,i,s,u[11],a,!1),Er}function Ky(i,s,a,u,c){const y=c?"class":"style";zp(i,a,s.inputs[y],y,u)}function tr(i,s,a,u){const c=Ae(),f=Lt(),y=20+i,E=c[11],I=c[y]=qm(E,s,ft.lFrame.currentNamespace),b=f.firstCreatePass?function(i,s,a,u,c,f,y){const E=s.consts,b=Vl(s,i,2,c,Ur(E,f));return ld(s,a,b,Ur(E,y)),null!==b.attrs&&pd(b,b.attrs,!1),null!==b.mergedAttrs&&pd(b,b.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,b),b}(y,f,c,0,s,a,u):f.data[y];Tr(b,!0);const S=b.mergedAttrs;null!==S&&In(E,I,S);const k=b.classes;null!==k&&ms(E,I,k);const $=b.styles;null!==$&&eE(E,I,$),64!=(64&b.flags)&&Mp(f,c,I,b),0===ft.lFrame.elementDepthCount&&yr(I,c),ft.lFrame.elementDepthCount++,Ha(b)&&(jh(f,c,b),function(i,s,a){if(Tc(s)){const c=s.directiveEnd;for(let f=s.directiveStart;f<c;f++){const y=i.data[f];y.contentQueries&&y.contentQueries(1,a[f],f)}}}(f,b,c)),null!==u&&Ey(c,b)}function Mu(){let i=Rn();ca()?ft.lFrame.isParent=!1:(i=i.parent,Tr(i,!1));const s=i;ft.lFrame.elementDepthCount--;const a=Lt();a.firstCreatePass&&(Oo(a,i),Tc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&Ky(a,s,Ae(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&Ky(a,s,Ae(),s.stylesWithoutHost,!1)}function lg(i,s,a,u){tr(i,s,a,u),Mu()}function at(){return Ae()}function Pa(i){return!!i&&"function"==typeof i.then}function vo(i){return!!i&&"function"==typeof i.subscribe}const Td=vo;function Ru(i,s,a,u){const c=Ae(),f=Lt(),y=Rn();return function(i,s,a,u,c,f,y,E){const I=Ha(u),S=i.firstCreatePass&&Wh(i),k=s[8],$=xy(s);let Q=!0;if(3&u.type||E){const Be=br(u,s),Qe=E?E(Be):Be,be=$.length,ot=E?$t=>E(xn($t[u.index])):u.index;if(un(a)){let $t=null;if(!E&&I&&($t=function(i,s,a,u){const c=i.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const y=c[f];if(y===a&&c[f+1]===u){const E=s[7],I=c[f+2];return E.length>I?E[I]:null}"string"==typeof y&&(f+=2)}return null}(i,s,c,u.index)),null!==$t)($t.__ngLastListenerFn__||$t).__ngNextListenerFn__=f,$t.__ngLastListenerFn__=f,Q=!1;else{f=uf(u,s,k,f,!1);const hn=a.listen(Qe,c,f);$.push(f,hn),S&&S.push(c,ot,be,be+1)}}else f=uf(u,s,k,f,!0),Qe.addEventListener(c,f,y),$.push(f),S&&S.push(c,ot,be,y)}else f=uf(u,s,k,f,!1);const me=u.outputs;let Pe;if(Q&&null!==me&&(Pe=me[c])){const Be=Pe.length;if(Be)for(let Qe=0;Qe<Be;Qe+=2){const Qi=s[Pe[Qe]][Pe[Qe+1]].subscribe(f),wo=$.length;$.push(f,Qi),S&&S.push(c,u.index,wo,-(wo+1))}}}(f,c,c[11],y,i,s,!!a,u),Ru}function af(i,s,a,u){try{return!1!==a(u)}catch(c){return wu(i,c),!1}}function uf(i,s,a,u,c){return function f(y){if(y===Function)return u;const E=2&i.flags?Ut(i.index,s):s;0==(32&s[2])&&Hp(E);let I=af(s,0,u,y),b=f.__ngNextListenerFn__;for(;b;)I=af(s,0,b,y)&&I,b=b.__ngNextListenerFn__;return c&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function dg(i=1){return function(i){return(ft.lFrame.contextLView=function(i,s){for(;i>0;)s=s[15],i--;return s}(i,ft.lFrame.contextLView))[8]}(i)}function sw(i,s,a,u,c){const f=i[a+1],y=null===s;let E=u?$r(f):Wo(f),I=!1;for(;0!==E&&(!1===I||y);){const S=i[E+1];bD(i[E],s)&&(I=!0,i[E+1]=u?kh(S):Np(S)),E=u?$r(S):Wo(S)}I&&(i[a+1]=u?Np(f):kh(f))}function bD(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&jo(i,s)>=0}function pf(i,s){return function(i,s,a,u){const c=Ae(),f=Lt(),y=function(i){const s=ft.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function(i,s,a,u){const c=i.data;if(null===c[a+1]){const f=c[bn()],y=function(i,s){return s>=i.expandoStartIndex}(i,a);(function(i,s){return 0!=(i.flags&(s?16:32))})(f,u)&&null===s&&!y&&(s=!1),s=function(i,s,a,u){const c=function(i){const s=ft.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=u?s.residualClasses:s.residualStyles;if(null===c)0===(u?s.classBindings:s.styleBindings)&&(a=Rd(a=pg(null,i,s,a,u),s.attrs,u),f=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==c)if(a=pg(c,i,s,a,u),null===f){let I=function(i,s,a){const u=a?s.classBindings:s.styleBindings;if(0!==Wo(u))return i[$r(u)]}(i,s,u);void 0!==I&&Array.isArray(I)&&(I=pg(null,i,s,I[1],u),I=Rd(I,s.attrs,u),function(i,s,a,u){i[$r(a?s.classBindings:s.styleBindings)]=u}(i,s,u,I))}else f=function(i,s,a){let u;const c=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<c;f++)u=Rd(u,i[f].hostAttrs,a);return Rd(u,s.attrs,a)}(i,s,u)}return void 0!==f&&(u?s.residualClasses=f:s.residualStyles=f),a}(c,f,s,u),function(i,s,a,u,c,f){let y=f?s.classBindings:s.styleBindings,E=$r(y),I=Wo(y);i[u]=a;let S,b=!1;if(Array.isArray(a)){const k=a;S=k[1],(null===S||jo(k,S)>0)&&(b=!0)}else S=a;if(c)if(0!==I){const $=$r(i[E+1]);i[u+1]=_r($,E),0!==$&&(i[$+1]=ly(i[$+1],u)),i[E+1]=function(i,s){return 131071&i|s<<17}(i[E+1],u)}else i[u+1]=_r(E,0),0!==E&&(i[E+1]=ly(i[E+1],u)),E=u;else i[u+1]=_r(I,0),0===E?E=u:i[I+1]=ly(i[I+1],u),I=u;b&&(i[u+1]=Np(i[u+1])),sw(i,S,u,!0),sw(i,S,u,!1),function(i,s,a,u,c){const f=c?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&jo(f,s)>=0&&(a[u+1]=kh(a[u+1]))}(s,S,i,u,f),y=_r(E,I),f?s.classBindings=y:s.styleBindings=y}(c,f,s,a,y,u)}}(f,i,y,u),s!==Mt&&vr(c,y,s)&&function(i,s,a,u,c,f,y,E){if(!(3&s.type))return;const I=i.data,b=I[E+1];Jo(function(i){return 1==(1&i)}(b)?tc(I,s,a,c,Wo(b),y):void 0)||(Jo(f)||function(i){return 2==(2&i)}(b)&&(f=tc(I,null,a,c,E,y)),function(i,s,a,u,c){const f=un(i);if(s)c?f?i.addClass(a,u):a.classList.add(u):f?i.removeClass(a,u):a.classList.remove(u);else{let y=-1===u.indexOf("-")?void 0:zo.DashCase;if(null==c)f?i.removeStyle(a,u,y):a.style.removeProperty(u);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),y|=zo.Important),f?i.setStyle(a,u,c,y):a.style.setProperty(u,c,E?"important":"")}}}(u,y,Vi(bn(),a),c,f))}(f,f.data[bn()],c,c[11],i,c[y+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=se(Go(i)))),i}(s,a),u,y)}(i,s,null,!0),pf}function pg(i,s,a,u,c){let f=null;const y=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<y&&(f=s[E],u=Rd(u,f.hostAttrs,c),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),u}function Rd(i,s,a){const u=a?1:2;let c=-1;if(null!==s)for(let f=0;f<s.length;f++){const y=s[f];"number"==typeof y?c=y:c===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Sr(i,y,!!a||s[++f]))}return void 0===i?null:i}function tc(i,s,a,u,c,f){const y=null===s;let E;for(;c>0;){const I=i[c],b=Array.isArray(I),S=b?I[1]:I,k=null===S;let $=a[c+1];$===Mt&&($=k?V:void 0);let Q=k?ji($,u):S===u?$:void 0;if(b&&!Jo(Q)&&(Q=ji(I,u)),Jo(Q)&&(E=Q,y))return E;const me=i[c+1];c=y?$r(me):Wo(me)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(E=ji(I,u))}return E}function Jo(i){return void 0!==i}function r_(i,s=""){const a=Ae(),u=Lt(),c=i+20,f=u.firstCreatePass?Vl(u,c,1,s,null):u.data[c],y=a[c]=function(i,s){return un(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Mp(u,a,y,f),Tr(f,!1)}function Ou(i){return mg("",i,""),Ou}function mg(i,s,a){const u=Ae(),c=function(i,s,a,u){return vr(i,Mo(),a)?s+Y(a)+u:Mt}(u,i,s,a);return c!==Mt&&xa(u,bn(),c),mg}const nc=void 0;var Ef=["en",[["a","p"],["AM","PM"],nc],[["AM","PM"],nc,nc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],nc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],nc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",nc,"{1} 'at' {0}",nc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const a=Math.floor(Math.abs(i)),u=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===u?1:5}];let Xo={};function Eg(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Mw(s);if(a)return a;const u=s.split("-")[0];if(a=Mw(u),a)return a;if("en"===u)return Ef;throw new Error(`Missing locale data for the locale "${i}".`)}function c_(i){return Eg(i)[gt.PluralCase]}function Mw(i){return i in Xo||(Xo[i]=Ht.ng&&Ht.ng.common&&Ht.ng.common.locales&&Ht.ng.common.locales[i]),Xo[i]}var gt=(()=>((gt=gt||{})[gt.LocaleId=0]="LocaleId",gt[gt.DayPeriodsFormat=1]="DayPeriodsFormat",gt[gt.DayPeriodsStandalone=2]="DayPeriodsStandalone",gt[gt.DaysFormat=3]="DaysFormat",gt[gt.DaysStandalone=4]="DaysStandalone",gt[gt.MonthsFormat=5]="MonthsFormat",gt[gt.MonthsStandalone=6]="MonthsStandalone",gt[gt.Eras=7]="Eras",gt[gt.FirstDayOfWeek=8]="FirstDayOfWeek",gt[gt.WeekendRange=9]="WeekendRange",gt[gt.DateFormat=10]="DateFormat",gt[gt.TimeFormat=11]="TimeFormat",gt[gt.DateTimeFormat=12]="DateTimeFormat",gt[gt.NumberSymbols=13]="NumberSymbols",gt[gt.NumberFormats=14]="NumberFormats",gt[gt.CurrencyCode=15]="CurrencyCode",gt[gt.CurrencySymbol=16]="CurrencySymbol",gt[gt.CurrencyName=17]="CurrencyName",gt[gt.Currencies=18]="Currencies",gt[gt.Directionality=19]="Directionality",gt[gt.PluralCase=20]="PluralCase",gt[gt.ExtraData=21]="ExtraData",gt))();const ku="en-US";let Od=ku;function bg(i,s,a,u,c){if(i=ee(i),Array.isArray(i))for(let f=0;f<i.length;f++)bg(i[f],s,a,u,c);else{const f=Lt(),y=Ae();let E=Ed(i)?i:ee(i.provide),I=_d(i);const b=Rn(),S=1048575&b.providerIndexes,k=b.directiveStart,$=b.providerIndexes>>20;if(Ed(i)||!i.multi){const Q=new pa(I,c,Yo),me=Ag(E,s,c?S:S+$,k);-1===me?(lo(ks(b,y),f,E),Tg(f,i,s.length),s.push(E),b.directiveStart++,b.directiveEnd++,c&&(b.providerIndexes+=1048576),a.push(Q),y.push(Q)):(a[me]=Q,y[me]=Q)}else{const Q=Ag(E,s,S+$,k),me=Ag(E,s,S,S+$),Pe=Q>=0&&a[Q],Be=me>=0&&a[me];if(c&&!Be||!c&&!Pe){lo(ks(b,y),f,E);const Qe=function(i,s,a,u,c){const f=new pa(i,a,Yo);return f.multi=[],f.index=s,f.componentProviders=0,Oi(f,c,u&&!a),f}(c?T_:Sg,a.length,c,u,I);!c&&Be&&(a[me].providerFactory=Qe),Tg(f,i,s.length,0),s.push(E),b.directiveStart++,b.directiveEnd++,c&&(b.providerIndexes+=1048576),a.push(Qe),y.push(Qe)}else Tg(f,i,Q>-1?Q:me,Oi(a[c?me:Q],I,!c&&u));!c&&u&&Be&&a[me].componentProviders++}}}function Tg(i,s,a,u){const c=Ed(s),f=function(i){return!!i.useClass}(s);if(c||f){const I=(f?ee(s.useClass):s).prototype.ngOnDestroy;if(I){const b=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=b.indexOf(a);-1===S?b.push(a,[u,I]):b[S+1].push(u,I)}else b.push(a,I)}}}function Oi(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Ag(i,s,a,u){for(let c=a;c<u;c++)if(s[c]===i)return c;return-1}function Sg(i,s,a,u){return Mg(this.multi,[])}function T_(i,s,a,u){const c=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=Fs(a,a[1],this.providerFactory.index,u);f=E.slice(0,y),Mg(c,f);for(let I=y;I<E.length;I++)f.push(E[I])}else f=[],Mg(c,f);return f}function Mg(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function lc(i,s=[]){return a=>{a.providersResolver=(u,c)=>function(i,s,a){const u=Lt();if(u.firstCreatePass){const c=mi(i);bg(a,u.data,u.blueprint,c,!0),bg(s,u.data,u.blueprint,c,!1)}}(u,c?c(i):i,s)}}class Bu{}class ju{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${se(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Eo=(()=>{class i{}return i.NULL=new ju,i})();function A_(){return dc(Rn(),Ae())}function dc(i,s){return new bf(br(i,s))}let bf=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=A_,i})();function JD(i){return i instanceof bf?i.nativeElement:i}class Ww{}let xg=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function(){const i=Ae(),a=Ut(Rn().index,i);return function(i){return i[11]}(rs(a)?a:i)}(),i})(),XD=(()=>{class i{}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:()=>null}),i})();class Zw{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const S_=new Zw("13.0.3"),ta={};function hc(i,s,a,u,c=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&u.push(xn(f)),wn(f))for(let E=10;E<f.length;E++){const I=f[E],b=I[1].firstChild;null!==b&&hc(I[1],I,b,u)}const y=a.type;if(8&y)hc(i,s,a.child,u);else if(32&y){const E=xh(a,s);let I;for(;I=E();)u.push(I)}else if(16&y){const E=ny(s,a);if(Array.isArray(E))u.push(...E);else{const I=Rh(s[16]);hc(I[1],I,E,u,!0)}}a=c?a.projectionNext:a.next}return u}class Tf{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return hc(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(wn(s)){const a=s[8],u=a?a.indexOf(this):-1;u>-1&&(Zm(s,u),_a(a,u))}this._attachedToViewContainer=!1}Ym(this._lView[1],this._lView)}onDestroy(s){IE(this._lView[1],this._lView,null,s)}markForCheck(){Hp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){hd(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,a){So(!0);try{hd(i,s,a)}finally{So(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,Nh(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class Yw extends Tf{constructor(s){super(s),this._view=s}detectChanges(){Gp(this._view)}checkNoChanges(){!function(i){So(!0);try{Gp(i)}finally{So(!1)}}(this._view)}get context(){return null}}class Rg extends Eo{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Ft(s);return new x_(a,this.ngModule)}}function Ng(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const Og=new An("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Gv});class x_ extends Bu{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=s.selectors.map(qI).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Ng(this.componentDef.inputs)}get outputs(){return Ng(this.componentDef.outputs)}create(s,a,u,c){const f=(c=c||this.ngModule)?function(i,s){return{get:(a,u,c)=>{const f=i.get(a,ta,c);return f!==ta||u===ta?f:s.get(a,u,c)}}}(s,c.injector):s,y=f.get(Ww,eo),E=f.get(XD,null),I=y.createRenderer(null,this.componentDef),b=this.componentDef.selectors[0][0]||"div",S=u?function(i,s,a){if(un(i))return i.selectRootElement(s,a===He.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(I,u,this.componentDef.encapsulation):qm(y.createRenderer(null,this.componentDef),b,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(b)),k=this.componentDef.onPush?576:528,$=function(i,s){return{components:[],scheduler:i||Gv,clean:zh,playerHandler:s||null,flags:0}}(),Q=$h(0,null,null,1,0,null,null,null,null,null),me=Ll(null,Q,$,k,null,null,y,I,E,f);let Pe,Be;da(me);try{const Qe=function(i,s,a,u,c,f){const y=a[1];a[20]=i;const I=Vl(y,20,2,"#host",null),b=I.mergedAttrs=s.hostAttrs;null!==b&&(pd(I,b,!0),null!==i&&(In(c,i,b),null!==I.classes&&ms(c,i,I.classes),null!==I.styles&&eE(c,i,I.styles)));const S=u.createRenderer(i,s),k=Ll(a,vE(s),null,s.onPush?64:16,a[20],I,u,S,f||null,null);return y.firstCreatePass&&(lo(ks(I,a),y,s.type),by(y,I),dd(I,a.length,1)),Eu(a,k),a[20]=k}(S,this.componentDef,me,y,I);if(S)if(u)In(I,S,["ng-version",S_.full]);else{const{attrs:be,classes:ot}=function(i){const s=[],a=[];let u=1,c=2;for(;u<i.length;){let f=i[u];if("string"==typeof f)2===c?""!==f&&s.push(f,i[++u]):8===c&&a.push(f);else{if(!yo(c))break;c=f}u++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);be&&In(I,S,be),ot&&ot.length>0&&ms(I,S,ot.join(" "))}if(Be=Co(Q,20),void 0!==a){const be=Be.projection=[];for(let ot=0;ot<this.ngContentSelectors.length;ot++){const $t=a[ot];be.push(null!=$t?Array.from($t):null)}}Pe=function(i,s,a,u,c){const f=a[1],y=function(i,s,a){const u=Rn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Ty(i,u,s,_u(i,s,1,null),a));const c=Fs(s,i,u.directiveStart,u);yr(c,s);const f=br(u,s);return f&&yr(f,s),c}(f,a,s);if(u.components.push(y),i[8]=y,c&&c.forEach(I=>I(y,s)),s.contentQueries){const I=Rn();s.contentQueries(1,y,I.directiveStart)}const E=Rn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Ps(E.index),bE(a[1],E,0,E.directiveStart,E.directiveEnd,s),TE(s,y)),y}(Qe,this.componentDef,me,$,[dD]),Ul(Q,me,null)}finally{cl()}return new Xw(this.componentType,Pe,dc(Be,me),me,Be)}}class Xw extends class{}{constructor(s,a,u,c,f){super(),this.location=u,this._rootLView=c,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new Yw(c),this.componentType=s}get injector(){return new co(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class fc{}class R_{}const $u=new Map;class pc extends fc{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Rg(this);const u=yt(s);this._bootstrapComponents=mo(u.bootstrap),this._r3Injector=Vn(s,a,[{provide:fc,useValue:this},{provide:Eo,useValue:this.componentFactoryResolver}],se(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=_s.THROW_IF_NOT_FOUND,u=tt.Default){return s===_s||s===fc||s===Wp?this:this._r3Injector.get(s,a,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Mf extends R_{constructor(s){super(),this.moduleType=s,null!==yt(s)&&function(i){const s=new Set;!function a(u){const c=yt(u,!0),f=c.id;null!==f&&(function(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${se(s)} vs ${se(s.name)}`)}(f,$u.get(f),u),$u.set(f,u));const y=mo(c.imports);for(const E of y)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new pc(this.moduleType,s)}}function O_(i,s,a,u){return function(i,s,a,u,c,f){const y=s+a;return vr(i,y,c)?Zo(i,y+1,f?u.call(f,c):u(c)):gc(i,y+1)}(Ae(),Xn(),i,s,a,u)}function P_(i,s,a,u,c){return function(i,s,a,u,c,f,y){const E=s+a;return function(i,s,a,u){const c=vr(i,s,a);return vr(i,s+1,u)||c}(i,E,c,f)?Zo(i,E+2,y?u.call(y,c,f):u(c,f)):gc(i,E+2)}(Ae(),Xn(),i,s,a,u,c)}function gc(i,s){const a=i[s];return a===Mt?void 0:a}function xf(i){return s=>{setTimeout(i,void 0,s)}}const Zs=class extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,u){var I,b,S;let c=s,f=a||(()=>null),y=u;if(s&&"object"==typeof s){const k=s;c=null==(I=k.next)?void 0:I.bind(k),f=null==(b=k.error)?void 0:b.bind(k),y=null==(S=k.complete)?void 0:S.bind(k)}this.__isAsync&&(f=xf(f),c&&(c=xf(c)),y&&(y=xf(y)));const E=super.subscribe({next:c,error:f,complete:y});return s instanceof L.w0&&s.add(E),E}};function B_(){return this._results[Hl()]()}class Lg{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Hl(),u=Lg.prototype;u[a]||(u[a]=B_)}get changes(){return this._changes||(this._changes=new Zs)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const u=this;u.dirty=!1;const c=bi(s);(this._changesDetected=!function(i,s,a){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let c=i[u],f=s[u];if(a&&(c=a(c),f=a(f)),f!==c)return!1}return!0}(u._results,c,a))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Rf=(()=>{class i{}return i.__NG_ELEMENT_ID__=cC,i})();const u0=Rf,lC=class extends u0{constructor(s,a,u){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(s){const a=this._declarationTContainer.tViews,u=Ll(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(u[19]=f.createEmbeddedView(a)),Ul(a,u,s),new Tf(u)}};function cC(){return Vg(Rn(),Ae())}function Vg(i,s){return 4&i.type?new lC(s,i,dc(i,s)):null}let Nf=(()=>{class i{}return i.__NG_ELEMENT_ID__=Ug,i})();function Ug(){return l0(Rn(),Ae())}const Of=Nf,Bg=class extends Of{constructor(s,a,u){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=u}get element(){return dc(this._hostTNode,this._hostLView)}get injector(){return new co(this._hostTNode,this._hostLView)}get parentInjector(){const s=uo(this._hostTNode,this._hostLView);if(li(s)){const a=ga(s,this._hostLView),u=ko(s);return new co(a[1].data[u+8],a)}return new co(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=j_(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,u){const c=s.createEmbeddedView(a||{});return this.insert(c,u),c}createComponent(s,a,u,c,f){const y=s&&!("function"==typeof s);let E;if(y)E=a;else{const k=a||{};E=k.index,u=k.injector,c=k.projectableNodes,f=k.ngModuleRef}const I=y?s:new x_(Ft(s)),b=u||this.parentInjector;if(!f&&null==I.ngModule&&b){const k=b.get(fc,null);k&&(f=k)}const S=I.create(b,c,void 0,f);return this.insert(S.hostView,E),S}insert(s,a){const u=s._lView,c=u[1];if(wn(u[3])){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const k=u[3],$=new Bg(k,k[6],k[3]);$.detach($.indexOf(s))}}const f=this._adjustIndex(a),y=this._lContainer;!function(i,s,a,u){const c=10+u,f=a.length;u>0&&(a[c-1][4]=s),u<f-10?(s[4]=a[c],yl(a,10+u,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,u,y,f);const E=ry(f,y),I=u[11],b=Ap(I,y[7]);return null!==b&&function(i,s,a,u,c,f){u[0]=c,u[6]=s,Nh(i,u,a,1,c,f)}(c,y[6],I,u,b,E),s.attachToViewContainerRef(),yl($_(y),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=j_(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),u=Zm(this._lContainer,a);u&&(_a($_(this._lContainer),a),Ym(u[1],u))}detach(s){const a=this._adjustIndex(s,-1),u=Zm(this._lContainer,a);return u&&null!=_a($_(this._lContainer),a)?new Tf(u):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function j_(i){return i[8]}function $_(i){return i[8]||(i[8]=[])}function l0(i,s){let a;const u=s[i.index];if(wn(u))a=u;else{let c;if(8&i.type)c=xn(u);else{const f=s[11];c=f.createComment("");const y=br(i,s);kl(f,Ap(f,y),c,function(i,s){return un(i)?i.nextSibling(s):s.nextSibling}(f,y),!1)}s[i.index]=a=Ay(u,s,c,i),Eu(s,a)}return new Bg(a,i,s)}class mc{constructor(s){this.queryList=s,this.matches=null}clone(){return new mc(this.queryList)}setDirty(){this.queryList.setDirty()}}class Pf{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const u=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let f=0;f<u;f++){const y=a.getByIndex(f);c.push(this.queries[y.indexInDeclarationView].clone())}return new Pf(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==qg(s,a).matches&&this.queries[a].setDirty()}}class yc{constructor(s,a,u=null){this.predicate=s,this.flags=a,this.read=u}}class kf{constructor(s=[]){this.queries=s}elementStart(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let u=0;u<this.length;u++){const c=null!==a?a.length:0,f=this.getByIndex(u).embeddedTView(s,c);f&&(f.indexInDeclarationView=u,null!==a?a.push(f):a=[f])}return null!==a?new kf(a):null}template(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Gd{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Gd(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const f=u[c];this.matchTNodeWithReadOption(s,a,Ff(a,f)),this.matchTNodeWithReadOption(s,a,Di(a,s,f,!1,!1))}else u===Rf?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Di(a,s,u,!1,!1))}matchTNodeWithReadOption(s,a,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===bf||c===Nf||c===Rf&&4&a.type)this.addMatch(a.index,-2);else{const f=Di(a,s,c,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,u)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Ff(i,s){const a=i.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===s)return a[u+1];return null}function c0(i,s,a,u){return-1===a?function(i,s){return 11&i.type?dc(i,s):4&i.type?Vg(i,s):null}(s,i):-2===a?function(i,s,a){return a===bf?dc(s,i):a===Rf?Vg(s,i):a===Nf?l0(s,i):void 0}(i,s,u):Fs(i,i[1],a,s)}function jg(i,s,a,u){const c=s[19].queries[u];if(null===c.matches){const f=i.data,y=a.matches,E=[];for(let I=0;I<y.length;I+=2){const b=y[I];E.push(b<0?null:c0(s,f[b],y[I+1],a.metadata.read))}c.matches=E}return c.matches}function na(i,s,a,u){const c=i.queries.getByIndex(a),f=c.matches;if(null!==f){const y=jg(i,s,c,a);for(let E=0;E<f.length;E+=2){const I=f[E];if(I>0)u.push(y[E/2]);else{const b=f[E+1],S=s[-I];for(let k=10;k<S.length;k++){const $=S[k];$[17]===$[3]&&na($[1],$,b,u)}if(null!==S[9]){const k=S[9];for(let $=0;$<k.length;$++){const Q=k[$];na(Q[1],Q,b,u)}}}}}return u}function q_(i){const s=Ae(),a=Lt(),u=No();ol(u+1);const c=qg(a,u);if(i.dirty&&Wa(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const f=c.crossesNgTemplate?na(a,s,u,[]):jg(a,s,c,u);i.reset(f,JD),i.notifyOnChanges()}return!0}return!1}function $g(i,s,a,u){const c=Lt();if(c.firstCreatePass){const f=Rn();(function(i,s,a){null===i.queries&&(i.queries=new kf),i.queries.track(new Gd(s,a))})(c,new yc(s,a,u),f.index),function(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function(i,s,a){const u=new Lg(4==(4&a));IE(i,s,u,u.destroy),null===s[19]&&(s[19]=new Pf),s[19].queries.push(new mc(u))}(c,Ae(),a)}function d0(){return i=Ae(),s=No(),i[19].queries[s].queryList;var i,s}function qg(i,s){return i.queries.getByIndex(s)}function Xg(...i){}const rv=new An("Application Initializer");let qu=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Xg,this.reject=Xg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(Pa(f))a.push(f);else if(Td(f)){const y=new Promise((E,I)=>{f.subscribe({complete:E,error:I})});a.push(y)}}Promise.all(a).then(()=>{u()}).catch(c=>{this.reject(c)}),0===a.length&&u(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(W(rv,8))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})();const T0=new An("AppId"),TC={provide:T0,useFactory:function(){return`${Bf()}${Bf()}${Bf()}`},deps:[]};function Bf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const em=new An("Platform Initializer"),tm=new An("Platform ID"),wc=new An("appBootstrapListener");let nm=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})();const rm=new An("LocaleId"),im=new An("DefaultCurrencyCode");class sv{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let ov=(()=>{class i{compileModuleSync(a){return new Mf(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const u=this.compileModuleSync(a),f=mo(yt(a).declarations).reduce((y,E)=>{const I=Ft(E);return I&&y.push(new x_(I)),y},[]);return new sv(u,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})();const MC=(()=>Promise.resolve(0))();function jf(i){"undefined"==typeof Zone?MC.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Pi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Zs(!1),this.onMicrotaskEmpty=new Zs(!1),this.onStable=new Zs(!1),this.onError=new Zs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&a,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let i=Ht.requestAnimationFrame,s=Ht.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ht,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,sm(i),i.isCheckStableRunning=!0,$f(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),sm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,c,f,y,E)=>{try{return x0(i),a.invokeTask(c,f,y,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),R0(i)}},onInvoke:(a,u,c,f,y,E,I)=>{try{return x0(i),a.invoke(c,f,y,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),R0(i)}},onHasTask:(a,u,c,f)=>{a.hasTask(c,f),u===c&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,sm(i),$f(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,u,c,f)=>(a.handleError(c,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Pi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Pi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,u){return this._inner.run(s,a,u)}runTask(s,a,u,c){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+c,s,RC,Xg,Xg);try{return f.runTask(y,a,u)}finally{f.cancelTask(y)}}runGuarded(s,a,u){return this._inner.runGuarded(s,a,u)}runOutsideAngular(s){return this._outer.run(s)}}const RC={};function $f(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function sm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function x0(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function R0(i){i._nesting--,$f(i)}class uv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Zs,this.onMicrotaskEmpty=new Zs,this.onStable=new Zs,this.onError=new Zs}run(s,a,u){return s.apply(a,u)}runGuarded(s,a,u){return s.apply(a,u)}runOutsideAngular(s){return s()}runTask(s,a,u,c){return s.apply(a,u)}}let N0=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Pi.assertNotInAngularZone(),jf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())jf(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,c){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:c})}whenStable(a,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,u,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(W(Pi))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})(),om=(()=>{class i{constructor(){this._applications=new Map,dv.addToWindow(this)}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return dv.findTestabilityInTree(this,a,u)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})();class lv{addToWindow(s){}findTestabilityInTree(s,a,u){return null}}function cv(i){dv=i}let Ys,dv=new lv;const fv=new An("AllowMultipleToken");class am{constructor(s,a){this.name=s,this.token=a}}function P0(i,s,a=[]){const u=`Platform: ${s}`,c=new An(u);return(f=[])=>{let y=pv();if(!y||y.injector.get(fv,!1))if(i)i(a.concat(f).concat({provide:c,useValue:!0}));else{const E=a.concat(f).concat({provide:c,useValue:!0},{provide:Ra,useValue:"platform"});!function(i){if(Ys&&!Ys.destroyed&&!Ys.injector.get(fv,!1))throw new Ve("400","");Ys=i.get(um);const s=i.get(em,null);s&&s.forEach(a=>a())}(_s.create({providers:E,name:u}))}return function(i){const s=pv();if(!s)throw new Ve("401","");return s}()}}function pv(){return Ys&&!Ys.destroyed?Ys:null}let um=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const E=function(i,s){let a;return a="noop"===i?new uv:("zone.js"===i?void 0:i)||new Pi({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),I=[{provide:Pi,useValue:E}];return E.run(()=>{const b=_s.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(b),k=S.injector.get(Mh,null);if(!k)throw new Ve("402","");return E.runOutsideAngular(()=>{const $=E.onError.subscribe({next:Q=>{k.handleError(Q)}});S.onDestroy(()=>{Kd(this._modules,S),$.unsubscribe()})}),function(i,s,a){try{const u=a();return Pa(u)?u.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(k,E,()=>{const $=S.injector.get(qu);return $.runInitializers(),$.donePromise.then(()=>(function(i){It(i,"Expected localeId to be defined"),"string"==typeof i&&(Od=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(rm,ku)||ku),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,u=[]){const c=lm({},u);return function(i,s,a){const u=new Mf(a);return Promise.resolve(u)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(a){const u=a.injector.get(Ic);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Ve("403","");a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ve("404","");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(W(_s))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})();function lm(i,s){return Array.isArray(s)?s.reduce(lm,i):vt(vt({},i),s)}let Ic=(()=>{class i{constructor(a,u,c,f,y){this._zone=a,this._injector=u,this._exceptionHandler=c,this._componentFactoryResolver=f,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new R.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),I=new R.y(b=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Pi.assertNotInAngularZone(),jf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Pi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{S.unsubscribe(),k.unsubscribe()}});this.isStable=(0,re.T)(E,I.pipe((0,ie.B)()))}bootstrap(a,u){if(!this._initStatus.done)throw new Ve("405","");let c;c=a instanceof Bu?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(c.componentType);const f=function(i){return i.isBoundToModule}(c)?void 0:this._injector.get(fc),E=c.create(_s.NULL,[],u||c.selector,f),I=E.location.nativeElement,b=E.injector.get(N0,null),S=b&&E.injector.get(om);return b&&S&&S.registerApplication(I,b),E.onDestroy(()=>{this.detachView(E.hostView),Kd(this.components,E),S&&S.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Ve("101","");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;Kd(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(wc,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(W(Pi),W(_s),W(Mh),W(Eo),W(qu))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})();function Kd(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let dm=!0,mv=!1;function yv(){return mv=!0,dm}function Zd(){if(mv)throw new Error("Cannot enable prod mode after platform setup.");dm=!1}let kC=(()=>{class i{}return i.__NG_ELEMENT_ID__=U0,i})();function U0(i){return function(i,s,a){if(Ms(i)&&!a){const u=Ut(i.index,s);return new Tf(u,u)}return 47&i.type?new Tf(s[16],s):null}(Rn(),Ae(),16==(16&i))}class H0{constructor(){}supports(s){return Cu(s)}create(s){return new $C(s)}}const Iv=(i,s)=>s;class $C{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Iv}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,u=this._removalsHead,c=0,f=null;for(;a||u;){const y=!u||a&&a.currentIndex<qC(u,c,f)?a:u,E=qC(y,c,f),I=y.currentIndex;if(y===u)c--,u=u._nextRemoved;else if(a=a._next,null==y.previousIndex)c++;else{f||(f=[]);const b=E-c,S=I-c;if(b!=S){for(let $=0;$<b;$++){const Q=$<f.length?f[$]:f[$]=0,me=Q+$;S<=me&&me<b&&(f[$]=Q+1)}f[y.previousIndex]=S-b}}E!==I&&s(y,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Cu(s))throw new Error(`Error trying to diff '${se(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,f,y,a=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)f=s[E],y=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,y)?(u&&(a=this._verifyReinsertion(a,f,y,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,E),u=!0),a=a._next}else c=0,function(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Hl()]();let u;for(;!(u=a.next()).done;)s(u.value)}}(s,E=>{y=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,y)?(u&&(a=this._verifyReinsertion(a,E,y,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,y,c),u=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,u,c){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,c)):s=this._addAfter(new HC(a,u),f,c),s}_verifyReinsertion(s,a,u,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?s=this._reinsertAfter(f,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,f=s._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(s,a,u),this._addToMoves(s,u),s}_moveAfter(s,a,u){return this._unlink(s),this._insertAfter(s,a,u),this._addToMoves(s,u),s}_addAfter(s,a,u){return this._insertAfter(s,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,u){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new GC),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,u=s._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new GC),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class HC{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Qn{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const a=s._prevDup,u=s._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class GC{constructor(){this.map=new Map}put(s){const a=s.trackById;let u=this.map.get(a);u||(u=new Qn,this.map.set(a,u)),u.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qC(i,s,a){const u=i.previousIndex;if(null===u)return u;let c=0;return a&&u<a.length&&(c=a[u]),u+s+c}class Cr{constructor(){}supports(s){return s instanceof Map||Id(s)}create(){return new G0}}class G0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Id(s)))throw new Error(`Error trying to diff '${se(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(c,u);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const u=s._prev;return a._next=s,a._prev=u,s._prev=a,u&&(u._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const f=c._prev,y=c._next;return f&&(f._next=y),y&&(y._prev=f),c._next=null,c._prev=null,c}const u=new zC(s);return this._records.set(s,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(u=>a(s[u],u))}}class zC{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function q0(){return new Hf([new H0])}let Hf=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(null!=u){const c=u.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||q0()),deps:[[i,new mr,new gr]]}}find(a){const u=this.factories.find(c=>c.supports(a));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(i){return i.name||typeof i}(a)}'`)}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:q0}),i})();function z0(){return new fm([new Cr])}let fm=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(u){const c=u.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||z0()),deps:[[i,new mr,new gr]]}}find(a){const u=this.factories.find(c=>c.supports(a));if(u)return u;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:z0}),i})();const KC=[new Cr],ZC=new Hf([new H0]),YC=new fm(KC),Ua=P0(null,"core",[{provide:tm,useValue:"unknown"},{provide:um,deps:[_s]},{provide:om,deps:[]},{provide:nm,deps:[]}]),JC=[{provide:Ic,useClass:Ic,deps:[Pi,_s,Mh,Eo,qu]},{provide:Og,deps:[Pi],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:qu,useClass:qu,deps:[[new gr,rv]]},{provide:ov,useClass:ov,deps:[]},TC,{provide:Hf,useFactory:function(){return ZC},deps:[]},{provide:fm,useFactory:function(){return YC},deps:[]},{provide:rm,useFactory:function(i){return i||"undefined"!=typeof $localize&&$localize.locale||ku},deps:[[new _n(rm),new gr,new mr]]},{provide:im,useValue:"USD"}];let W0=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(W(Ic))},i.\u0275mod=De({type:i}),i.\u0275inj=pn({providers:JC}),i})()}},Je=>{Je(Je.s=9121)}]);